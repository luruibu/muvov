# CoTURN 配置文件

# 监听端口 - IPv4 和 IPv6
listening-port=3478
tls-listening-port=5349

# IPv6 支持
listening-ip=0.0.0.0
listening-ip=::

# 外部 IP（Docker 会自动处理）
# external-ip=YOUR_SERVER_IP
# external-ip=YOUR_SERVER_IPV6

# 域名配置
realm=${DOMAIN}
server-name=${DOMAIN}

# IPv6 支持
ipv6

# 用户认证（简单的静态用户，生产环境建议使用数据库）
user=muvov:muvov123
user=guest:guest123

# 证书配置（使用 Caddy 生成的证书）
cert=/etc/ssl/caddy/certificates/acme-v02.api.letsencrypt.org-directory/${DOMAIN}/${DOMAIN}.crt
pkey=/etc/ssl/caddy/certificates/acme-v02.api.letsencrypt.org-directory/${DOMAIN}/${DOMAIN}.key

# 安全配置
fingerprint
lt-cred-mech
use-auth-secret
static-auth-secret=muvov-secret-key

# 网络配置
min-port=49152
max-port=65535

# 日志配置
verbose
log-file=/var/log/turnserver.log

# 性能优化
no-multicast-peers
no-cli
no-tlsv1
no-tlsv1_1

# 允许的对等端 - IPv4
allowed-peer-ip=10.0.0.0-10.255.255.255
allowed-peer-ip=192.168.0.0-192.168.255.255
allowed-peer-ip=172.16.0.0-172.31.255.255

# 允许的对等端 - IPv6
allowed-peer-ip=::1
allowed-peer-ip=fc00::/7
allowed-peer-ip=fe80::/10

# 拒绝到私有网络的连接（安全考虑） - IPv4
denied-peer-ip=0.0.0.0-0.255.255.255
denied-peer-ip=127.0.0.0-127.255.255.255
denied-peer-ip=169.254.0.0-169.254.255.255
denied-peer-ip=224.0.0.0-255.255.255.255

# 拒绝到私有网络的连接（安全考虑） - IPv6
denied-peer-ip=::0
denied-peer-ip=ff00::/8