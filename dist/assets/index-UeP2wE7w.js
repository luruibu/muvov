var F0=c=>{throw TypeError(c)};var ri=(c,a,r)=>a.has(c)?F0("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(c):a.set(c,r);function I0(c,a){for(var r=0;r<a.length;r++){const i=a[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in c)){const f=Object.getOwnPropertyDescriptor(i,o);f&&Object.defineProperty(c,o,f.get?f:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function i(o){if(o.ep)return;o.ep=!0;const f=r(o);fetch(o.href,f)}})();function Pr(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var oc={exports:{}},li={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vh;function X0(){if(Vh)return li;Vh=1;var c=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(i,o,f){var d=null;if(f!==void 0&&(d=""+f),o.key!==void 0&&(d=""+o.key),"key"in o){f={};for(var m in o)m!=="key"&&(f[m]=o[m])}else f=o;return o=f.ref,{$$typeof:c,type:i,key:d,ref:o!==void 0?o:null,props:f}}return li.Fragment=a,li.jsx=r,li.jsxs=r,li}var Qh;function K0(){return Qh||(Qh=1,oc.exports=X0()),oc.exports}var h=K0(),cc={exports:{}},pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh;function Z0(){if(Fh)return pe;Fh=1;var c=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function _(S){return S===null||typeof S!="object"?null:(S=x&&S[x]||S["@@iterator"],typeof S=="function"?S:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,A={};function C(S,z,J){this.props=S,this.context=z,this.refs=A,this.updater=J||M}C.prototype.isReactComponent={},C.prototype.setState=function(S,z){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,z,"setState")},C.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function O(){}O.prototype=C.prototype;function j(S,z,J){this.props=S,this.context=z,this.refs=A,this.updater=J||M}var E=j.prototype=new O;E.constructor=j,R(E,C.prototype),E.isPureReactComponent=!0;var N=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},Y=Object.prototype.hasOwnProperty;function w(S,z,J,ae,ce,ye){return J=ye.ref,{$$typeof:c,type:S,key:z,ref:J!==void 0?J:null,props:ye}}function F(S,z){return w(S.type,z,void 0,void 0,void 0,S.props)}function V(S){return typeof S=="object"&&S!==null&&S.$$typeof===c}function ne(S){var z={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(J){return z[J]})}var W=/\/+/g;function te(S,z){return typeof S=="object"&&S!==null&&S.key!=null?ne(""+S.key):z.toString(36)}function se(){}function X(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(se,se):(S.status="pending",S.then(function(z){S.status==="pending"&&(S.status="fulfilled",S.value=z)},function(z){S.status==="pending"&&(S.status="rejected",S.reason=z)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function le(S,z,J,ae,ce){var ye=typeof S;(ye==="undefined"||ye==="boolean")&&(S=null);var ue=!1;if(S===null)ue=!0;else switch(ye){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(S.$$typeof){case c:case a:ue=!0;break;case v:return ue=S._init,le(ue(S._payload),z,J,ae,ce)}}if(ue)return ce=ce(S),ue=ae===""?"."+te(S,0):ae,N(ce)?(J="",ue!=null&&(J=ue.replace(W,"$&/")+"/"),le(ce,z,J,"",function(Je){return Je})):ce!=null&&(V(ce)&&(ce=F(ce,J+(ce.key==null||S&&S.key===ce.key?"":(""+ce.key).replace(W,"$&/")+"/")+ue)),z.push(ce)),1;ue=0;var ke=ae===""?".":ae+":";if(N(S))for(var xe=0;xe<S.length;xe++)ae=S[xe],ye=ke+te(ae,xe),ue+=le(ae,z,J,ye,ce);else if(xe=_(S),typeof xe=="function")for(S=xe.call(S),xe=0;!(ae=S.next()).done;)ae=ae.value,ye=ke+te(ae,xe++),ue+=le(ae,z,J,ye,ce);else if(ye==="object"){if(typeof S.then=="function")return le(X(S),z,J,ae,ce);throw z=String(S),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return ue}function $(S,z,J){if(S==null)return S;var ae=[],ce=0;return le(S,ae,"","",function(ye){return z.call(J,ye,ce++)}),ae}function K(S){if(S._status===-1){var z=S._result;z=z(),z.then(function(J){(S._status===0||S._status===-1)&&(S._status=1,S._result=J)},function(J){(S._status===0||S._status===-1)&&(S._status=2,S._result=J)}),S._status===-1&&(S._status=0,S._result=z)}if(S._status===1)return S._result.default;throw S._result}var ee=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function me(){}return pe.Children={map:$,forEach:function(S,z,J){$(S,function(){z.apply(this,arguments)},J)},count:function(S){var z=0;return $(S,function(){z++}),z},toArray:function(S){return $(S,function(z){return z})||[]},only:function(S){if(!V(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},pe.Component=C,pe.Fragment=r,pe.Profiler=o,pe.PureComponent=j,pe.StrictMode=i,pe.Suspense=p,pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,pe.__COMPILER_RUNTIME={__proto__:null,c:function(S){return H.H.useMemoCache(S)}},pe.cache=function(S){return function(){return S.apply(null,arguments)}},pe.cloneElement=function(S,z,J){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var ae=R({},S.props),ce=S.key,ye=void 0;if(z!=null)for(ue in z.ref!==void 0&&(ye=void 0),z.key!==void 0&&(ce=""+z.key),z)!Y.call(z,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&z.ref===void 0||(ae[ue]=z[ue]);var ue=arguments.length-2;if(ue===1)ae.children=J;else if(1<ue){for(var ke=Array(ue),xe=0;xe<ue;xe++)ke[xe]=arguments[xe+2];ae.children=ke}return w(S.type,ce,void 0,void 0,ye,ae)},pe.createContext=function(S){return S={$$typeof:d,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:f,_context:S},S},pe.createElement=function(S,z,J){var ae,ce={},ye=null;if(z!=null)for(ae in z.key!==void 0&&(ye=""+z.key),z)Y.call(z,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ce[ae]=z[ae]);var ue=arguments.length-2;if(ue===1)ce.children=J;else if(1<ue){for(var ke=Array(ue),xe=0;xe<ue;xe++)ke[xe]=arguments[xe+2];ce.children=ke}if(S&&S.defaultProps)for(ae in ue=S.defaultProps,ue)ce[ae]===void 0&&(ce[ae]=ue[ae]);return w(S,ye,void 0,void 0,null,ce)},pe.createRef=function(){return{current:null}},pe.forwardRef=function(S){return{$$typeof:m,render:S}},pe.isValidElement=V,pe.lazy=function(S){return{$$typeof:v,_payload:{_status:-1,_result:S},_init:K}},pe.memo=function(S,z){return{$$typeof:y,type:S,compare:z===void 0?null:z}},pe.startTransition=function(S){var z=H.T,J={};H.T=J;try{var ae=S(),ce=H.S;ce!==null&&ce(J,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(me,ee)}catch(ye){ee(ye)}finally{H.T=z}},pe.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},pe.use=function(S){return H.H.use(S)},pe.useActionState=function(S,z,J){return H.H.useActionState(S,z,J)},pe.useCallback=function(S,z){return H.H.useCallback(S,z)},pe.useContext=function(S){return H.H.useContext(S)},pe.useDebugValue=function(){},pe.useDeferredValue=function(S,z){return H.H.useDeferredValue(S,z)},pe.useEffect=function(S,z,J){var ae=H.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(S,z)},pe.useId=function(){return H.H.useId()},pe.useImperativeHandle=function(S,z,J){return H.H.useImperativeHandle(S,z,J)},pe.useInsertionEffect=function(S,z){return H.H.useInsertionEffect(S,z)},pe.useLayoutEffect=function(S,z){return H.H.useLayoutEffect(S,z)},pe.useMemo=function(S,z){return H.H.useMemo(S,z)},pe.useOptimistic=function(S,z){return H.H.useOptimistic(S,z)},pe.useReducer=function(S,z,J){return H.H.useReducer(S,z,J)},pe.useRef=function(S){return H.H.useRef(S)},pe.useState=function(S){return H.H.useState(S)},pe.useSyncExternalStore=function(S,z,J){return H.H.useSyncExternalStore(S,z,J)},pe.useTransition=function(){return H.H.useTransition()},pe.version="19.1.1",pe}var Ih;function Jc(){return Ih||(Ih=1,cc.exports=Z0()),cc.exports}var U=Jc();const J0=Pr(U);var uc={exports:{}},oi={},fc={exports:{}},dc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xh;function W0(){return Xh||(Xh=1,(function(c){function a($,K){var ee=$.length;$.push(K);e:for(;0<ee;){var me=ee-1>>>1,S=$[me];if(0<o(S,K))$[me]=K,$[ee]=S,ee=me;else break e}}function r($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var K=$[0],ee=$.pop();if(ee!==K){$[0]=ee;e:for(var me=0,S=$.length,z=S>>>1;me<z;){var J=2*(me+1)-1,ae=$[J],ce=J+1,ye=$[ce];if(0>o(ae,ee))ce<S&&0>o(ye,ae)?($[me]=ye,$[ce]=ee,me=ce):($[me]=ae,$[J]=ee,me=J);else if(ce<S&&0>o(ye,ee))$[me]=ye,$[ce]=ee,me=ce;else break e}}return K}function o($,K){var ee=$.sortIndex-K.sortIndex;return ee!==0?ee:$.id-K.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;c.unstable_now=function(){return f.now()}}else{var d=Date,m=d.now();c.unstable_now=function(){return d.now()-m}}var p=[],y=[],v=1,x=null,_=3,M=!1,R=!1,A=!1,C=!1,O=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function N($){for(var K=r(y);K!==null;){if(K.callback===null)i(y);else if(K.startTime<=$)i(y),K.sortIndex=K.expirationTime,a(p,K);else break;K=r(y)}}function H($){if(A=!1,N($),!R)if(r(p)!==null)R=!0,Y||(Y=!0,te());else{var K=r(y);K!==null&&le(H,K.startTime-$)}}var Y=!1,w=-1,F=5,V=-1;function ne(){return C?!0:!(c.unstable_now()-V<F)}function W(){if(C=!1,Y){var $=c.unstable_now();V=$;var K=!0;try{e:{R=!1,A&&(A=!1,j(w),w=-1),M=!0;var ee=_;try{t:{for(N($),x=r(p);x!==null&&!(x.expirationTime>$&&ne());){var me=x.callback;if(typeof me=="function"){x.callback=null,_=x.priorityLevel;var S=me(x.expirationTime<=$);if($=c.unstable_now(),typeof S=="function"){x.callback=S,N($),K=!0;break t}x===r(p)&&i(p),N($)}else i(p);x=r(p)}if(x!==null)K=!0;else{var z=r(y);z!==null&&le(H,z.startTime-$),K=!1}}break e}finally{x=null,_=ee,M=!1}K=void 0}}finally{K?te():Y=!1}}}var te;if(typeof E=="function")te=function(){E(W)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,X=se.port2;se.port1.onmessage=W,te=function(){X.postMessage(null)}}else te=function(){O(W,0)};function le($,K){w=O(function(){$(c.unstable_now())},K)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function($){$.callback=null},c.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<$?Math.floor(1e3/$):5},c.unstable_getCurrentPriorityLevel=function(){return _},c.unstable_next=function($){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var ee=_;_=K;try{return $()}finally{_=ee}},c.unstable_requestPaint=function(){C=!0},c.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ee=_;_=$;try{return K()}finally{_=ee}},c.unstable_scheduleCallback=function($,K,ee){var me=c.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?me+ee:me):ee=me,$){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=ee+S,$={id:v++,callback:K,priorityLevel:$,startTime:ee,expirationTime:S,sortIndex:-1},ee>me?($.sortIndex=ee,a(y,$),r(p)===null&&$===r(y)&&(A?(j(w),w=-1):A=!0,le(H,ee-me))):($.sortIndex=S,a(p,$),R||M||(R=!0,Y||(Y=!0,te()))),$},c.unstable_shouldYield=ne,c.unstable_wrapCallback=function($){var K=_;return function(){var ee=_;_=K;try{return $.apply(this,arguments)}finally{_=ee}}}})(dc)),dc}var Kh;function ey(){return Kh||(Kh=1,fc.exports=W0()),fc.exports}var hc={exports:{}},st={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh;function ty(){if(Zh)return st;Zh=1;var c=Jc();function a(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function f(p,y,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:p,containerInfo:y,implementation:v}}var d=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return st.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,st.createPortal=function(p,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(a(299));return f(p,y,null,v)},st.flushSync=function(p){var y=d.T,v=i.p;try{if(d.T=null,i.p=2,p)return p()}finally{d.T=y,i.p=v,i.d.f()}},st.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(p,y))},st.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},st.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var v=y.as,x=m(v,y.crossOrigin),_=typeof y.integrity=="string"?y.integrity:void 0,M=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?i.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:_,fetchPriority:M}):v==="script"&&i.d.X(p,{crossOrigin:x,integrity:_,fetchPriority:M,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},st.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=m(y.as,y.crossOrigin);i.d.M(p,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(p)},st.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,x=m(v,y.crossOrigin);i.d.L(p,v,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},st.preloadModule=function(p,y){if(typeof p=="string")if(y){var v=m(y.as,y.crossOrigin);i.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(p)},st.requestFormReset=function(p){i.d.r(p)},st.unstable_batchedUpdates=function(p,y){return p(y)},st.useFormState=function(p,y,v){return d.H.useFormState(p,y,v)},st.useFormStatus=function(){return d.H.useHostTransitionStatus()},st.version="19.1.1",st}var Jh;function ny(){if(Jh)return hc.exports;Jh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(a){console.error(a)}}return c(),hc.exports=ty(),hc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wh;function ay(){if(Wh)return oi;Wh=1;var c=ey(),a=Jc(),r=ny();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(f(e)!==e)throw Error(i(188))}function p(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(i(188));return t!==e?null:e}for(var n=e,s=t;;){var l=n.return;if(l===null)break;var u=l.alternate;if(u===null){if(s=l.return,s!==null){n=s;continue}break}if(l.child===u.child){for(u=l.child;u;){if(u===n)return m(l),e;if(u===s)return m(l),t;u=u.sibling}throw Error(i(188))}if(n.return!==s.return)n=l,s=u;else{for(var g=!1,b=l.child;b;){if(b===n){g=!0,n=l,s=u;break}if(b===s){g=!0,s=l,n=u;break}b=b.sibling}if(!g){for(b=u.child;b;){if(b===n){g=!0,n=u,s=l;break}if(b===s){g=!0,s=u,n=l;break}b=b.sibling}if(!g)throw Error(i(189))}}if(n.alternate!==s)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),j=Symbol.for("react.consumer"),E=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function te(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var se=Symbol.for("react.client.reference");function X(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===se?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case C:return"Profiler";case A:return"StrictMode";case H:return"Suspense";case Y:return"SuspenseList";case V:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case M:return"Portal";case E:return(e.displayName||"Context")+".Provider";case j:return(e._context.displayName||"Context")+".Consumer";case N:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case w:return t=e.displayName||null,t!==null?t:X(e.type)||"Memo";case F:t=e._payload,e=e._init;try{return X(e(t))}catch{}}return null}var le=Array.isArray,$=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},me=[],S=-1;function z(e){return{current:e}}function J(e){0>S||(e.current=me[S],me[S]=null,S--)}function ae(e,t){S++,me[S]=e.current,e.current=t}var ce=z(null),ye=z(null),ue=z(null),ke=z(null);function xe(e,t){switch(ae(ue,t),ae(ye,e),ae(ce,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?bh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=bh(t),e=xh(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(ce),ae(ce,e)}function Je(){J(ce),J(ye),J(ue)}function Ft(e){e.memoizedState!==null&&ae(ke,e);var t=ce.current,n=xh(t,e.type);t!==n&&(ae(ye,e),ae(ce,n))}function ga(e){ye.current===e&&(J(ce),J(ye)),ke.current===e&&(J(ke),ti._currentValue=ee)}var os=Object.prototype.hasOwnProperty,cs=c.unstable_scheduleCallback,qn=c.unstable_cancelCallback,Gr=c.unstable_shouldYield,Vr=c.unstable_requestPaint,Et=c.unstable_now,Qr=c.unstable_getCurrentPriorityLevel,Le=c.unstable_ImmediatePriority,yi=c.unstable_UserBlockingPriority,ya=c.unstable_NormalPriority,Fr=c.unstable_LowPriority,vi=c.unstable_IdlePriority,va=c.log,Ir=c.unstable_setDisableYieldValue,$n=null,lt=null;function Lt(e){if(typeof va=="function"&&Ir(e),lt&&typeof lt.setStrictMode=="function")try{lt.setStrictMode($n,e)}catch{}}var ot=Math.clz32?Math.clz32:Zr,Xr=Math.log,Kr=Math.LN2;function Zr(e){return e>>>=0,e===0?32:31-(Xr(e)/Kr|0)|0}var It=256,Pn=4194304;function Ht(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Yn(e,t,n){var s=e.pendingLanes;if(s===0)return 0;var l=0,u=e.suspendedLanes,g=e.pingedLanes;e=e.warmLanes;var b=s&134217727;return b!==0?(s=b&~u,s!==0?l=Ht(s):(g&=b,g!==0?l=Ht(g):n||(n=b&~e,n!==0&&(l=Ht(n))))):(b=s&~u,b!==0?l=Ht(b):g!==0?l=Ht(g):n||(n=s&~e,n!==0&&(l=Ht(n)))),l===0?0:t!==0&&t!==l&&(t&u)===0&&(u=l&-l,n=t&-t,u>=n||u===32&&(n&4194048)!==0)?t:l}function Gn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function bi(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xi(){var e=It;return It<<=1,(It&4194048)===0&&(It=256),e}function us(){var e=Pn;return Pn<<=1,(Pn&62914560)===0&&(Pn=4194304),e}function ba(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Z(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Qe(e,t,n,s,l,u){var g=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var b=e.entanglements,T=e.expirationTimes,L=e.hiddenUpdates;for(n=g&~n;0<n;){var G=31-ot(n),I=1<<G;b[G]=0,T[G]=-1;var q=L[G];if(q!==null)for(L[G]=null,G=0;G<q.length;G++){var P=q[G];P!==null&&(P.lane&=-536870913)}n&=~I}s!==0&&Fe(e,s,0),u!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=u&~(g&~t))}function Fe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-ot(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|n&4194090}function Xt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-ot(n),l=1<<s;l&t|e[s]&t&&(e[s]|=t),n&=~l}}function fs(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Jr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function iu(){var e=K.p;return e!==0?e:(e=window.event,e===void 0?32:Hh(e.type))}function zp(e,t){var n=K.p;try{return K.p=e,t()}finally{K.p=n}}var dn=Math.random().toString(36).slice(2),nt="__reactFiber$"+dn,ft="__reactProps$"+dn,xa="__reactContainer$"+dn,Wr="__reactEvents$"+dn,Bp="__reactListeners$"+dn,Lp="__reactHandles$"+dn,ru="__reactResources$"+dn,ds="__reactMarker$"+dn;function el(e){delete e[nt],delete e[ft],delete e[Wr],delete e[Bp],delete e[Lp]}function Sa(e){var t=e[nt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xa]||n[nt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Th(e);e!==null;){if(n=e[nt])return n;e=Th(e)}return t}e=n,n=e.parentNode}return null}function Ca(e){if(e=e[nt]||e[xa]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function hs(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function _a(e){var t=e[ru];return t||(t=e[ru]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ie(e){e[ds]=!0}var lu=new Set,ou={};function Vn(e,t){Ta(e,t),Ta(e+"Capture",t)}function Ta(e,t){for(ou[e]=t,e=0;e<t.length;e++)lu.add(t[e])}var Hp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cu={},uu={};function qp(e){return os.call(uu,e)?!0:os.call(cu,e)?!1:Hp.test(e)?uu[e]=!0:(cu[e]=!0,!1)}function Si(e,t,n){if(qp(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ci(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Kt(e,t,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+s)}}var tl,fu;function Ea(e){if(tl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);tl=t&&t[1]||"",fu=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tl+e+fu}var nl=!1;function al(e,t){if(!e||nl)return"";nl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var I=function(){throw Error()};if(Object.defineProperty(I.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(I,[])}catch(P){var q=P}Reflect.construct(e,[],I)}else{try{I.call()}catch(P){q=P}e.call(I.prototype)}}else{try{throw Error()}catch(P){q=P}(I=e())&&typeof I.catch=="function"&&I.catch(function(){})}}catch(P){if(P&&q&&typeof P.stack=="string")return[P.stack,q.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=s.DetermineComponentFrameRoot(),g=u[0],b=u[1];if(g&&b){var T=g.split(`
`),L=b.split(`
`);for(l=s=0;s<T.length&&!T[s].includes("DetermineComponentFrameRoot");)s++;for(;l<L.length&&!L[l].includes("DetermineComponentFrameRoot");)l++;if(s===T.length||l===L.length)for(s=T.length-1,l=L.length-1;1<=s&&0<=l&&T[s]!==L[l];)l--;for(;1<=s&&0<=l;s--,l--)if(T[s]!==L[l]){if(s!==1||l!==1)do if(s--,l--,0>l||T[s]!==L[l]){var G=`
`+T[s].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=s&&0<=l);break}}}finally{nl=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ea(n):""}function $p(e){switch(e.tag){case 26:case 27:case 5:return Ea(e.type);case 16:return Ea("Lazy");case 13:return Ea("Suspense");case 19:return Ea("SuspenseList");case 0:case 15:return al(e.type,!1);case 11:return al(e.type.render,!1);case 1:return al(e.type,!0);case 31:return Ea("Activity");default:return""}}function du(e){try{var t="";do t+=$p(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Rt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Pp(e){var t=hu(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,u=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(g){s=""+g,u.call(this,g)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(g){s=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _i(e){e._valueTracker||(e._valueTracker=Pp(e))}function mu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=hu(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Ti(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Yp=/[\n"\\]/g;function Nt(e){return e.replace(Yp,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function sl(e,t,n,s,l,u,g,b){e.name="",g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.type=g:e.removeAttribute("type"),t!=null?g==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Rt(t)):e.value!==""+Rt(t)&&(e.value=""+Rt(t)):g!=="submit"&&g!=="reset"||e.removeAttribute("value"),t!=null?il(e,g,Rt(t)):n!=null?il(e,g,Rt(n)):s!=null&&e.removeAttribute("value"),l==null&&u!=null&&(e.defaultChecked=!!u),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Rt(b):e.removeAttribute("name")}function pu(e,t,n,s,l,u,g,b){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||n!=null){if(!(u!=="submit"&&u!=="reset"||t!=null))return;n=n!=null?""+Rt(n):"",t=t!=null?""+Rt(t):n,b||t===e.value||(e.value=t),e.defaultValue=t}s=s??l,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=b?e.checked:!!s,e.defaultChecked=!!s,g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.name=g)}function il(e,t,n){t==="number"&&Ti(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ra(e,t,n,s){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Rt(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function gu(e,t,n){if(t!=null&&(t=""+Rt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Rt(n):""}function yu(e,t,n,s){if(t==null){if(s!=null){if(n!=null)throw Error(i(92));if(le(s)){if(1<s.length)throw Error(i(93));s=s[0]}n=s}n==null&&(n=""),t=n}n=Rt(t),e.defaultValue=n,s=e.textContent,s===n&&s!==""&&s!==null&&(e.value=s)}function Na(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Gp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vu(e,t,n){var s=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,n):typeof n!="number"||n===0||Gp.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function bu(e,t,n){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var l in t)s=t[l],t.hasOwnProperty(l)&&n[l]!==s&&vu(e,l,s)}else for(var u in t)t.hasOwnProperty(u)&&vu(e,u,t[u])}function rl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ei(e){return Qp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var ll=null;function ol(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ja=null,Ma=null;function xu(e){var t=Ca(e);if(t&&(e=t.stateNode)){var n=e[ft]||null;e:switch(e=t.stateNode,t.type){case"input":if(sl(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Nt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var l=s[ft]||null;if(!l)throw Error(i(90));sl(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<n.length;t++)s=n[t],s.form===e.form&&mu(s)}break e;case"textarea":gu(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ra(e,!!n.multiple,t,!1)}}}var cl=!1;function Su(e,t,n){if(cl)return e(t,n);cl=!0;try{var s=e(t);return s}finally{if(cl=!1,(ja!==null||Ma!==null)&&(ur(),ja&&(t=ja,e=Ma,Ma=ja=null,xu(t),e)))for(t=0;t<e.length;t++)xu(e[t])}}function ms(e,t){var n=e.stateNode;if(n===null)return null;var s=n[ft]||null;if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(i(231,t,typeof n));return n}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ul=!1;if(Zt)try{var ps={};Object.defineProperty(ps,"passive",{get:function(){ul=!0}}),window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch{ul=!1}var hn=null,fl=null,Ri=null;function Cu(){if(Ri)return Ri;var e,t=fl,n=t.length,s,l="value"in hn?hn.value:hn.textContent,u=l.length;for(e=0;e<n&&t[e]===l[e];e++);var g=n-e;for(s=1;s<=g&&t[n-s]===l[u-s];s++);return Ri=l.slice(e,1<s?1-s:void 0)}function Ni(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ji(){return!0}function _u(){return!1}function dt(e){function t(n,s,l,u,g){this._reactName=n,this._targetInst=l,this.type=s,this.nativeEvent=u,this.target=g,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(n=e[b],this[b]=n?n(u):u[b]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?ji:_u,this.isPropagationStopped=_u,this}return v(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),t}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mi=dt(Qn),gs=v({},Qn,{view:0,detail:0}),Fp=dt(gs),dl,hl,ys,Di=v({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ys&&(ys&&e.type==="mousemove"?(dl=e.screenX-ys.screenX,hl=e.screenY-ys.screenY):hl=dl=0,ys=e),dl)},movementY:function(e){return"movementY"in e?e.movementY:hl}}),Tu=dt(Di),Ip=v({},Di,{dataTransfer:0}),Xp=dt(Ip),Kp=v({},gs,{relatedTarget:0}),ml=dt(Kp),Zp=v({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),Jp=dt(Zp),Wp=v({},Qn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eg=dt(Wp),tg=v({},Qn,{data:0}),Eu=dt(tg),ng={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ag={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ig(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sg[e])?!!t[e]:!1}function pl(){return ig}var rg=v({},gs,{key:function(e){if(e.key){var t=ng[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ni(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ag[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pl,charCode:function(e){return e.type==="keypress"?Ni(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ni(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lg=dt(rg),og=v({},Di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ru=dt(og),cg=v({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pl}),ug=dt(cg),fg=v({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),dg=dt(fg),hg=v({},Di,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mg=dt(hg),pg=v({},Qn,{newState:0,oldState:0}),gg=dt(pg),yg=[9,13,27,32],gl=Zt&&"CompositionEvent"in window,vs=null;Zt&&"documentMode"in document&&(vs=document.documentMode);var vg=Zt&&"TextEvent"in window&&!vs,Nu=Zt&&(!gl||vs&&8<vs&&11>=vs),ju=" ",Mu=!1;function Du(e,t){switch(e){case"keyup":return yg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Au(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Da=!1;function bg(e,t){switch(e){case"compositionend":return Au(t);case"keypress":return t.which!==32?null:(Mu=!0,ju);case"textInput":return e=t.data,e===ju&&Mu?null:e;default:return null}}function xg(e,t){if(Da)return e==="compositionend"||!gl&&Du(e,t)?(e=Cu(),Ri=fl=hn=null,Da=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nu&&t.locale!=="ko"?null:t.data;default:return null}}var Sg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Sg[e.type]:t==="textarea"}function ku(e,t,n,s){ja?Ma?Ma.push(s):Ma=[s]:ja=s,t=gr(t,"onChange"),0<t.length&&(n=new Mi("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var bs=null,xs=null;function Cg(e){mh(e,0)}function Ai(e){var t=hs(e);if(mu(t))return e}function Ou(e,t){if(e==="change")return t}var Uu=!1;if(Zt){var yl;if(Zt){var vl="oninput"in document;if(!vl){var zu=document.createElement("div");zu.setAttribute("oninput","return;"),vl=typeof zu.oninput=="function"}yl=vl}else yl=!1;Uu=yl&&(!document.documentMode||9<document.documentMode)}function Bu(){bs&&(bs.detachEvent("onpropertychange",Lu),xs=bs=null)}function Lu(e){if(e.propertyName==="value"&&Ai(xs)){var t=[];ku(t,xs,e,ol(e)),Su(Cg,t)}}function _g(e,t,n){e==="focusin"?(Bu(),bs=t,xs=n,bs.attachEvent("onpropertychange",Lu)):e==="focusout"&&Bu()}function Tg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ai(xs)}function Eg(e,t){if(e==="click")return Ai(t)}function Rg(e,t){if(e==="input"||e==="change")return Ai(t)}function Ng(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vt=typeof Object.is=="function"?Object.is:Ng;function Ss(e,t){if(vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var l=n[s];if(!os.call(t,l)||!vt(e[l],t[l]))return!1}return!0}function Hu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qu(e,t){var n=Hu(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hu(n)}}function $u(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$u(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ti(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ti(e.document)}return t}function bl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var jg=Zt&&"documentMode"in document&&11>=document.documentMode,Aa=null,xl=null,Cs=null,Sl=!1;function Yu(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Sl||Aa==null||Aa!==Ti(s)||(s=Aa,"selectionStart"in s&&bl(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Cs&&Ss(Cs,s)||(Cs=s,s=gr(xl,"onSelect"),0<s.length&&(t=new Mi("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Aa)))}function Fn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wa={animationend:Fn("Animation","AnimationEnd"),animationiteration:Fn("Animation","AnimationIteration"),animationstart:Fn("Animation","AnimationStart"),transitionrun:Fn("Transition","TransitionRun"),transitionstart:Fn("Transition","TransitionStart"),transitioncancel:Fn("Transition","TransitionCancel"),transitionend:Fn("Transition","TransitionEnd")},Cl={},Gu={};Zt&&(Gu=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function In(e){if(Cl[e])return Cl[e];if(!wa[e])return e;var t=wa[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Gu)return Cl[e]=t[n];return e}var Vu=In("animationend"),Qu=In("animationiteration"),Fu=In("animationstart"),Mg=In("transitionrun"),Dg=In("transitionstart"),Ag=In("transitioncancel"),Iu=In("transitionend"),Xu=new Map,_l="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_l.push("scrollEnd");function Ut(e,t){Xu.set(e,t),Vn(t,[e])}var Ku=new WeakMap;function jt(e,t){if(typeof e=="object"&&e!==null){var n=Ku.get(e);return n!==void 0?n:(t={value:e,source:t,stack:du(t)},Ku.set(e,t),t)}return{value:e,source:t,stack:du(t)}}var Mt=[],ka=0,Tl=0;function wi(){for(var e=ka,t=Tl=ka=0;t<e;){var n=Mt[t];Mt[t++]=null;var s=Mt[t];Mt[t++]=null;var l=Mt[t];Mt[t++]=null;var u=Mt[t];if(Mt[t++]=null,s!==null&&l!==null){var g=s.pending;g===null?l.next=l:(l.next=g.next,g.next=l),s.pending=l}u!==0&&Zu(n,l,u)}}function ki(e,t,n,s){Mt[ka++]=e,Mt[ka++]=t,Mt[ka++]=n,Mt[ka++]=s,Tl|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function El(e,t,n,s){return ki(e,t,n,s),Oi(e)}function Oa(e,t){return ki(e,null,null,t),Oi(e)}function Zu(e,t,n){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n);for(var l=!1,u=e.return;u!==null;)u.childLanes|=n,s=u.alternate,s!==null&&(s.childLanes|=n),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(l=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,l&&t!==null&&(l=31-ot(n),e=u.hiddenUpdates,s=e[l],s===null?e[l]=[t]:s.push(t),t.lane=n|536870912),u):null}function Oi(e){if(50<Fs)throw Fs=0,wo=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Ua={};function wg(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,n,s){return new wg(e,t,n,s)}function Rl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Jt(e,t){var n=e.alternate;return n===null?(n=bt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ju(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ui(e,t,n,s,l,u){var g=0;if(s=e,typeof e=="function")Rl(e)&&(g=1);else if(typeof e=="string")g=O0(e,n,ce.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case V:return e=bt(31,n,t,l),e.elementType=V,e.lanes=u,e;case R:return Xn(n.children,l,u,t);case A:g=8,l|=24;break;case C:return e=bt(12,n,t,l|2),e.elementType=C,e.lanes=u,e;case H:return e=bt(13,n,t,l),e.elementType=H,e.lanes=u,e;case Y:return e=bt(19,n,t,l),e.elementType=Y,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:case E:g=10;break e;case j:g=9;break e;case N:g=11;break e;case w:g=14;break e;case F:g=16,s=null;break e}g=29,n=Error(i(130,e===null?"null":typeof e,"")),s=null}return t=bt(g,n,t,l),t.elementType=e,t.type=s,t.lanes=u,t}function Xn(e,t,n,s){return e=bt(7,e,s,t),e.lanes=n,e}function Nl(e,t,n){return e=bt(6,e,null,t),e.lanes=n,e}function jl(e,t,n){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var za=[],Ba=0,zi=null,Bi=0,Dt=[],At=0,Kn=null,Wt=1,en="";function Zn(e,t){za[Ba++]=Bi,za[Ba++]=zi,zi=e,Bi=t}function Wu(e,t,n){Dt[At++]=Wt,Dt[At++]=en,Dt[At++]=Kn,Kn=e;var s=Wt;e=en;var l=32-ot(s)-1;s&=~(1<<l),n+=1;var u=32-ot(t)+l;if(30<u){var g=l-l%5;u=(s&(1<<g)-1).toString(32),s>>=g,l-=g,Wt=1<<32-ot(t)+l|n<<l|s,en=u+e}else Wt=1<<u|n<<l|s,en=e}function Ml(e){e.return!==null&&(Zn(e,1),Wu(e,1,0))}function Dl(e){for(;e===zi;)zi=za[--Ba],za[Ba]=null,Bi=za[--Ba],za[Ba]=null;for(;e===Kn;)Kn=Dt[--At],Dt[At]=null,en=Dt[--At],Dt[At]=null,Wt=Dt[--At],Dt[At]=null}var ct=null,ze=null,Ee=!1,Jn=null,qt=!1,Al=Error(i(519));function Wn(e){var t=Error(i(418,""));throw Es(jt(t,e)),Al}function ef(e){var t=e.stateNode,n=e.type,s=e.memoizedProps;switch(t[nt]=e,t[ft]=s,n){case"dialog":Ce("cancel",t),Ce("close",t);break;case"iframe":case"object":case"embed":Ce("load",t);break;case"video":case"audio":for(n=0;n<Xs.length;n++)Ce(Xs[n],t);break;case"source":Ce("error",t);break;case"img":case"image":case"link":Ce("error",t),Ce("load",t);break;case"details":Ce("toggle",t);break;case"input":Ce("invalid",t),pu(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),_i(t);break;case"select":Ce("invalid",t);break;case"textarea":Ce("invalid",t),yu(t,s.value,s.defaultValue,s.children),_i(t)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||s.suppressHydrationWarning===!0||vh(t.textContent,n)?(s.popover!=null&&(Ce("beforetoggle",t),Ce("toggle",t)),s.onScroll!=null&&Ce("scroll",t),s.onScrollEnd!=null&&Ce("scrollend",t),s.onClick!=null&&(t.onclick=yr),t=!0):t=!1,t||Wn(e)}function tf(e){for(ct=e.return;ct;)switch(ct.tag){case 5:case 13:qt=!1;return;case 27:case 3:qt=!0;return;default:ct=ct.return}}function _s(e){if(e!==ct)return!1;if(!Ee)return tf(e),Ee=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||Io(e.type,e.memoizedProps)),n=!n),n&&ze&&Wn(e),tf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){ze=Bt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}ze=null}}else t===27?(t=ze,Mn(e.type)?(e=Jo,Jo=null,ze=e):ze=t):ze=ct?Bt(e.stateNode.nextSibling):null;return!0}function Ts(){ze=ct=null,Ee=!1}function nf(){var e=Jn;return e!==null&&(pt===null?pt=e:pt.push.apply(pt,e),Jn=null),e}function Es(e){Jn===null?Jn=[e]:Jn.push(e)}var wl=z(null),ea=null,tn=null;function mn(e,t,n){ae(wl,t._currentValue),t._currentValue=n}function nn(e){e._currentValue=wl.current,J(wl)}function kl(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Ol(e,t,n,s){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var u=l.dependencies;if(u!==null){var g=l.child;u=u.firstContext;e:for(;u!==null;){var b=u;u=l;for(var T=0;T<t.length;T++)if(b.context===t[T]){u.lanes|=n,b=u.alternate,b!==null&&(b.lanes|=n),kl(u.return,n,e),s||(g=null);break e}u=b.next}}else if(l.tag===18){if(g=l.return,g===null)throw Error(i(341));g.lanes|=n,u=g.alternate,u!==null&&(u.lanes|=n),kl(g,n,e),g=null}else g=l.child;if(g!==null)g.return=l;else for(g=l;g!==null;){if(g===e){g=null;break}if(l=g.sibling,l!==null){l.return=g.return,g=l;break}g=g.return}l=g}}function Rs(e,t,n,s){e=null;for(var l=t,u=!1;l!==null;){if(!u){if((l.flags&524288)!==0)u=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var g=l.alternate;if(g===null)throw Error(i(387));if(g=g.memoizedProps,g!==null){var b=l.type;vt(l.pendingProps.value,g.value)||(e!==null?e.push(b):e=[b])}}else if(l===ke.current){if(g=l.alternate,g===null)throw Error(i(387));g.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(ti):e=[ti])}l=l.return}e!==null&&Ol(t,e,n,s),t.flags|=262144}function Li(e){for(e=e.firstContext;e!==null;){if(!vt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ta(e){ea=e,tn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function at(e){return af(ea,e)}function Hi(e,t){return ea===null&&ta(e),af(e,t)}function af(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},tn===null){if(e===null)throw Error(i(308));tn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else tn=tn.next=t;return n}var kg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},Og=c.unstable_scheduleCallback,Ug=c.unstable_NormalPriority,Ge={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ul(){return{controller:new kg,data:new Map,refCount:0}}function Ns(e){e.refCount--,e.refCount===0&&Og(Ug,function(){e.controller.abort()})}var js=null,zl=0,La=0,Ha=null;function zg(e,t){if(js===null){var n=js=[];zl=0,La=Ho(),Ha={status:"pending",value:void 0,then:function(s){n.push(s)}}}return zl++,t.then(sf,sf),t}function sf(){if(--zl===0&&js!==null){Ha!==null&&(Ha.status="fulfilled");var e=js;js=null,La=0,Ha=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Bg(e,t){var n=[],s={status:"pending",value:null,reason:null,then:function(l){n.push(l)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var l=0;l<n.length;l++)(0,n[l])(t)},function(l){for(s.status="rejected",s.reason=l,l=0;l<n.length;l++)(0,n[l])(void 0)}),s}var rf=$.S;$.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&zg(e,t),rf!==null&&rf(e,t)};var na=z(null);function Bl(){var e=na.current;return e!==null?e:we.pooledCache}function qi(e,t){t===null?ae(na,na.current):ae(na,t.pool)}function lf(){var e=Bl();return e===null?null:{parent:Ge._currentValue,pool:e}}var Ms=Error(i(460)),of=Error(i(474)),$i=Error(i(542)),Ll={then:function(){}};function cf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Pi(){}function uf(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(Pi,Pi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,df(e),e;default:if(typeof t.status=="string")t.then(Pi,Pi);else{if(e=we,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=s}},function(s){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,df(e),e}throw Ds=t,Ms}}var Ds=null;function ff(){if(Ds===null)throw Error(i(459));var e=Ds;return Ds=null,e}function df(e){if(e===Ms||e===$i)throw Error(i(483))}var pn=!1;function Hl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ql(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function gn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function yn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Re&2)!==0){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,t=Oi(e),Zu(e,null,n),t}return ki(e,s,t,n),Oi(e)}function As(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Xt(e,n)}}function $l(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var l=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var g={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};u===null?l=u=g:u=u.next=g,n=n.next}while(n!==null);u===null?l=u=t:u=u.next=t}else l=u=t;n={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:u,shared:s.shared,callbacks:s.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Pl=!1;function ws(){if(Pl){var e=Ha;if(e!==null)throw e}}function ks(e,t,n,s){Pl=!1;var l=e.updateQueue;pn=!1;var u=l.firstBaseUpdate,g=l.lastBaseUpdate,b=l.shared.pending;if(b!==null){l.shared.pending=null;var T=b,L=T.next;T.next=null,g===null?u=L:g.next=L,g=T;var G=e.alternate;G!==null&&(G=G.updateQueue,b=G.lastBaseUpdate,b!==g&&(b===null?G.firstBaseUpdate=L:b.next=L,G.lastBaseUpdate=T))}if(u!==null){var I=l.baseState;g=0,G=L=T=null,b=u;do{var q=b.lane&-536870913,P=q!==b.lane;if(P?(_e&q)===q:(s&q)===q){q!==0&&q===La&&(Pl=!0),G!==null&&(G=G.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var he=e,fe=b;q=t;var De=n;switch(fe.tag){case 1:if(he=fe.payload,typeof he=="function"){I=he.call(De,I,q);break e}I=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=fe.payload,q=typeof he=="function"?he.call(De,I,q):he,q==null)break e;I=v({},I,q);break e;case 2:pn=!0}}q=b.callback,q!==null&&(e.flags|=64,P&&(e.flags|=8192),P=l.callbacks,P===null?l.callbacks=[q]:P.push(q))}else P={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},G===null?(L=G=P,T=I):G=G.next=P,g|=q;if(b=b.next,b===null){if(b=l.shared.pending,b===null)break;P=b,b=P.next,P.next=null,l.lastBaseUpdate=P,l.shared.pending=null}}while(!0);G===null&&(T=I),l.baseState=T,l.firstBaseUpdate=L,l.lastBaseUpdate=G,u===null&&(l.shared.lanes=0),En|=g,e.lanes=g,e.memoizedState=I}}function hf(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function mf(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)hf(n[e],t)}var qa=z(null),Yi=z(0);function pf(e,t){e=un,ae(Yi,e),ae(qa,t),un=e|t.baseLanes}function Yl(){ae(Yi,un),ae(qa,qa.current)}function Gl(){un=Yi.current,J(qa),J(Yi)}var vn=0,ge=null,je=null,$e=null,Gi=!1,$a=!1,aa=!1,Vi=0,Os=0,Pa=null,Lg=0;function He(){throw Error(i(321))}function Vl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!vt(e[n],t[n]))return!1;return!0}function Ql(e,t,n,s,l,u){return vn=u,ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$.H=e===null||e.memoizedState===null?Jf:Wf,aa=!1,u=n(s,l),aa=!1,$a&&(u=yf(t,n,s,l)),gf(e),u}function gf(e){$.H=Zi;var t=je!==null&&je.next!==null;if(vn=0,$e=je=ge=null,Gi=!1,Os=0,Pa=null,t)throw Error(i(300));e===null||Xe||(e=e.dependencies,e!==null&&Li(e)&&(Xe=!0))}function yf(e,t,n,s){ge=e;var l=0;do{if($a&&(Pa=null),Os=0,$a=!1,25<=l)throw Error(i(301));if(l+=1,$e=je=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}$.H=Vg,u=t(n,s)}while($a);return u}function Hg(){var e=$.H,t=e.useState()[0];return t=typeof t.then=="function"?Us(t):t,e=e.useState()[0],(je!==null?je.memoizedState:null)!==e&&(ge.flags|=1024),t}function Fl(){var e=Vi!==0;return Vi=0,e}function Il(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Xl(e){if(Gi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Gi=!1}vn=0,$e=je=ge=null,$a=!1,Os=Vi=0,Pa=null}function ht(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?ge.memoizedState=$e=e:$e=$e.next=e,$e}function Pe(){if(je===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=je.next;var t=$e===null?ge.memoizedState:$e.next;if(t!==null)$e=t,je=e;else{if(e===null)throw ge.alternate===null?Error(i(467)):Error(i(310));je=e,e={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},$e===null?ge.memoizedState=$e=e:$e=$e.next=e}return $e}function Kl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Us(e){var t=Os;return Os+=1,Pa===null&&(Pa=[]),e=uf(Pa,e,t),t=ge,($e===null?t.memoizedState:$e.next)===null&&(t=t.alternate,$.H=t===null||t.memoizedState===null?Jf:Wf),e}function Qi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Us(e);if(e.$$typeof===E)return at(e)}throw Error(i(438,String(e)))}function Zl(e){var t=null,n=ge.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var s=ge.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=Kl(),ge.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),s=0;s<e;s++)n[s]=ne;return t.index++,n}function an(e,t){return typeof t=="function"?t(e):t}function Fi(e){var t=Pe();return Jl(t,je,e)}function Jl(e,t,n){var s=e.queue;if(s===null)throw Error(i(311));s.lastRenderedReducer=n;var l=e.baseQueue,u=s.pending;if(u!==null){if(l!==null){var g=l.next;l.next=u.next,u.next=g}t.baseQueue=l=u,s.pending=null}if(u=e.baseState,l===null)e.memoizedState=u;else{t=l.next;var b=g=null,T=null,L=t,G=!1;do{var I=L.lane&-536870913;if(I!==L.lane?(_e&I)===I:(vn&I)===I){var q=L.revertLane;if(q===0)T!==null&&(T=T.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),I===La&&(G=!0);else if((vn&q)===q){L=L.next,q===La&&(G=!0);continue}else I={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},T===null?(b=T=I,g=u):T=T.next=I,ge.lanes|=q,En|=q;I=L.action,aa&&n(u,I),u=L.hasEagerState?L.eagerState:n(u,I)}else q={lane:I,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},T===null?(b=T=q,g=u):T=T.next=q,ge.lanes|=I,En|=I;L=L.next}while(L!==null&&L!==t);if(T===null?g=u:T.next=b,!vt(u,e.memoizedState)&&(Xe=!0,G&&(n=Ha,n!==null)))throw n;e.memoizedState=u,e.baseState=g,e.baseQueue=T,s.lastRenderedState=u}return l===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Wl(e){var t=Pe(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var s=n.dispatch,l=n.pending,u=t.memoizedState;if(l!==null){n.pending=null;var g=l=l.next;do u=e(u,g.action),g=g.next;while(g!==l);vt(u,t.memoizedState)||(Xe=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,s]}function vf(e,t,n){var s=ge,l=Pe(),u=Ee;if(u){if(n===void 0)throw Error(i(407));n=n()}else n=t();var g=!vt((je||l).memoizedState,n);g&&(l.memoizedState=n,Xe=!0),l=l.queue;var b=Sf.bind(null,s,l,e);if(zs(2048,8,b,[e]),l.getSnapshot!==t||g||$e!==null&&$e.memoizedState.tag&1){if(s.flags|=2048,Ya(9,Ii(),xf.bind(null,s,l,n,t),null),we===null)throw Error(i(349));u||(vn&124)!==0||bf(s,t,n)}return n}function bf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ge.updateQueue,t===null?(t=Kl(),ge.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function xf(e,t,n,s){t.value=n,t.getSnapshot=s,Cf(t)&&_f(e)}function Sf(e,t,n){return n(function(){Cf(t)&&_f(e)})}function Cf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vt(e,n)}catch{return!0}}function _f(e){var t=Oa(e,2);t!==null&&Tt(t,e,2)}function eo(e){var t=ht();if(typeof e=="function"){var n=e;if(e=n(),aa){Lt(!0);try{n()}finally{Lt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:e},t}function Tf(e,t,n,s){return e.baseState=n,Jl(e,je,typeof s=="function"?s:an)}function qg(e,t,n,s,l){if(Ki(e))throw Error(i(485));if(e=t.action,e!==null){var u={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(g){u.listeners.push(g)}};$.T!==null?n(!0):u.isTransition=!1,s(u),n=t.pending,n===null?(u.next=t.pending=u,Ef(t,u)):(u.next=n.next,t.pending=n.next=u)}}function Ef(e,t){var n=t.action,s=t.payload,l=e.state;if(t.isTransition){var u=$.T,g={};$.T=g;try{var b=n(l,s),T=$.S;T!==null&&T(g,b),Rf(e,t,b)}catch(L){to(e,t,L)}finally{$.T=u}}else try{u=n(l,s),Rf(e,t,u)}catch(L){to(e,t,L)}}function Rf(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Nf(e,t,s)},function(s){return to(e,t,s)}):Nf(e,t,n)}function Nf(e,t,n){t.status="fulfilled",t.value=n,jf(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Ef(e,n)))}function to(e,t,n){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=n,jf(t),t=t.next;while(t!==s)}e.action=null}function jf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Mf(e,t){return t}function Df(e,t){if(Ee){var n=we.formState;if(n!==null){e:{var s=ge;if(Ee){if(ze){t:{for(var l=ze,u=qt;l.nodeType!==8;){if(!u){l=null;break t}if(l=Bt(l.nextSibling),l===null){l=null;break t}}u=l.data,l=u==="F!"||u==="F"?l:null}if(l){ze=Bt(l.nextSibling),s=l.data==="F!";break e}}Wn(s)}s=!1}s&&(t=n[0])}}return n=ht(),n.memoizedState=n.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mf,lastRenderedState:t},n.queue=s,n=Xf.bind(null,ge,s),s.dispatch=n,s=eo(!1),u=ro.bind(null,ge,!1,s.queue),s=ht(),l={state:t,dispatch:null,action:e,pending:null},s.queue=l,n=qg.bind(null,ge,l,u,n),l.dispatch=n,s.memoizedState=e,[t,n,!1]}function Af(e){var t=Pe();return wf(t,je,e)}function wf(e,t,n){if(t=Jl(e,t,Mf)[0],e=Fi(an)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Us(t)}catch(g){throw g===Ms?$i:g}else s=t;t=Pe();var l=t.queue,u=l.dispatch;return n!==t.memoizedState&&(ge.flags|=2048,Ya(9,Ii(),$g.bind(null,l,n),null)),[s,u,e]}function $g(e,t){e.action=t}function kf(e){var t=Pe(),n=je;if(n!==null)return wf(t,n,e);Pe(),t=t.memoizedState,n=Pe();var s=n.queue.dispatch;return n.memoizedState=e,[t,s,!1]}function Ya(e,t,n,s){return e={tag:e,create:n,deps:s,inst:t,next:null},t=ge.updateQueue,t===null&&(t=Kl(),ge.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Ii(){return{destroy:void 0,resource:void 0}}function Of(){return Pe().memoizedState}function Xi(e,t,n,s){var l=ht();s=s===void 0?null:s,ge.flags|=e,l.memoizedState=Ya(1|t,Ii(),n,s)}function zs(e,t,n,s){var l=Pe();s=s===void 0?null:s;var u=l.memoizedState.inst;je!==null&&s!==null&&Vl(s,je.memoizedState.deps)?l.memoizedState=Ya(t,u,n,s):(ge.flags|=e,l.memoizedState=Ya(1|t,u,n,s))}function Uf(e,t){Xi(8390656,8,e,t)}function zf(e,t){zs(2048,8,e,t)}function Bf(e,t){return zs(4,2,e,t)}function Lf(e,t){return zs(4,4,e,t)}function Hf(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qf(e,t,n){n=n!=null?n.concat([e]):null,zs(4,4,Hf.bind(null,t,e),n)}function no(){}function $f(e,t){var n=Pe();t=t===void 0?null:t;var s=n.memoizedState;return t!==null&&Vl(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Pf(e,t){var n=Pe();t=t===void 0?null:t;var s=n.memoizedState;if(t!==null&&Vl(t,s[1]))return s[0];if(s=e(),aa){Lt(!0);try{e()}finally{Lt(!1)}}return n.memoizedState=[s,t],s}function ao(e,t,n){return n===void 0||(vn&1073741824)!==0?e.memoizedState=t:(e.memoizedState=n,e=Vd(),ge.lanes|=e,En|=e,n)}function Yf(e,t,n,s){return vt(n,t)?n:qa.current!==null?(e=ao(e,n,s),vt(e,t)||(Xe=!0),e):(vn&42)===0?(Xe=!0,e.memoizedState=n):(e=Vd(),ge.lanes|=e,En|=e,t)}function Gf(e,t,n,s,l){var u=K.p;K.p=u!==0&&8>u?u:8;var g=$.T,b={};$.T=b,ro(e,!1,t,n);try{var T=l(),L=$.S;if(L!==null&&L(b,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var G=Bg(T,s);Bs(e,t,G,_t(e))}else Bs(e,t,s,_t(e))}catch(I){Bs(e,t,{then:function(){},status:"rejected",reason:I},_t())}finally{K.p=u,$.T=g}}function Pg(){}function so(e,t,n,s){if(e.tag!==5)throw Error(i(476));var l=Vf(e).queue;Gf(e,l,t,ee,n===null?Pg:function(){return Qf(e),n(s)})}function Vf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:ee},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Qf(e){var t=Vf(e).next.queue;Bs(e,t,{},_t())}function io(){return at(ti)}function Ff(){return Pe().memoizedState}function If(){return Pe().memoizedState}function Yg(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=_t();e=gn(n);var s=yn(t,e,n);s!==null&&(Tt(s,t,n),As(s,t,n)),t={cache:Ul()},e.payload=t;return}t=t.return}}function Gg(e,t,n){var s=_t();n={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ki(e)?Kf(t,n):(n=El(e,t,n,s),n!==null&&(Tt(n,e,s),Zf(n,t,s)))}function Xf(e,t,n){var s=_t();Bs(e,t,n,s)}function Bs(e,t,n,s){var l={lane:s,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ki(e))Kf(t,l);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var g=t.lastRenderedState,b=u(g,n);if(l.hasEagerState=!0,l.eagerState=b,vt(b,g))return ki(e,t,l,0),we===null&&wi(),!1}catch{}finally{}if(n=El(e,t,l,s),n!==null)return Tt(n,e,s),Zf(n,t,s),!0}return!1}function ro(e,t,n,s){if(s={lane:2,revertLane:Ho(),action:s,hasEagerState:!1,eagerState:null,next:null},Ki(e)){if(t)throw Error(i(479))}else t=El(e,n,s,2),t!==null&&Tt(t,e,2)}function Ki(e){var t=e.alternate;return e===ge||t!==null&&t===ge}function Kf(e,t){$a=Gi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zf(e,t,n){if((n&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Xt(e,n)}}var Zi={readContext:at,use:Qi,useCallback:He,useContext:He,useEffect:He,useImperativeHandle:He,useLayoutEffect:He,useInsertionEffect:He,useMemo:He,useReducer:He,useRef:He,useState:He,useDebugValue:He,useDeferredValue:He,useTransition:He,useSyncExternalStore:He,useId:He,useHostTransitionStatus:He,useFormState:He,useActionState:He,useOptimistic:He,useMemoCache:He,useCacheRefresh:He},Jf={readContext:at,use:Qi,useCallback:function(e,t){return ht().memoizedState=[e,t===void 0?null:t],e},useContext:at,useEffect:Uf,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Xi(4194308,4,Hf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xi(4194308,4,e,t)},useInsertionEffect:function(e,t){Xi(4,2,e,t)},useMemo:function(e,t){var n=ht();t=t===void 0?null:t;var s=e();if(aa){Lt(!0);try{e()}finally{Lt(!1)}}return n.memoizedState=[s,t],s},useReducer:function(e,t,n){var s=ht();if(n!==void 0){var l=n(t);if(aa){Lt(!0);try{n(t)}finally{Lt(!1)}}}else l=t;return s.memoizedState=s.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},s.queue=e,e=e.dispatch=Gg.bind(null,ge,e),[s.memoizedState,e]},useRef:function(e){var t=ht();return e={current:e},t.memoizedState=e},useState:function(e){e=eo(e);var t=e.queue,n=Xf.bind(null,ge,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:no,useDeferredValue:function(e,t){var n=ht();return ao(n,e,t)},useTransition:function(){var e=eo(!1);return e=Gf.bind(null,ge,e.queue,!0,!1),ht().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var s=ge,l=ht();if(Ee){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),we===null)throw Error(i(349));(_e&124)!==0||bf(s,t,n)}l.memoizedState=n;var u={value:n,getSnapshot:t};return l.queue=u,Uf(Sf.bind(null,s,u,e),[e]),s.flags|=2048,Ya(9,Ii(),xf.bind(null,s,u,n,t),null),n},useId:function(){var e=ht(),t=we.identifierPrefix;if(Ee){var n=en,s=Wt;n=(s&~(1<<32-ot(s)-1)).toString(32)+n,t=""+t+"R"+n,n=Vi++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=Lg++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:io,useFormState:Df,useActionState:Df,useOptimistic:function(e){var t=ht();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ro.bind(null,ge,!0,n),n.dispatch=t,[e,t]},useMemoCache:Zl,useCacheRefresh:function(){return ht().memoizedState=Yg.bind(null,ge)}},Wf={readContext:at,use:Qi,useCallback:$f,useContext:at,useEffect:zf,useImperativeHandle:qf,useInsertionEffect:Bf,useLayoutEffect:Lf,useMemo:Pf,useReducer:Fi,useRef:Of,useState:function(){return Fi(an)},useDebugValue:no,useDeferredValue:function(e,t){var n=Pe();return Yf(n,je.memoizedState,e,t)},useTransition:function(){var e=Fi(an)[0],t=Pe().memoizedState;return[typeof e=="boolean"?e:Us(e),t]},useSyncExternalStore:vf,useId:Ff,useHostTransitionStatus:io,useFormState:Af,useActionState:Af,useOptimistic:function(e,t){var n=Pe();return Tf(n,je,e,t)},useMemoCache:Zl,useCacheRefresh:If},Vg={readContext:at,use:Qi,useCallback:$f,useContext:at,useEffect:zf,useImperativeHandle:qf,useInsertionEffect:Bf,useLayoutEffect:Lf,useMemo:Pf,useReducer:Wl,useRef:Of,useState:function(){return Wl(an)},useDebugValue:no,useDeferredValue:function(e,t){var n=Pe();return je===null?ao(n,e,t):Yf(n,je.memoizedState,e,t)},useTransition:function(){var e=Wl(an)[0],t=Pe().memoizedState;return[typeof e=="boolean"?e:Us(e),t]},useSyncExternalStore:vf,useId:Ff,useHostTransitionStatus:io,useFormState:kf,useActionState:kf,useOptimistic:function(e,t){var n=Pe();return je!==null?Tf(n,je,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Zl,useCacheRefresh:If},Ga=null,Ls=0;function Ji(e){var t=Ls;return Ls+=1,Ga===null&&(Ga=[]),uf(Ga,e,t)}function Hs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Wi(e,t){throw t.$$typeof===x?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ed(e){var t=e._init;return t(e._payload)}function td(e){function t(k,D){if(e){var B=k.deletions;B===null?(k.deletions=[D],k.flags|=16):B.push(D)}}function n(k,D){if(!e)return null;for(;D!==null;)t(k,D),D=D.sibling;return null}function s(k){for(var D=new Map;k!==null;)k.key!==null?D.set(k.key,k):D.set(k.index,k),k=k.sibling;return D}function l(k,D){return k=Jt(k,D),k.index=0,k.sibling=null,k}function u(k,D,B){return k.index=B,e?(B=k.alternate,B!==null?(B=B.index,B<D?(k.flags|=67108866,D):B):(k.flags|=67108866,D)):(k.flags|=1048576,D)}function g(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function b(k,D,B,Q){return D===null||D.tag!==6?(D=Nl(B,k.mode,Q),D.return=k,D):(D=l(D,B),D.return=k,D)}function T(k,D,B,Q){var ie=B.type;return ie===R?G(k,D,B.props.children,Q,B.key):D!==null&&(D.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===F&&ed(ie)===D.type)?(D=l(D,B.props),Hs(D,B),D.return=k,D):(D=Ui(B.type,B.key,B.props,null,k.mode,Q),Hs(D,B),D.return=k,D)}function L(k,D,B,Q){return D===null||D.tag!==4||D.stateNode.containerInfo!==B.containerInfo||D.stateNode.implementation!==B.implementation?(D=jl(B,k.mode,Q),D.return=k,D):(D=l(D,B.children||[]),D.return=k,D)}function G(k,D,B,Q,ie){return D===null||D.tag!==7?(D=Xn(B,k.mode,Q,ie),D.return=k,D):(D=l(D,B),D.return=k,D)}function I(k,D,B){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Nl(""+D,k.mode,B),D.return=k,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case _:return B=Ui(D.type,D.key,D.props,null,k.mode,B),Hs(B,D),B.return=k,B;case M:return D=jl(D,k.mode,B),D.return=k,D;case F:var Q=D._init;return D=Q(D._payload),I(k,D,B)}if(le(D)||te(D))return D=Xn(D,k.mode,B,null),D.return=k,D;if(typeof D.then=="function")return I(k,Ji(D),B);if(D.$$typeof===E)return I(k,Hi(k,D),B);Wi(k,D)}return null}function q(k,D,B,Q){var ie=D!==null?D.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return ie!==null?null:b(k,D,""+B,Q);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case _:return B.key===ie?T(k,D,B,Q):null;case M:return B.key===ie?L(k,D,B,Q):null;case F:return ie=B._init,B=ie(B._payload),q(k,D,B,Q)}if(le(B)||te(B))return ie!==null?null:G(k,D,B,Q,null);if(typeof B.then=="function")return q(k,D,Ji(B),Q);if(B.$$typeof===E)return q(k,D,Hi(k,B),Q);Wi(k,B)}return null}function P(k,D,B,Q,ie){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return k=k.get(B)||null,b(D,k,""+Q,ie);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case _:return k=k.get(Q.key===null?B:Q.key)||null,T(D,k,Q,ie);case M:return k=k.get(Q.key===null?B:Q.key)||null,L(D,k,Q,ie);case F:var ve=Q._init;return Q=ve(Q._payload),P(k,D,B,Q,ie)}if(le(Q)||te(Q))return k=k.get(B)||null,G(D,k,Q,ie,null);if(typeof Q.then=="function")return P(k,D,B,Ji(Q),ie);if(Q.$$typeof===E)return P(k,D,B,Hi(D,Q),ie);Wi(D,Q)}return null}function he(k,D,B,Q){for(var ie=null,ve=null,oe=D,de=D=0,Ze=null;oe!==null&&de<B.length;de++){oe.index>de?(Ze=oe,oe=null):Ze=oe.sibling;var Te=q(k,oe,B[de],Q);if(Te===null){oe===null&&(oe=Ze);break}e&&oe&&Te.alternate===null&&t(k,oe),D=u(Te,D,de),ve===null?ie=Te:ve.sibling=Te,ve=Te,oe=Ze}if(de===B.length)return n(k,oe),Ee&&Zn(k,de),ie;if(oe===null){for(;de<B.length;de++)oe=I(k,B[de],Q),oe!==null&&(D=u(oe,D,de),ve===null?ie=oe:ve.sibling=oe,ve=oe);return Ee&&Zn(k,de),ie}for(oe=s(oe);de<B.length;de++)Ze=P(oe,k,de,B[de],Q),Ze!==null&&(e&&Ze.alternate!==null&&oe.delete(Ze.key===null?de:Ze.key),D=u(Ze,D,de),ve===null?ie=Ze:ve.sibling=Ze,ve=Ze);return e&&oe.forEach(function(On){return t(k,On)}),Ee&&Zn(k,de),ie}function fe(k,D,B,Q){if(B==null)throw Error(i(151));for(var ie=null,ve=null,oe=D,de=D=0,Ze=null,Te=B.next();oe!==null&&!Te.done;de++,Te=B.next()){oe.index>de?(Ze=oe,oe=null):Ze=oe.sibling;var On=q(k,oe,Te.value,Q);if(On===null){oe===null&&(oe=Ze);break}e&&oe&&On.alternate===null&&t(k,oe),D=u(On,D,de),ve===null?ie=On:ve.sibling=On,ve=On,oe=Ze}if(Te.done)return n(k,oe),Ee&&Zn(k,de),ie;if(oe===null){for(;!Te.done;de++,Te=B.next())Te=I(k,Te.value,Q),Te!==null&&(D=u(Te,D,de),ve===null?ie=Te:ve.sibling=Te,ve=Te);return Ee&&Zn(k,de),ie}for(oe=s(oe);!Te.done;de++,Te=B.next())Te=P(oe,k,de,Te.value,Q),Te!==null&&(e&&Te.alternate!==null&&oe.delete(Te.key===null?de:Te.key),D=u(Te,D,de),ve===null?ie=Te:ve.sibling=Te,ve=Te);return e&&oe.forEach(function(Q0){return t(k,Q0)}),Ee&&Zn(k,de),ie}function De(k,D,B,Q){if(typeof B=="object"&&B!==null&&B.type===R&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case _:e:{for(var ie=B.key;D!==null;){if(D.key===ie){if(ie=B.type,ie===R){if(D.tag===7){n(k,D.sibling),Q=l(D,B.props.children),Q.return=k,k=Q;break e}}else if(D.elementType===ie||typeof ie=="object"&&ie!==null&&ie.$$typeof===F&&ed(ie)===D.type){n(k,D.sibling),Q=l(D,B.props),Hs(Q,B),Q.return=k,k=Q;break e}n(k,D);break}else t(k,D);D=D.sibling}B.type===R?(Q=Xn(B.props.children,k.mode,Q,B.key),Q.return=k,k=Q):(Q=Ui(B.type,B.key,B.props,null,k.mode,Q),Hs(Q,B),Q.return=k,k=Q)}return g(k);case M:e:{for(ie=B.key;D!==null;){if(D.key===ie)if(D.tag===4&&D.stateNode.containerInfo===B.containerInfo&&D.stateNode.implementation===B.implementation){n(k,D.sibling),Q=l(D,B.children||[]),Q.return=k,k=Q;break e}else{n(k,D);break}else t(k,D);D=D.sibling}Q=jl(B,k.mode,Q),Q.return=k,k=Q}return g(k);case F:return ie=B._init,B=ie(B._payload),De(k,D,B,Q)}if(le(B))return he(k,D,B,Q);if(te(B)){if(ie=te(B),typeof ie!="function")throw Error(i(150));return B=ie.call(B),fe(k,D,B,Q)}if(typeof B.then=="function")return De(k,D,Ji(B),Q);if(B.$$typeof===E)return De(k,D,Hi(k,B),Q);Wi(k,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,D!==null&&D.tag===6?(n(k,D.sibling),Q=l(D,B),Q.return=k,k=Q):(n(k,D),Q=Nl(B,k.mode,Q),Q.return=k,k=Q),g(k)):n(k,D)}return function(k,D,B,Q){try{Ls=0;var ie=De(k,D,B,Q);return Ga=null,ie}catch(oe){if(oe===Ms||oe===$i)throw oe;var ve=bt(29,oe,null,k.mode);return ve.lanes=Q,ve.return=k,ve}finally{}}}var Va=td(!0),nd=td(!1),wt=z(null),$t=null;function bn(e){var t=e.alternate;ae(Ve,Ve.current&1),ae(wt,e),$t===null&&(t===null||qa.current!==null||t.memoizedState!==null)&&($t=e)}function ad(e){if(e.tag===22){if(ae(Ve,Ve.current),ae(wt,e),$t===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&($t=e)}}else xn()}function xn(){ae(Ve,Ve.current),ae(wt,wt.current)}function sn(e){J(wt),$t===e&&($t=null),J(Ve)}var Ve=z(0);function er(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||Zo(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function lo(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:v({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var oo={enqueueSetState:function(e,t,n){e=e._reactInternals;var s=_t(),l=gn(s);l.payload=t,n!=null&&(l.callback=n),t=yn(e,l,s),t!==null&&(Tt(t,e,s),As(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=_t(),l=gn(s);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=yn(e,l,s),t!==null&&(Tt(t,e,s),As(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_t(),s=gn(n);s.tag=2,t!=null&&(s.callback=t),t=yn(e,s,n),t!==null&&(Tt(t,e,n),As(t,e,n))}};function sd(e,t,n,s,l,u,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,u,g):t.prototype&&t.prototype.isPureReactComponent?!Ss(n,s)||!Ss(l,u):!0}function id(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&oo.enqueueReplaceState(t,t.state,null)}function sa(e,t){var n=t;if("ref"in t){n={};for(var s in t)s!=="ref"&&(n[s]=t[s])}if(e=e.defaultProps){n===t&&(n=v({},n));for(var l in e)n[l]===void 0&&(n[l]=e[l])}return n}var tr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function rd(e){tr(e)}function ld(e){console.error(e)}function od(e){tr(e)}function nr(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function cd(e,t,n){try{var s=e.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function co(e,t,n){return n=gn(n),n.tag=3,n.payload={element:null},n.callback=function(){nr(e,t)},n}function ud(e){return e=gn(e),e.tag=3,e}function fd(e,t,n,s){var l=n.type.getDerivedStateFromError;if(typeof l=="function"){var u=s.value;e.payload=function(){return l(u)},e.callback=function(){cd(t,n,s)}}var g=n.stateNode;g!==null&&typeof g.componentDidCatch=="function"&&(e.callback=function(){cd(t,n,s),typeof l!="function"&&(Rn===null?Rn=new Set([this]):Rn.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})})}function Qg(e,t,n,s,l){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=n.alternate,t!==null&&Rs(t,n,l,!0),n=wt.current,n!==null){switch(n.tag){case 13:return $t===null?Oo():n.alternate===null&&Be===0&&(Be=3),n.flags&=-257,n.flags|=65536,n.lanes=l,s===Ll?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([s]):t.add(s),zo(e,s,l)),!1;case 22:return n.flags|=65536,s===Ll?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([s]):n.add(s)),zo(e,s,l)),!1}throw Error(i(435,n.tag))}return zo(e,s,l),Oo(),!1}if(Ee)return t=wt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,s!==Al&&(e=Error(i(422),{cause:s}),Es(jt(e,n)))):(s!==Al&&(t=Error(i(423),{cause:s}),Es(jt(t,n))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,s=jt(s,n),l=co(e.stateNode,s,l),$l(e,l),Be!==4&&(Be=2)),!1;var u=Error(i(520),{cause:s});if(u=jt(u,n),Qs===null?Qs=[u]:Qs.push(u),Be!==4&&(Be=2),t===null)return!0;s=jt(s,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=l&-l,n.lanes|=e,e=co(n.stateNode,s,e),$l(n,e),!1;case 1:if(t=n.type,u=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Rn===null||!Rn.has(u))))return n.flags|=65536,l&=-l,n.lanes|=l,l=ud(l),fd(l,e,n,s),$l(n,l),!1}n=n.return}while(n!==null);return!1}var dd=Error(i(461)),Xe=!1;function We(e,t,n,s){t.child=e===null?nd(t,null,n,s):Va(t,e.child,n,s)}function hd(e,t,n,s,l){n=n.render;var u=t.ref;if("ref"in s){var g={};for(var b in s)b!=="ref"&&(g[b]=s[b])}else g=s;return ta(t),s=Ql(e,t,n,g,u,l),b=Fl(),e!==null&&!Xe?(Il(e,t,l),rn(e,t,l)):(Ee&&b&&Ml(t),t.flags|=1,We(e,t,s,l),t.child)}function md(e,t,n,s,l){if(e===null){var u=n.type;return typeof u=="function"&&!Rl(u)&&u.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=u,pd(e,t,u,s,l)):(e=Ui(n.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!vo(e,l)){var g=u.memoizedProps;if(n=n.compare,n=n!==null?n:Ss,n(g,s)&&e.ref===t.ref)return rn(e,t,l)}return t.flags|=1,e=Jt(u,s),e.ref=t.ref,e.return=t,t.child=e}function pd(e,t,n,s,l){if(e!==null){var u=e.memoizedProps;if(Ss(u,s)&&e.ref===t.ref)if(Xe=!1,t.pendingProps=s=u,vo(e,l))(e.flags&131072)!==0&&(Xe=!0);else return t.lanes=e.lanes,rn(e,t,l)}return uo(e,t,n,s,l)}function gd(e,t,n){var s=t.pendingProps,l=s.children,u=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if((t.flags&128)!==0){if(s=u!==null?u.baseLanes|n:n,e!==null){for(l=t.child=e.child,u=0;l!==null;)u=u|l.lanes|l.childLanes,l=l.sibling;t.childLanes=u&~s}else t.childLanes=0,t.child=null;return yd(e,t,s,n)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&qi(t,u!==null?u.cachePool:null),u!==null?pf(t,u):Yl(),ad(t);else return t.lanes=t.childLanes=536870912,yd(e,t,u!==null?u.baseLanes|n:n,n)}else u!==null?(qi(t,u.cachePool),pf(t,u),xn(),t.memoizedState=null):(e!==null&&qi(t,null),Yl(),xn());return We(e,t,l,n),t.child}function yd(e,t,n,s){var l=Bl();return l=l===null?null:{parent:Ge._currentValue,pool:l},t.memoizedState={baseLanes:n,cachePool:l},e!==null&&qi(t,null),Yl(),ad(t),e!==null&&Rs(e,t,s,!0),null}function ar(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(i(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function uo(e,t,n,s,l){return ta(t),n=Ql(e,t,n,s,void 0,l),s=Fl(),e!==null&&!Xe?(Il(e,t,l),rn(e,t,l)):(Ee&&s&&Ml(t),t.flags|=1,We(e,t,n,l),t.child)}function vd(e,t,n,s,l,u){return ta(t),t.updateQueue=null,n=yf(t,s,n,l),gf(e),s=Fl(),e!==null&&!Xe?(Il(e,t,u),rn(e,t,u)):(Ee&&s&&Ml(t),t.flags|=1,We(e,t,n,u),t.child)}function bd(e,t,n,s,l){if(ta(t),t.stateNode===null){var u=Ua,g=n.contextType;typeof g=="object"&&g!==null&&(u=at(g)),u=new n(s,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=oo,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=s,u.state=t.memoizedState,u.refs={},Hl(t),g=n.contextType,u.context=typeof g=="object"&&g!==null?at(g):Ua,u.state=t.memoizedState,g=n.getDerivedStateFromProps,typeof g=="function"&&(lo(t,n,g,s),u.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(g=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),g!==u.state&&oo.enqueueReplaceState(u,u.state,null),ks(t,s,u,l),ws(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){u=t.stateNode;var b=t.memoizedProps,T=sa(n,b);u.props=T;var L=u.context,G=n.contextType;g=Ua,typeof G=="object"&&G!==null&&(g=at(G));var I=n.getDerivedStateFromProps;G=typeof I=="function"||typeof u.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,G||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(b||L!==g)&&id(t,u,s,g),pn=!1;var q=t.memoizedState;u.state=q,ks(t,s,u,l),ws(),L=t.memoizedState,b||q!==L||pn?(typeof I=="function"&&(lo(t,n,I,s),L=t.memoizedState),(T=pn||sd(t,n,T,s,q,L,g))?(G||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=L),u.props=s,u.state=L,u.context=g,s=T):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{u=t.stateNode,ql(e,t),g=t.memoizedProps,G=sa(n,g),u.props=G,I=t.pendingProps,q=u.context,L=n.contextType,T=Ua,typeof L=="object"&&L!==null&&(T=at(L)),b=n.getDerivedStateFromProps,(L=typeof b=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==I||q!==T)&&id(t,u,s,T),pn=!1,q=t.memoizedState,u.state=q,ks(t,s,u,l),ws();var P=t.memoizedState;g!==I||q!==P||pn||e!==null&&e.dependencies!==null&&Li(e.dependencies)?(typeof b=="function"&&(lo(t,n,b,s),P=t.memoizedState),(G=pn||sd(t,n,G,s,q,P,T)||e!==null&&e.dependencies!==null&&Li(e.dependencies))?(L||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(s,P,T),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(s,P,T)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=P),u.props=s,u.state=P,u.context=T,s=G):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),s=!1)}return u=s,ar(e,t),s=(t.flags&128)!==0,u||s?(u=t.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&s?(t.child=Va(t,e.child,null,l),t.child=Va(t,null,n,l)):We(e,t,n,l),t.memoizedState=u.state,e=t.child):e=rn(e,t,l),e}function xd(e,t,n,s){return Ts(),t.flags|=256,We(e,t,n,s),t.child}var fo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ho(e){return{baseLanes:e,cachePool:lf()}}function mo(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=kt),e}function Sd(e,t,n){var s=t.pendingProps,l=!1,u=(t.flags&128)!==0,g;if((g=u)||(g=e!==null&&e.memoizedState===null?!1:(Ve.current&2)!==0),g&&(l=!0,t.flags&=-129),g=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ee){if(l?bn(t):xn(),Ee){var b=ze,T;if(T=b){e:{for(T=b,b=qt;T.nodeType!==8;){if(!b){b=null;break e}if(T=Bt(T.nextSibling),T===null){b=null;break e}}b=T}b!==null?(t.memoizedState={dehydrated:b,treeContext:Kn!==null?{id:Wt,overflow:en}:null,retryLane:536870912,hydrationErrors:null},T=bt(18,null,null,0),T.stateNode=b,T.return=t,t.child=T,ct=t,ze=null,T=!0):T=!1}T||Wn(t)}if(b=t.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Zo(b)?t.lanes=32:t.lanes=536870912,null;sn(t)}return b=s.children,s=s.fallback,l?(xn(),l=t.mode,b=sr({mode:"hidden",children:b},l),s=Xn(s,l,n,null),b.return=t,s.return=t,b.sibling=s,t.child=b,l=t.child,l.memoizedState=ho(n),l.childLanes=mo(e,g,n),t.memoizedState=fo,s):(bn(t),po(t,b))}if(T=e.memoizedState,T!==null&&(b=T.dehydrated,b!==null)){if(u)t.flags&256?(bn(t),t.flags&=-257,t=go(e,t,n)):t.memoizedState!==null?(xn(),t.child=e.child,t.flags|=128,t=null):(xn(),l=s.fallback,b=t.mode,s=sr({mode:"visible",children:s.children},b),l=Xn(l,b,n,null),l.flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,Va(t,e.child,null,n),s=t.child,s.memoizedState=ho(n),s.childLanes=mo(e,g,n),t.memoizedState=fo,t=l);else if(bn(t),Zo(b)){if(g=b.nextSibling&&b.nextSibling.dataset,g)var L=g.dgst;g=L,s=Error(i(419)),s.stack="",s.digest=g,Es({value:s,source:null,stack:null}),t=go(e,t,n)}else if(Xe||Rs(e,t,n,!1),g=(n&e.childLanes)!==0,Xe||g){if(g=we,g!==null&&(s=n&-n,s=(s&42)!==0?1:fs(s),s=(s&(g.suspendedLanes|n))!==0?0:s,s!==0&&s!==T.retryLane))throw T.retryLane=s,Oa(e,s),Tt(g,e,s),dd;b.data==="$?"||Oo(),t=go(e,t,n)}else b.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=T.treeContext,ze=Bt(b.nextSibling),ct=t,Ee=!0,Jn=null,qt=!1,e!==null&&(Dt[At++]=Wt,Dt[At++]=en,Dt[At++]=Kn,Wt=e.id,en=e.overflow,Kn=t),t=po(t,s.children),t.flags|=4096);return t}return l?(xn(),l=s.fallback,b=t.mode,T=e.child,L=T.sibling,s=Jt(T,{mode:"hidden",children:s.children}),s.subtreeFlags=T.subtreeFlags&65011712,L!==null?l=Jt(L,l):(l=Xn(l,b,n,null),l.flags|=2),l.return=t,s.return=t,s.sibling=l,t.child=s,s=l,l=t.child,b=e.child.memoizedState,b===null?b=ho(n):(T=b.cachePool,T!==null?(L=Ge._currentValue,T=T.parent!==L?{parent:L,pool:L}:T):T=lf(),b={baseLanes:b.baseLanes|n,cachePool:T}),l.memoizedState=b,l.childLanes=mo(e,g,n),t.memoizedState=fo,s):(bn(t),n=e.child,e=n.sibling,n=Jt(n,{mode:"visible",children:s.children}),n.return=t,n.sibling=null,e!==null&&(g=t.deletions,g===null?(t.deletions=[e],t.flags|=16):g.push(e)),t.child=n,t.memoizedState=null,n)}function po(e,t){return t=sr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function sr(e,t){return e=bt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function go(e,t,n){return Va(t,e.child,null,n),e=po(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cd(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),kl(e.return,t,n)}function yo(e,t,n,s,l){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:l}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=s,u.tail=n,u.tailMode=l)}function _d(e,t,n){var s=t.pendingProps,l=s.revealOrder,u=s.tail;if(We(e,t,s.children,n),s=Ve.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cd(e,n,t);else if(e.tag===19)Cd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(ae(Ve,s),l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&er(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),yo(t,!1,l,n,u);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&er(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}yo(t,!0,n,null,u);break;case"together":yo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),En|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Rs(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=Jt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Jt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function vo(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Li(e)))}function Fg(e,t,n){switch(t.tag){case 3:xe(t,t.stateNode.containerInfo),mn(t,Ge,e.memoizedState.cache),Ts();break;case 27:case 5:Ft(t);break;case 4:xe(t,t.stateNode.containerInfo);break;case 10:mn(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(bn(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Sd(e,t,n):(bn(t),e=rn(e,t,n),e!==null?e.sibling:null);bn(t);break;case 19:var l=(e.flags&128)!==0;if(s=(n&t.childLanes)!==0,s||(Rs(e,t,n,!1),s=(n&t.childLanes)!==0),l){if(s)return _d(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),ae(Ve,Ve.current),s)break;return null;case 22:case 23:return t.lanes=0,gd(e,t,n);case 24:mn(t,Ge,e.memoizedState.cache)}return rn(e,t,n)}function Td(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Xe=!0;else{if(!vo(e,n)&&(t.flags&128)===0)return Xe=!1,Fg(e,t,n);Xe=(e.flags&131072)!==0}else Xe=!1,Ee&&(t.flags&1048576)!==0&&Wu(t,Bi,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,l=s._init;if(s=l(s._payload),t.type=s,typeof s=="function")Rl(s)?(e=sa(s,e),t.tag=1,t=bd(null,t,s,e,n)):(t.tag=0,t=uo(null,t,s,e,n));else{if(s!=null){if(l=s.$$typeof,l===N){t.tag=11,t=hd(null,t,s,e,n);break e}else if(l===w){t.tag=14,t=md(null,t,s,e,n);break e}}throw t=X(s)||s,Error(i(306,t,""))}}return t;case 0:return uo(e,t,t.type,t.pendingProps,n);case 1:return s=t.type,l=sa(s,t.pendingProps),bd(e,t,s,l,n);case 3:e:{if(xe(t,t.stateNode.containerInfo),e===null)throw Error(i(387));s=t.pendingProps;var u=t.memoizedState;l=u.element,ql(e,t),ks(t,s,null,n);var g=t.memoizedState;if(s=g.cache,mn(t,Ge,s),s!==u.cache&&Ol(t,[Ge],n,!0),ws(),s=g.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:g.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=xd(e,t,s,n);break e}else if(s!==l){l=jt(Error(i(424)),t),Es(l),t=xd(e,t,s,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ze=Bt(e.firstChild),ct=t,Ee=!0,Jn=null,qt=!0,n=nd(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ts(),s===l){t=rn(e,t,n);break e}We(e,t,s,n)}t=t.child}return t;case 26:return ar(e,t),e===null?(n=jh(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ee||(n=t.type,e=t.pendingProps,s=vr(ue.current).createElement(n),s[nt]=t,s[ft]=e,tt(s,n,e),Ie(s),t.stateNode=s):t.memoizedState=jh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ft(t),e===null&&Ee&&(s=t.stateNode=Eh(t.type,t.pendingProps,ue.current),ct=t,qt=!0,l=ze,Mn(t.type)?(Jo=l,ze=Bt(s.firstChild)):ze=l),We(e,t,t.pendingProps.children,n),ar(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ee&&((l=s=ze)&&(s=S0(s,t.type,t.pendingProps,qt),s!==null?(t.stateNode=s,ct=t,ze=Bt(s.firstChild),qt=!1,l=!0):l=!1),l||Wn(t)),Ft(t),l=t.type,u=t.pendingProps,g=e!==null?e.memoizedProps:null,s=u.children,Io(l,u)?s=null:g!==null&&Io(l,g)&&(t.flags|=32),t.memoizedState!==null&&(l=Ql(e,t,Hg,null,null,n),ti._currentValue=l),ar(e,t),We(e,t,s,n),t.child;case 6:return e===null&&Ee&&((e=n=ze)&&(n=C0(n,t.pendingProps,qt),n!==null?(t.stateNode=n,ct=t,ze=null,e=!0):e=!1),e||Wn(t)),null;case 13:return Sd(e,t,n);case 4:return xe(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Va(t,null,s,n):We(e,t,s,n),t.child;case 11:return hd(e,t,t.type,t.pendingProps,n);case 7:return We(e,t,t.pendingProps,n),t.child;case 8:return We(e,t,t.pendingProps.children,n),t.child;case 12:return We(e,t,t.pendingProps.children,n),t.child;case 10:return s=t.pendingProps,mn(t,t.type,s.value),We(e,t,s.children,n),t.child;case 9:return l=t.type._context,s=t.pendingProps.children,ta(t),l=at(l),s=s(l),t.flags|=1,We(e,t,s,n),t.child;case 14:return md(e,t,t.type,t.pendingProps,n);case 15:return pd(e,t,t.type,t.pendingProps,n);case 19:return _d(e,t,n);case 31:return s=t.pendingProps,n=t.mode,s={mode:s.mode,children:s.children},e===null?(n=sr(s,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Jt(e.child,s),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return gd(e,t,n);case 24:return ta(t),s=at(Ge),e===null?(l=Bl(),l===null&&(l=we,u=Ul(),l.pooledCache=u,u.refCount++,u!==null&&(l.pooledCacheLanes|=n),l=u),t.memoizedState={parent:s,cache:l},Hl(t),mn(t,Ge,l)):((e.lanes&n)!==0&&(ql(e,t),ks(t,null,null,n),ws()),l=e.memoizedState,u=t.memoizedState,l.parent!==s?(l={parent:s,cache:s},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),mn(t,Ge,s)):(s=u.cache,mn(t,Ge,s),s!==l.cache&&Ol(t,[Ge],n,!0))),We(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function ln(e){e.flags|=4}function Ed(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!kh(t)){if(t=wt.current,t!==null&&((_e&4194048)===_e?$t!==null:(_e&62914560)!==_e&&(_e&536870912)===0||t!==$t))throw Ds=Ll,of;e.flags|=8192}}function ir(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?us():536870912,e.lanes|=t,Xa|=t)}function qs(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ue(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags&65011712,s|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Ig(e,t,n){var s=t.pendingProps;switch(Dl(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ue(t),null;case 1:return Ue(t),null;case 3:return n=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),nn(Ge),Je(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(_s(t)?ln(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,nf())),Ue(t),null;case 26:return n=t.memoizedState,e===null?(ln(t),n!==null?(Ue(t),Ed(t,n)):(Ue(t),t.flags&=-16777217)):n?n!==e.memoizedState?(ln(t),Ue(t),Ed(t,n)):(Ue(t),t.flags&=-16777217):(e.memoizedProps!==s&&ln(t),Ue(t),t.flags&=-16777217),null;case 27:ga(t),n=ue.current;var l=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ln(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Ue(t),null}e=ce.current,_s(t)?ef(t):(e=Eh(l,s,n),t.stateNode=e,ln(t))}return Ue(t),null;case 5:if(ga(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&ln(t);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Ue(t),null}if(e=ce.current,_s(t))ef(t);else{switch(l=vr(ue.current),e){case 1:e=l.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=l.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=l.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=l.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?l.createElement("select",{is:s.is}):l.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?l.createElement(n,{is:s.is}):l.createElement(n)}}e[nt]=t,e[ft]=s;e:for(l=t.child;l!==null;){if(l.tag===5||l.tag===6)e.appendChild(l.stateNode);else if(l.tag!==4&&l.tag!==27&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===t)break e;for(;l.sibling===null;){if(l.return===null||l.return===t)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}t.stateNode=e;e:switch(tt(e,n,s),n){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ln(t)}}return Ue(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&ln(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(i(166));if(e=ue.current,_s(t)){if(e=t.stateNode,n=t.memoizedProps,s=null,l=ct,l!==null)switch(l.tag){case 27:case 5:s=l.memoizedProps}e[nt]=t,e=!!(e.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||vh(e.nodeValue,n)),e||Wn(t)}else e=vr(e).createTextNode(s),e[nt]=t,t.stateNode=e}return Ue(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=_s(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(i(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));l[nt]=t}else Ts(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ue(t),l=!1}else l=nf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(sn(t),t):(sn(t),null)}if(sn(t),(t.flags&128)!==0)return t.lanes=n,t;if(n=s!==null,e=e!==null&&e.memoizedState!==null,n){s=t.child,l=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(l=s.alternate.memoizedState.cachePool.pool);var u=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==l&&(s.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),ir(t,t.updateQueue),Ue(t),null;case 4:return Je(),e===null&&Yo(t.stateNode.containerInfo),Ue(t),null;case 10:return nn(t.type),Ue(t),null;case 19:if(J(Ve),l=t.memoizedState,l===null)return Ue(t),null;if(s=(t.flags&128)!==0,u=l.rendering,u===null)if(s)qs(l,!1);else{if(Be!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=er(e),u!==null){for(t.flags|=128,qs(l,!1),e=u.updateQueue,t.updateQueue=e,ir(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Ju(n,e),n=n.sibling;return ae(Ve,Ve.current&1|2),t.child}e=e.sibling}l.tail!==null&&Et()>or&&(t.flags|=128,s=!0,qs(l,!1),t.lanes=4194304)}else{if(!s)if(e=er(u),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,ir(t,e),qs(l,!0),l.tail===null&&l.tailMode==="hidden"&&!u.alternate&&!Ee)return Ue(t),null}else 2*Et()-l.renderingStartTime>or&&n!==536870912&&(t.flags|=128,s=!0,qs(l,!1),t.lanes=4194304);l.isBackwards?(u.sibling=t.child,t.child=u):(e=l.last,e!==null?e.sibling=u:t.child=u,l.last=u)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Et(),t.sibling=null,e=Ve.current,ae(Ve,s?e&1|2:e&1),t):(Ue(t),null);case 22:case 23:return sn(t),Gl(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(n&536870912)!==0&&(t.flags&128)===0&&(Ue(t),t.subtreeFlags&6&&(t.flags|=8192)):Ue(t),n=t.updateQueue,n!==null&&ir(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==n&&(t.flags|=2048),e!==null&&J(na),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),nn(Ge),Ue(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function Xg(e,t){switch(Dl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return nn(Ge),Je(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return ga(t),null;case 13:if(sn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Ts()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return J(Ve),null;case 4:return Je(),null;case 10:return nn(t.type),null;case 22:case 23:return sn(t),Gl(),e!==null&&J(na),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return nn(Ge),null;case 25:return null;default:return null}}function Rd(e,t){switch(Dl(t),t.tag){case 3:nn(Ge),Je();break;case 26:case 27:case 5:ga(t);break;case 4:Je();break;case 13:sn(t);break;case 19:J(Ve);break;case 10:nn(t.type);break;case 22:case 23:sn(t),Gl(),e!==null&&J(na);break;case 24:nn(Ge)}}function $s(e,t){try{var n=t.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var l=s.next;n=l;do{if((n.tag&e)===e){s=void 0;var u=n.create,g=n.inst;s=u(),g.destroy=s}n=n.next}while(n!==l)}}catch(b){Ae(t,t.return,b)}}function Sn(e,t,n){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var u=l.next;s=u;do{if((s.tag&e)===e){var g=s.inst,b=g.destroy;if(b!==void 0){g.destroy=void 0,l=t;var T=n,L=b;try{L()}catch(G){Ae(l,T,G)}}}s=s.next}while(s!==u)}}catch(G){Ae(t,t.return,G)}}function Nd(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{mf(t,n)}catch(s){Ae(e,e.return,s)}}}function jd(e,t,n){n.props=sa(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(s){Ae(e,t,s)}}function Ps(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof n=="function"?e.refCleanup=n(s):n.current=s}}catch(l){Ae(e,t,l)}}function Pt(e,t){var n=e.ref,s=e.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(l){Ae(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(l){Ae(e,t,l)}else n.current=null}function Md(e){var t=e.type,n=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(l){Ae(e,e.return,l)}}function bo(e,t,n){try{var s=e.stateNode;g0(s,e.type,n,t),s[ft]=t}catch(l){Ae(e,e.return,l)}}function Dd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Mn(e.type)||e.tag===4}function xo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Mn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function So(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=yr));else if(s!==4&&(s===27&&Mn(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(So(e,t,n),e=e.sibling;e!==null;)So(e,t,n),e=e.sibling}function rr(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(s===27&&Mn(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(rr(e,t,n),e=e.sibling;e!==null;)rr(e,t,n),e=e.sibling}function Ad(e){var t=e.stateNode,n=e.memoizedProps;try{for(var s=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);tt(t,s,n),t[nt]=e,t[ft]=n}catch(u){Ae(e,e.return,u)}}var on=!1,qe=!1,Co=!1,wd=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Kg(e,t){if(e=e.containerInfo,Qo=Tr,e=Pu(e),bl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var l=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var g=0,b=-1,T=-1,L=0,G=0,I=e,q=null;t:for(;;){for(var P;I!==n||l!==0&&I.nodeType!==3||(b=g+l),I!==u||s!==0&&I.nodeType!==3||(T=g+s),I.nodeType===3&&(g+=I.nodeValue.length),(P=I.firstChild)!==null;)q=I,I=P;for(;;){if(I===e)break t;if(q===n&&++L===l&&(b=g),q===u&&++G===s&&(T=g),(P=I.nextSibling)!==null)break;I=q,q=I.parentNode}I=P}n=b===-1||T===-1?null:{start:b,end:T}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fo={focusedElem:e,selectionRange:n},Tr=!1,Ke=t;Ke!==null;)if(t=Ke,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Ke=e;else for(;Ke!==null;){switch(t=Ke,u=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,n=t,l=u.memoizedProps,u=u.memoizedState,s=n.stateNode;try{var he=sa(n.type,l,n.elementType===n.type);e=s.getSnapshotBeforeUpdate(he,u),s.__reactInternalSnapshotBeforeUpdate=e}catch(fe){Ae(n,n.return,fe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)Ko(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ko(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,Ke=e;break}Ke=t.return}}function kd(e,t,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Cn(e,n),s&4&&$s(5,n);break;case 1:if(Cn(e,n),s&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(g){Ae(n,n.return,g)}else{var l=sa(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(g){Ae(n,n.return,g)}}s&64&&Nd(n),s&512&&Ps(n,n.return);break;case 3:if(Cn(e,n),s&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{mf(e,t)}catch(g){Ae(n,n.return,g)}}break;case 27:t===null&&s&4&&Ad(n);case 26:case 5:Cn(e,n),t===null&&s&4&&Md(n),s&512&&Ps(n,n.return);break;case 12:Cn(e,n);break;case 13:Cn(e,n),s&4&&zd(e,n),s&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=i0.bind(null,n),_0(e,n))));break;case 22:if(s=n.memoizedState!==null||on,!s){t=t!==null&&t.memoizedState!==null||qe,l=on;var u=qe;on=s,(qe=t)&&!u?_n(e,n,(n.subtreeFlags&8772)!==0):Cn(e,n),on=l,qe=u}break;case 30:break;default:Cn(e,n)}}function Od(e){var t=e.alternate;t!==null&&(e.alternate=null,Od(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&el(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Oe=null,mt=!1;function cn(e,t,n){for(n=n.child;n!==null;)Ud(e,t,n),n=n.sibling}function Ud(e,t,n){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount($n,n)}catch{}switch(n.tag){case 26:qe||Pt(n,t),cn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:qe||Pt(n,t);var s=Oe,l=mt;Mn(n.type)&&(Oe=n.stateNode,mt=!1),cn(e,t,n),Zs(n.stateNode),Oe=s,mt=l;break;case 5:qe||Pt(n,t);case 6:if(s=Oe,l=mt,Oe=null,cn(e,t,n),Oe=s,mt=l,Oe!==null)if(mt)try{(Oe.nodeType===9?Oe.body:Oe.nodeName==="HTML"?Oe.ownerDocument.body:Oe).removeChild(n.stateNode)}catch(u){Ae(n,t,u)}else try{Oe.removeChild(n.stateNode)}catch(u){Ae(n,t,u)}break;case 18:Oe!==null&&(mt?(e=Oe,_h(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ii(e)):_h(Oe,n.stateNode));break;case 4:s=Oe,l=mt,Oe=n.stateNode.containerInfo,mt=!0,cn(e,t,n),Oe=s,mt=l;break;case 0:case 11:case 14:case 15:qe||Sn(2,n,t),qe||Sn(4,n,t),cn(e,t,n);break;case 1:qe||(Pt(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"&&jd(n,t,s)),cn(e,t,n);break;case 21:cn(e,t,n);break;case 22:qe=(s=qe)||n.memoizedState!==null,cn(e,t,n),qe=s;break;default:cn(e,t,n)}}function zd(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ii(e)}catch(n){Ae(t,t.return,n)}}function Zg(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new wd),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new wd),t;default:throw Error(i(435,e.tag))}}function _o(e,t){var n=Zg(e);t.forEach(function(s){var l=r0.bind(null,e,s);n.has(s)||(n.add(s),s.then(l,l))})}function xt(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var l=n[s],u=e,g=t,b=g;e:for(;b!==null;){switch(b.tag){case 27:if(Mn(b.type)){Oe=b.stateNode,mt=!1;break e}break;case 5:Oe=b.stateNode,mt=!1;break e;case 3:case 4:Oe=b.stateNode.containerInfo,mt=!0;break e}b=b.return}if(Oe===null)throw Error(i(160));Ud(u,g,l),Oe=null,mt=!1,u=l.alternate,u!==null&&(u.return=null),l.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Bd(t,e),t=t.sibling}var zt=null;function Bd(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xt(t,e),St(e),s&4&&(Sn(3,e,e.return),$s(3,e),Sn(5,e,e.return));break;case 1:xt(t,e),St(e),s&512&&(qe||n===null||Pt(n,n.return)),s&64&&on&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var l=zt;if(xt(t,e),St(e),s&512&&(qe||n===null||Pt(n,n.return)),s&4){var u=n!==null?n.memoizedState:null;if(s=e.memoizedState,n===null)if(s===null)if(e.stateNode===null){e:{s=e.type,n=e.memoizedProps,l=l.ownerDocument||l;t:switch(s){case"title":u=l.getElementsByTagName("title")[0],(!u||u[ds]||u[nt]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=l.createElement(s),l.head.insertBefore(u,l.querySelector("head > title"))),tt(u,s,n),u[nt]=e,Ie(u),s=u;break e;case"link":var g=Ah("link","href",l).get(s+(n.href||""));if(g){for(var b=0;b<g.length;b++)if(u=g[b],u.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&u.getAttribute("rel")===(n.rel==null?null:n.rel)&&u.getAttribute("title")===(n.title==null?null:n.title)&&u.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){g.splice(b,1);break t}}u=l.createElement(s),tt(u,s,n),l.head.appendChild(u);break;case"meta":if(g=Ah("meta","content",l).get(s+(n.content||""))){for(b=0;b<g.length;b++)if(u=g[b],u.getAttribute("content")===(n.content==null?null:""+n.content)&&u.getAttribute("name")===(n.name==null?null:n.name)&&u.getAttribute("property")===(n.property==null?null:n.property)&&u.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&u.getAttribute("charset")===(n.charSet==null?null:n.charSet)){g.splice(b,1);break t}}u=l.createElement(s),tt(u,s,n),l.head.appendChild(u);break;default:throw Error(i(468,s))}u[nt]=e,Ie(u),s=u}e.stateNode=s}else wh(l,e.type,e.stateNode);else e.stateNode=Dh(l,s,e.memoizedProps);else u!==s?(u===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):u.count--,s===null?wh(l,e.type,e.stateNode):Dh(l,s,e.memoizedProps)):s===null&&e.stateNode!==null&&bo(e,e.memoizedProps,n.memoizedProps)}break;case 27:xt(t,e),St(e),s&512&&(qe||n===null||Pt(n,n.return)),n!==null&&s&4&&bo(e,e.memoizedProps,n.memoizedProps);break;case 5:if(xt(t,e),St(e),s&512&&(qe||n===null||Pt(n,n.return)),e.flags&32){l=e.stateNode;try{Na(l,"")}catch(P){Ae(e,e.return,P)}}s&4&&e.stateNode!=null&&(l=e.memoizedProps,bo(e,l,n!==null?n.memoizedProps:l)),s&1024&&(Co=!0);break;case 6:if(xt(t,e),St(e),s&4){if(e.stateNode===null)throw Error(i(162));s=e.memoizedProps,n=e.stateNode;try{n.nodeValue=s}catch(P){Ae(e,e.return,P)}}break;case 3:if(Sr=null,l=zt,zt=br(t.containerInfo),xt(t,e),zt=l,St(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{ii(t.containerInfo)}catch(P){Ae(e,e.return,P)}Co&&(Co=!1,Ld(e));break;case 4:s=zt,zt=br(e.stateNode.containerInfo),xt(t,e),St(e),zt=s;break;case 12:xt(t,e),St(e);break;case 13:xt(t,e),St(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Mo=Et()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,_o(e,s)));break;case 22:l=e.memoizedState!==null;var T=n!==null&&n.memoizedState!==null,L=on,G=qe;if(on=L||l,qe=G||T,xt(t,e),qe=G,on=L,St(e),s&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(n===null||T||on||qe||ia(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){T=n=t;try{if(u=T.stateNode,l)g=u.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{b=T.stateNode;var I=T.memoizedProps.style,q=I!=null&&I.hasOwnProperty("display")?I.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(P){Ae(T,T.return,P)}}}else if(t.tag===6){if(n===null){T=t;try{T.stateNode.nodeValue=l?"":T.memoizedProps}catch(P){Ae(T,T.return,P)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,_o(e,n))));break;case 19:xt(t,e),St(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,_o(e,s)));break;case 30:break;case 21:break;default:xt(t,e),St(e)}}function St(e){var t=e.flags;if(t&2){try{for(var n,s=e.return;s!==null;){if(Dd(s)){n=s;break}s=s.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var l=n.stateNode,u=xo(e);rr(e,u,l);break;case 5:var g=n.stateNode;n.flags&32&&(Na(g,""),n.flags&=-33);var b=xo(e);rr(e,b,g);break;case 3:case 4:var T=n.stateNode.containerInfo,L=xo(e);So(e,L,T);break;default:throw Error(i(161))}}catch(G){Ae(e,e.return,G)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ld(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Ld(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Cn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)kd(e,t.alternate,t),t=t.sibling}function ia(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Sn(4,t,t.return),ia(t);break;case 1:Pt(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&jd(t,t.return,n),ia(t);break;case 27:Zs(t.stateNode);case 26:case 5:Pt(t,t.return),ia(t);break;case 22:t.memoizedState===null&&ia(t);break;case 30:ia(t);break;default:ia(t)}e=e.sibling}}function _n(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,l=e,u=t,g=u.flags;switch(u.tag){case 0:case 11:case 15:_n(l,u,n),$s(4,u);break;case 1:if(_n(l,u,n),s=u,l=s.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(L){Ae(s,s.return,L)}if(s=u,l=s.updateQueue,l!==null){var b=s.stateNode;try{var T=l.shared.hiddenCallbacks;if(T!==null)for(l.shared.hiddenCallbacks=null,l=0;l<T.length;l++)hf(T[l],b)}catch(L){Ae(s,s.return,L)}}n&&g&64&&Nd(u),Ps(u,u.return);break;case 27:Ad(u);case 26:case 5:_n(l,u,n),n&&s===null&&g&4&&Md(u),Ps(u,u.return);break;case 12:_n(l,u,n);break;case 13:_n(l,u,n),n&&g&4&&zd(l,u);break;case 22:u.memoizedState===null&&_n(l,u,n),Ps(u,u.return);break;case 30:break;default:_n(l,u,n)}t=t.sibling}}function To(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Ns(n))}function Eo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ns(e))}function Yt(e,t,n,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Hd(e,t,n,s),t=t.sibling}function Hd(e,t,n,s){var l=t.flags;switch(t.tag){case 0:case 11:case 15:Yt(e,t,n,s),l&2048&&$s(9,t);break;case 1:Yt(e,t,n,s);break;case 3:Yt(e,t,n,s),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Ns(e)));break;case 12:if(l&2048){Yt(e,t,n,s),e=t.stateNode;try{var u=t.memoizedProps,g=u.id,b=u.onPostCommit;typeof b=="function"&&b(g,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){Ae(t,t.return,T)}}else Yt(e,t,n,s);break;case 13:Yt(e,t,n,s);break;case 23:break;case 22:u=t.stateNode,g=t.alternate,t.memoizedState!==null?u._visibility&2?Yt(e,t,n,s):Ys(e,t):u._visibility&2?Yt(e,t,n,s):(u._visibility|=2,Qa(e,t,n,s,(t.subtreeFlags&10256)!==0)),l&2048&&To(g,t);break;case 24:Yt(e,t,n,s),l&2048&&Eo(t.alternate,t);break;default:Yt(e,t,n,s)}}function Qa(e,t,n,s,l){for(l=l&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var u=e,g=t,b=n,T=s,L=g.flags;switch(g.tag){case 0:case 11:case 15:Qa(u,g,b,T,l),$s(8,g);break;case 23:break;case 22:var G=g.stateNode;g.memoizedState!==null?G._visibility&2?Qa(u,g,b,T,l):Ys(u,g):(G._visibility|=2,Qa(u,g,b,T,l)),l&&L&2048&&To(g.alternate,g);break;case 24:Qa(u,g,b,T,l),l&&L&2048&&Eo(g.alternate,g);break;default:Qa(u,g,b,T,l)}t=t.sibling}}function Ys(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,s=t,l=s.flags;switch(s.tag){case 22:Ys(n,s),l&2048&&To(s.alternate,s);break;case 24:Ys(n,s),l&2048&&Eo(s.alternate,s);break;default:Ys(n,s)}t=t.sibling}}var Gs=8192;function Fa(e){if(e.subtreeFlags&Gs)for(e=e.child;e!==null;)qd(e),e=e.sibling}function qd(e){switch(e.tag){case 26:Fa(e),e.flags&Gs&&e.memoizedState!==null&&z0(zt,e.memoizedState,e.memoizedProps);break;case 5:Fa(e);break;case 3:case 4:var t=zt;zt=br(e.stateNode.containerInfo),Fa(e),zt=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Gs,Gs=16777216,Fa(e),Gs=t):Fa(e));break;default:Fa(e)}}function $d(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Vs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];Ke=s,Yd(s,e)}$d(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Pd(e),e=e.sibling}function Pd(e){switch(e.tag){case 0:case 11:case 15:Vs(e),e.flags&2048&&Sn(9,e,e.return);break;case 3:Vs(e);break;case 12:Vs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,lr(e)):Vs(e);break;default:Vs(e)}}function lr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var s=t[n];Ke=s,Yd(s,e)}$d(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Sn(8,t,t.return),lr(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,lr(t));break;default:lr(t)}e=e.sibling}}function Yd(e,t){for(;Ke!==null;){var n=Ke;switch(n.tag){case 0:case 11:case 15:Sn(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Ns(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Ke=s;else e:for(n=e;Ke!==null;){s=Ke;var l=s.sibling,u=s.return;if(Od(s),s===n){Ke=null;break e}if(l!==null){l.return=u,Ke=l;break e}Ke=u}}}var Jg={getCacheForType:function(e){var t=at(Ge),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},Wg=typeof WeakMap=="function"?WeakMap:Map,Re=0,we=null,Se=null,_e=0,Ne=0,Ct=null,Tn=!1,Ia=!1,Ro=!1,un=0,Be=0,En=0,ra=0,No=0,kt=0,Xa=0,Qs=null,pt=null,jo=!1,Mo=0,or=1/0,cr=null,Rn=null,et=0,Nn=null,Ka=null,Za=0,Do=0,Ao=null,Gd=null,Fs=0,wo=null;function _t(){if((Re&2)!==0&&_e!==0)return _e&-_e;if($.T!==null){var e=La;return e!==0?e:Ho()}return iu()}function Vd(){kt===0&&(kt=(_e&536870912)===0||Ee?xi():536870912);var e=wt.current;return e!==null&&(e.flags|=32),kt}function Tt(e,t,n){(e===we&&(Ne===2||Ne===9)||e.cancelPendingCommit!==null)&&(Ja(e,0),jn(e,_e,kt,!1)),Z(e,n),((Re&2)===0||e!==we)&&(e===we&&((Re&2)===0&&(ra|=n),Be===4&&jn(e,_e,kt,!1)),Gt(e))}function Qd(e,t,n){if((Re&6)!==0)throw Error(i(327));var s=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Gn(e,t),l=s?n0(e,t):Uo(e,t,!0),u=s;do{if(l===0){Ia&&!s&&jn(e,t,0,!1);break}else{if(n=e.current.alternate,u&&!e0(n)){l=Uo(e,t,!1),u=!1;continue}if(l===2){if(u=t,e.errorRecoveryDisabledLanes&u)var g=0;else g=e.pendingLanes&-536870913,g=g!==0?g:g&536870912?536870912:0;if(g!==0){t=g;e:{var b=e;l=Qs;var T=b.current.memoizedState.isDehydrated;if(T&&(Ja(b,g).flags|=256),g=Uo(b,g,!1),g!==2){if(Ro&&!T){b.errorRecoveryDisabledLanes|=u,ra|=u,l=4;break e}u=pt,pt=l,u!==null&&(pt===null?pt=u:pt.push.apply(pt,u))}l=g}if(u=!1,l!==2)continue}}if(l===1){Ja(e,0),jn(e,t,0,!0);break}e:{switch(s=e,u=l,u){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:jn(s,t,kt,!Tn);break e;case 2:pt=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(l=Mo+300-Et(),10<l)){if(jn(s,t,kt,!Tn),Yn(s,0,!0)!==0)break e;s.timeoutHandle=Sh(Fd.bind(null,s,n,pt,cr,jo,t,kt,ra,Xa,Tn,u,2,-0,0),l);break e}Fd(s,n,pt,cr,jo,t,kt,ra,Xa,Tn,u,0,-0,0)}}break}while(!0);Gt(e)}function Fd(e,t,n,s,l,u,g,b,T,L,G,I,q,P){if(e.timeoutHandle=-1,I=t.subtreeFlags,(I&8192||(I&16785408)===16785408)&&(ei={stylesheets:null,count:0,unsuspend:U0},qd(t),I=B0(),I!==null)){e.cancelPendingCommit=I(eh.bind(null,e,t,u,n,s,l,g,b,T,G,1,q,P)),jn(e,u,g,!L);return}eh(e,t,u,n,s,l,g,b,T)}function e0(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var l=n[s],u=l.getSnapshot;l=l.value;try{if(!vt(u(),l))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jn(e,t,n,s){t&=~No,t&=~ra,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var l=t;0<l;){var u=31-ot(l),g=1<<u;s[u]=-1,l&=~g}n!==0&&Fe(e,n,t)}function ur(){return(Re&6)===0?(Is(0),!1):!0}function ko(){if(Se!==null){if(Ne===0)var e=Se.return;else e=Se,tn=ea=null,Xl(e),Ga=null,Ls=0,e=Se;for(;e!==null;)Rd(e.alternate,e),e=e.return;Se=null}}function Ja(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,v0(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),ko(),we=e,Se=n=Jt(e.current,null),_e=t,Ne=0,Ct=null,Tn=!1,Ia=Gn(e,t),Ro=!1,Xa=kt=No=ra=En=Be=0,pt=Qs=null,jo=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var l=31-ot(s),u=1<<l;t|=e[l],s&=~u}return un=t,wi(),n}function Id(e,t){ge=null,$.H=Zi,t===Ms||t===$i?(t=ff(),Ne=3):t===of?(t=ff(),Ne=4):Ne=t===dd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ct=t,Se===null&&(Be=1,nr(e,jt(t,e.current)))}function Xd(){var e=$.H;return $.H=Zi,e===null?Zi:e}function Kd(){var e=$.A;return $.A=Jg,e}function Oo(){Be=4,Tn||(_e&4194048)!==_e&&wt.current!==null||(Ia=!0),(En&134217727)===0&&(ra&134217727)===0||we===null||jn(we,_e,kt,!1)}function Uo(e,t,n){var s=Re;Re|=2;var l=Xd(),u=Kd();(we!==e||_e!==t)&&(cr=null,Ja(e,t)),t=!1;var g=Be;e:do try{if(Ne!==0&&Se!==null){var b=Se,T=Ct;switch(Ne){case 8:ko(),g=6;break e;case 3:case 2:case 9:case 6:wt.current===null&&(t=!0);var L=Ne;if(Ne=0,Ct=null,Wa(e,b,T,L),n&&Ia){g=0;break e}break;default:L=Ne,Ne=0,Ct=null,Wa(e,b,T,L)}}t0(),g=Be;break}catch(G){Id(e,G)}while(!0);return t&&e.shellSuspendCounter++,tn=ea=null,Re=s,$.H=l,$.A=u,Se===null&&(we=null,_e=0,wi()),g}function t0(){for(;Se!==null;)Zd(Se)}function n0(e,t){var n=Re;Re|=2;var s=Xd(),l=Kd();we!==e||_e!==t?(cr=null,or=Et()+500,Ja(e,t)):Ia=Gn(e,t);e:do try{if(Ne!==0&&Se!==null){t=Se;var u=Ct;t:switch(Ne){case 1:Ne=0,Ct=null,Wa(e,t,u,1);break;case 2:case 9:if(cf(u)){Ne=0,Ct=null,Jd(t);break}t=function(){Ne!==2&&Ne!==9||we!==e||(Ne=7),Gt(e)},u.then(t,t);break e;case 3:Ne=7;break e;case 4:Ne=5;break e;case 7:cf(u)?(Ne=0,Ct=null,Jd(t)):(Ne=0,Ct=null,Wa(e,t,u,7));break;case 5:var g=null;switch(Se.tag){case 26:g=Se.memoizedState;case 5:case 27:var b=Se;if(!g||kh(g)){Ne=0,Ct=null;var T=b.sibling;if(T!==null)Se=T;else{var L=b.return;L!==null?(Se=L,fr(L)):Se=null}break t}}Ne=0,Ct=null,Wa(e,t,u,5);break;case 6:Ne=0,Ct=null,Wa(e,t,u,6);break;case 8:ko(),Be=6;break e;default:throw Error(i(462))}}a0();break}catch(G){Id(e,G)}while(!0);return tn=ea=null,$.H=s,$.A=l,Re=n,Se!==null?0:(we=null,_e=0,wi(),Be)}function a0(){for(;Se!==null&&!Gr();)Zd(Se)}function Zd(e){var t=Td(e.alternate,e,un);e.memoizedProps=e.pendingProps,t===null?fr(e):Se=t}function Jd(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=vd(n,t,t.pendingProps,t.type,void 0,_e);break;case 11:t=vd(n,t,t.pendingProps,t.type.render,t.ref,_e);break;case 5:Xl(t);default:Rd(n,t),t=Se=Ju(t,un),t=Td(n,t,un)}e.memoizedProps=e.pendingProps,t===null?fr(e):Se=t}function Wa(e,t,n,s){tn=ea=null,Xl(t),Ga=null,Ls=0;var l=t.return;try{if(Qg(e,l,t,n,_e)){Be=1,nr(e,jt(n,e.current)),Se=null;return}}catch(u){if(l!==null)throw Se=l,u;Be=1,nr(e,jt(n,e.current)),Se=null;return}t.flags&32768?(Ee||s===1?e=!0:Ia||(_e&536870912)!==0?e=!1:(Tn=e=!0,(s===2||s===9||s===3||s===6)&&(s=wt.current,s!==null&&s.tag===13&&(s.flags|=16384))),Wd(t,e)):fr(t)}function fr(e){var t=e;do{if((t.flags&32768)!==0){Wd(t,Tn);return}e=t.return;var n=Ig(t.alternate,t,un);if(n!==null){Se=n;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Be===0&&(Be=5)}function Wd(e,t){do{var n=Xg(e.alternate,e);if(n!==null){n.flags&=32767,Se=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Se=e;return}Se=e=n}while(e!==null);Be=6,Se=null}function eh(e,t,n,s,l,u,g,b,T){e.cancelPendingCommit=null;do dr();while(et!==0);if((Re&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(u=t.lanes|t.childLanes,u|=Tl,Qe(e,n,u,g,b,T),e===we&&(Se=we=null,_e=0),Ka=t,Nn=e,Za=n,Do=u,Ao=l,Gd=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,l0(ya,function(){return ih(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=$.T,$.T=null,l=K.p,K.p=2,g=Re,Re|=4;try{Kg(e,t,n)}finally{Re=g,K.p=l,$.T=s}}et=1,th(),nh(),ah()}}function th(){if(et===1){et=0;var e=Nn,t=Ka,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=$.T,$.T=null;var s=K.p;K.p=2;var l=Re;Re|=4;try{Bd(t,e);var u=Fo,g=Pu(e.containerInfo),b=u.focusedElem,T=u.selectionRange;if(g!==b&&b&&b.ownerDocument&&$u(b.ownerDocument.documentElement,b)){if(T!==null&&bl(b)){var L=T.start,G=T.end;if(G===void 0&&(G=L),"selectionStart"in b)b.selectionStart=L,b.selectionEnd=Math.min(G,b.value.length);else{var I=b.ownerDocument||document,q=I&&I.defaultView||window;if(q.getSelection){var P=q.getSelection(),he=b.textContent.length,fe=Math.min(T.start,he),De=T.end===void 0?fe:Math.min(T.end,he);!P.extend&&fe>De&&(g=De,De=fe,fe=g);var k=qu(b,fe),D=qu(b,De);if(k&&D&&(P.rangeCount!==1||P.anchorNode!==k.node||P.anchorOffset!==k.offset||P.focusNode!==D.node||P.focusOffset!==D.offset)){var B=I.createRange();B.setStart(k.node,k.offset),P.removeAllRanges(),fe>De?(P.addRange(B),P.extend(D.node,D.offset)):(B.setEnd(D.node,D.offset),P.addRange(B))}}}}for(I=[],P=b;P=P.parentNode;)P.nodeType===1&&I.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<I.length;b++){var Q=I[b];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Tr=!!Qo,Fo=Qo=null}finally{Re=l,K.p=s,$.T=n}}e.current=t,et=2}}function nh(){if(et===2){et=0;var e=Nn,t=Ka,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=$.T,$.T=null;var s=K.p;K.p=2;var l=Re;Re|=4;try{kd(e,t.alternate,t)}finally{Re=l,K.p=s,$.T=n}}et=3}}function ah(){if(et===4||et===3){et=0,Vr();var e=Nn,t=Ka,n=Za,s=Gd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?et=5:(et=0,Ka=Nn=null,sh(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(Rn=null),Jr(n),t=t.stateNode,lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot($n,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=$.T,l=K.p,K.p=2,$.T=null;try{for(var u=e.onRecoverableError,g=0;g<s.length;g++){var b=s[g];u(b.value,{componentStack:b.stack})}}finally{$.T=t,K.p=l}}(Za&3)!==0&&dr(),Gt(e),l=e.pendingLanes,(n&4194090)!==0&&(l&42)!==0?e===wo?Fs++:(Fs=0,wo=e):Fs=0,Is(0)}}function sh(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Ns(t)))}function dr(e){return th(),nh(),ah(),ih()}function ih(){if(et!==5)return!1;var e=Nn,t=Do;Do=0;var n=Jr(Za),s=$.T,l=K.p;try{K.p=32>n?32:n,$.T=null,n=Ao,Ao=null;var u=Nn,g=Za;if(et=0,Ka=Nn=null,Za=0,(Re&6)!==0)throw Error(i(331));var b=Re;if(Re|=4,Pd(u.current),Hd(u,u.current,g,n),Re=b,Is(0,!1),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot($n,u)}catch{}return!0}finally{K.p=l,$.T=s,sh(e,t)}}function rh(e,t,n){t=jt(n,t),t=co(e.stateNode,t,2),e=yn(e,t,2),e!==null&&(Z(e,2),Gt(e))}function Ae(e,t,n){if(e.tag===3)rh(e,e,n);else for(;t!==null;){if(t.tag===3){rh(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Rn===null||!Rn.has(s))){e=jt(n,e),n=ud(2),s=yn(t,n,2),s!==null&&(fd(n,s,t,e),Z(s,2),Gt(s));break}}t=t.return}}function zo(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Wg;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(n)||(Ro=!0,l.add(n),e=s0.bind(null,e,t,n),t.then(e,e))}function s0(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,we===e&&(_e&n)===n&&(Be===4||Be===3&&(_e&62914560)===_e&&300>Et()-Mo?(Re&2)===0&&Ja(e,0):No|=n,Xa===_e&&(Xa=0)),Gt(e)}function lh(e,t){t===0&&(t=us()),e=Oa(e,t),e!==null&&(Z(e,t),Gt(e))}function i0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),lh(e,n)}function r0(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(i(314))}s!==null&&s.delete(t),lh(e,n)}function l0(e,t){return cs(e,t)}var hr=null,es=null,Bo=!1,mr=!1,Lo=!1,la=0;function Gt(e){e!==es&&e.next===null&&(es===null?hr=es=e:es=es.next=e),mr=!0,Bo||(Bo=!0,c0())}function Is(e,t){if(!Lo&&mr){Lo=!0;do for(var n=!1,s=hr;s!==null;){if(e!==0){var l=s.pendingLanes;if(l===0)var u=0;else{var g=s.suspendedLanes,b=s.pingedLanes;u=(1<<31-ot(42|e)+1)-1,u&=l&~(g&~b),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(n=!0,fh(s,u))}else u=_e,u=Yn(s,s===we?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(u&3)===0||Gn(s,u)||(n=!0,fh(s,u));s=s.next}while(n);Lo=!1}}function o0(){oh()}function oh(){mr=Bo=!1;var e=0;la!==0&&(y0()&&(e=la),la=0);for(var t=Et(),n=null,s=hr;s!==null;){var l=s.next,u=ch(s,t);u===0?(s.next=null,n===null?hr=l:n.next=l,l===null&&(es=n)):(n=s,(e!==0||(u&3)!==0)&&(mr=!0)),s=l}Is(e)}function ch(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var g=31-ot(u),b=1<<g,T=l[g];T===-1?((b&n)===0||(b&s)!==0)&&(l[g]=bi(b,t)):T<=t&&(e.expiredLanes|=b),u&=~b}if(t=we,n=_e,n=Yn(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,n===0||e===t&&(Ne===2||Ne===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&qn(s),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Gn(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(s!==null&&qn(s),Jr(n)){case 2:case 8:n=yi;break;case 32:n=ya;break;case 268435456:n=vi;break;default:n=ya}return s=uh.bind(null,e),n=cs(n,s),e.callbackPriority=t,e.callbackNode=n,t}return s!==null&&s!==null&&qn(s),e.callbackPriority=2,e.callbackNode=null,2}function uh(e,t){if(et!==0&&et!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(dr()&&e.callbackNode!==n)return null;var s=_e;return s=Yn(e,e===we?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Qd(e,s,t),ch(e,Et()),e.callbackNode!=null&&e.callbackNode===n?uh.bind(null,e):null)}function fh(e,t){if(dr())return null;Qd(e,t,!0)}function c0(){b0(function(){(Re&6)!==0?cs(Le,o0):oh()})}function Ho(){return la===0&&(la=xi()),la}function dh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ei(""+e)}function hh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function u0(e,t,n,s,l){if(t==="submit"&&n&&n.stateNode===l){var u=dh((l[ft]||null).action),g=s.submitter;g&&(t=(t=g[ft]||null)?dh(t.formAction):g.getAttribute("formAction"),t!==null&&(u=t,g=null));var b=new Mi("action","action",null,s,l);e.push({event:b,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(la!==0){var T=g?hh(l,g):new FormData(l);so(n,{pending:!0,data:T,method:l.method,action:u},null,T)}}else typeof u=="function"&&(b.preventDefault(),T=g?hh(l,g):new FormData(l),so(n,{pending:!0,data:T,method:l.method,action:u},u,T))},currentTarget:l}]})}}for(var qo=0;qo<_l.length;qo++){var $o=_l[qo],f0=$o.toLowerCase(),d0=$o[0].toUpperCase()+$o.slice(1);Ut(f0,"on"+d0)}Ut(Vu,"onAnimationEnd"),Ut(Qu,"onAnimationIteration"),Ut(Fu,"onAnimationStart"),Ut("dblclick","onDoubleClick"),Ut("focusin","onFocus"),Ut("focusout","onBlur"),Ut(Mg,"onTransitionRun"),Ut(Dg,"onTransitionStart"),Ut(Ag,"onTransitionCancel"),Ut(Iu,"onTransitionEnd"),Ta("onMouseEnter",["mouseout","mouseover"]),Ta("onMouseLeave",["mouseout","mouseover"]),Ta("onPointerEnter",["pointerout","pointerover"]),Ta("onPointerLeave",["pointerout","pointerover"]),Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xs));function mh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],l=s.event;s=s.listeners;e:{var u=void 0;if(t)for(var g=s.length-1;0<=g;g--){var b=s[g],T=b.instance,L=b.currentTarget;if(b=b.listener,T!==u&&l.isPropagationStopped())break e;u=b,l.currentTarget=L;try{u(l)}catch(G){tr(G)}l.currentTarget=null,u=T}else for(g=0;g<s.length;g++){if(b=s[g],T=b.instance,L=b.currentTarget,b=b.listener,T!==u&&l.isPropagationStopped())break e;u=b,l.currentTarget=L;try{u(l)}catch(G){tr(G)}l.currentTarget=null,u=T}}}}function Ce(e,t){var n=t[Wr];n===void 0&&(n=t[Wr]=new Set);var s=e+"__bubble";n.has(s)||(ph(t,e,2,!1),n.add(s))}function Po(e,t,n){var s=0;t&&(s|=4),ph(n,e,s,t)}var pr="_reactListening"+Math.random().toString(36).slice(2);function Yo(e){if(!e[pr]){e[pr]=!0,lu.forEach(function(n){n!=="selectionchange"&&(h0.has(n)||Po(n,!1,e),Po(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pr]||(t[pr]=!0,Po("selectionchange",!1,t))}}function ph(e,t,n,s){switch(Hh(t)){case 2:var l=q0;break;case 8:l=$0;break;default:l=ac}n=l.bind(null,t,n,e),l=void 0,!ul||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Go(e,t,n,s,l){var u=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var g=s.tag;if(g===3||g===4){var b=s.stateNode.containerInfo;if(b===l)break;if(g===4)for(g=s.return;g!==null;){var T=g.tag;if((T===3||T===4)&&g.stateNode.containerInfo===l)return;g=g.return}for(;b!==null;){if(g=Sa(b),g===null)return;if(T=g.tag,T===5||T===6||T===26||T===27){s=u=g;continue e}b=b.parentNode}}s=s.return}Su(function(){var L=u,G=ol(n),I=[];e:{var q=Xu.get(e);if(q!==void 0){var P=Mi,he=e;switch(e){case"keypress":if(Ni(n)===0)break e;case"keydown":case"keyup":P=lg;break;case"focusin":he="focus",P=ml;break;case"focusout":he="blur",P=ml;break;case"beforeblur":case"afterblur":P=ml;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=Tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=Xp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=ug;break;case Vu:case Qu:case Fu:P=Jp;break;case Iu:P=dg;break;case"scroll":case"scrollend":P=Fp;break;case"wheel":P=mg;break;case"copy":case"cut":case"paste":P=eg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=Ru;break;case"toggle":case"beforetoggle":P=gg}var fe=(t&4)!==0,De=!fe&&(e==="scroll"||e==="scrollend"),k=fe?q!==null?q+"Capture":null:q;fe=[];for(var D=L,B;D!==null;){var Q=D;if(B=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||B===null||k===null||(Q=ms(D,k),Q!=null&&fe.push(Ks(D,Q,B))),De)break;D=D.return}0<fe.length&&(q=new P(q,he,null,n,G),I.push({event:q,listeners:fe}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",q&&n!==ll&&(he=n.relatedTarget||n.fromElement)&&(Sa(he)||he[xa]))break e;if((P||q)&&(q=G.window===G?G:(q=G.ownerDocument)?q.defaultView||q.parentWindow:window,P?(he=n.relatedTarget||n.toElement,P=L,he=he?Sa(he):null,he!==null&&(De=f(he),fe=he.tag,he!==De||fe!==5&&fe!==27&&fe!==6)&&(he=null)):(P=null,he=L),P!==he)){if(fe=Tu,Q="onMouseLeave",k="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(fe=Ru,Q="onPointerLeave",k="onPointerEnter",D="pointer"),De=P==null?q:hs(P),B=he==null?q:hs(he),q=new fe(Q,D+"leave",P,n,G),q.target=De,q.relatedTarget=B,Q=null,Sa(G)===L&&(fe=new fe(k,D+"enter",he,n,G),fe.target=B,fe.relatedTarget=De,Q=fe),De=Q,P&&he)t:{for(fe=P,k=he,D=0,B=fe;B;B=ts(B))D++;for(B=0,Q=k;Q;Q=ts(Q))B++;for(;0<D-B;)fe=ts(fe),D--;for(;0<B-D;)k=ts(k),B--;for(;D--;){if(fe===k||k!==null&&fe===k.alternate)break t;fe=ts(fe),k=ts(k)}fe=null}else fe=null;P!==null&&gh(I,q,P,fe,!1),he!==null&&De!==null&&gh(I,De,he,fe,!0)}}e:{if(q=L?hs(L):window,P=q.nodeName&&q.nodeName.toLowerCase(),P==="select"||P==="input"&&q.type==="file")var ie=Ou;else if(wu(q))if(Uu)ie=Rg;else{ie=Tg;var ve=_g}else P=q.nodeName,!P||P.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?L&&rl(L.elementType)&&(ie=Ou):ie=Eg;if(ie&&(ie=ie(e,L))){ku(I,ie,n,G);break e}ve&&ve(e,q,L),e==="focusout"&&L&&q.type==="number"&&L.memoizedProps.value!=null&&il(q,"number",q.value)}switch(ve=L?hs(L):window,e){case"focusin":(wu(ve)||ve.contentEditable==="true")&&(Aa=ve,xl=L,Cs=null);break;case"focusout":Cs=xl=Aa=null;break;case"mousedown":Sl=!0;break;case"contextmenu":case"mouseup":case"dragend":Sl=!1,Yu(I,n,G);break;case"selectionchange":if(jg)break;case"keydown":case"keyup":Yu(I,n,G)}var oe;if(gl)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else Da?Du(e,n)&&(de="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(de="onCompositionStart");de&&(Nu&&n.locale!=="ko"&&(Da||de!=="onCompositionStart"?de==="onCompositionEnd"&&Da&&(oe=Cu()):(hn=G,fl="value"in hn?hn.value:hn.textContent,Da=!0)),ve=gr(L,de),0<ve.length&&(de=new Eu(de,e,null,n,G),I.push({event:de,listeners:ve}),oe?de.data=oe:(oe=Au(n),oe!==null&&(de.data=oe)))),(oe=vg?bg(e,n):xg(e,n))&&(de=gr(L,"onBeforeInput"),0<de.length&&(ve=new Eu("onBeforeInput","beforeinput",null,n,G),I.push({event:ve,listeners:de}),ve.data=oe)),u0(I,e,L,n,G)}mh(I,t)})}function Ks(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gr(e,t){for(var n=t+"Capture",s=[];e!==null;){var l=e,u=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||u===null||(l=ms(e,n),l!=null&&s.unshift(Ks(e,l,u)),l=ms(e,t),l!=null&&s.push(Ks(e,l,u))),e.tag===3)return s;e=e.return}return[]}function ts(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function gh(e,t,n,s,l){for(var u=t._reactName,g=[];n!==null&&n!==s;){var b=n,T=b.alternate,L=b.stateNode;if(b=b.tag,T!==null&&T===s)break;b!==5&&b!==26&&b!==27||L===null||(T=L,l?(L=ms(n,u),L!=null&&g.unshift(Ks(n,L,T))):l||(L=ms(n,u),L!=null&&g.push(Ks(n,L,T)))),n=n.return}g.length!==0&&e.push({event:t,listeners:g})}var m0=/\r\n?/g,p0=/\u0000|\uFFFD/g;function yh(e){return(typeof e=="string"?e:""+e).replace(m0,`
`).replace(p0,"")}function vh(e,t){return t=yh(t),yh(e)===t}function yr(){}function Me(e,t,n,s,l,u){switch(n){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Na(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Na(e,""+s);break;case"className":Ci(e,"class",s);break;case"tabIndex":Ci(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Ci(e,n,s);break;case"style":bu(e,s,u);break;case"data":if(t!=="object"){Ci(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=Ei(""+s),e.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(n==="formAction"?(t!=="input"&&Me(e,t,"name",l.name,l,null),Me(e,t,"formEncType",l.formEncType,l,null),Me(e,t,"formMethod",l.formMethod,l,null),Me(e,t,"formTarget",l.formTarget,l,null)):(Me(e,t,"encType",l.encType,l,null),Me(e,t,"method",l.method,l,null),Me(e,t,"target",l.target,l,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(n);break}s=Ei(""+s),e.setAttribute(n,s);break;case"onClick":s!=null&&(e.onclick=yr);break;case"onScroll":s!=null&&Ce("scroll",e);break;case"onScrollEnd":s!=null&&Ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(n=s.__html,n!=null){if(l.children!=null)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}n=Ei(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""+s):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":s===!0?e.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(n,s):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(n,s):e.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(n):e.setAttribute(n,s);break;case"popover":Ce("beforetoggle",e),Ce("toggle",e),Si(e,"popover",s);break;case"xlinkActuate":Kt(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Kt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Kt(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Kt(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Kt(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Kt(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Kt(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Kt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Kt(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Si(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Vp.get(n)||n,Si(e,n,s))}}function Vo(e,t,n,s,l,u){switch(n){case"style":bu(e,s,u);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(i(61));if(n=s.__html,n!=null){if(l.children!=null)throw Error(i(60));e.innerHTML=n}}break;case"children":typeof s=="string"?Na(e,s):(typeof s=="number"||typeof s=="bigint")&&Na(e,""+s);break;case"onScroll":s!=null&&Ce("scroll",e);break;case"onScrollEnd":s!=null&&Ce("scrollend",e);break;case"onClick":s!=null&&(e.onclick=yr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ou.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(l=n.endsWith("Capture"),t=n.slice(2,l?n.length-7:void 0),u=e[ft]||null,u=u!=null?u[n]:null,typeof u=="function"&&e.removeEventListener(t,u,l),typeof s=="function")){typeof u!="function"&&u!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,s,l);break e}n in e?e[n]=s:s===!0?e.setAttribute(n,""):Si(e,n,s)}}}function tt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",e),Ce("load",e);var s=!1,l=!1,u;for(u in n)if(n.hasOwnProperty(u)){var g=n[u];if(g!=null)switch(u){case"src":s=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Me(e,t,u,g,n,null)}}l&&Me(e,t,"srcSet",n.srcSet,n,null),s&&Me(e,t,"src",n.src,n,null);return;case"input":Ce("invalid",e);var b=u=g=l=null,T=null,L=null;for(s in n)if(n.hasOwnProperty(s)){var G=n[s];if(G!=null)switch(s){case"name":l=G;break;case"type":g=G;break;case"checked":T=G;break;case"defaultChecked":L=G;break;case"value":u=G;break;case"defaultValue":b=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,t));break;default:Me(e,t,s,G,n,null)}}pu(e,u,b,T,L,g,l,!1),_i(e);return;case"select":Ce("invalid",e),s=g=u=null;for(l in n)if(n.hasOwnProperty(l)&&(b=n[l],b!=null))switch(l){case"value":u=b;break;case"defaultValue":g=b;break;case"multiple":s=b;default:Me(e,t,l,b,n,null)}t=u,n=g,e.multiple=!!s,t!=null?Ra(e,!!s,t,!1):n!=null&&Ra(e,!!s,n,!0);return;case"textarea":Ce("invalid",e),u=l=s=null;for(g in n)if(n.hasOwnProperty(g)&&(b=n[g],b!=null))switch(g){case"value":s=b;break;case"defaultValue":l=b;break;case"children":u=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:Me(e,t,g,b,n,null)}yu(e,s,l,u),_i(e);return;case"option":for(T in n)if(n.hasOwnProperty(T)&&(s=n[T],s!=null))switch(T){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Me(e,t,T,s,n,null)}return;case"dialog":Ce("beforetoggle",e),Ce("toggle",e),Ce("cancel",e),Ce("close",e);break;case"iframe":case"object":Ce("load",e);break;case"video":case"audio":for(s=0;s<Xs.length;s++)Ce(Xs[s],e);break;case"image":Ce("error",e),Ce("load",e);break;case"details":Ce("toggle",e);break;case"embed":case"source":case"link":Ce("error",e),Ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in n)if(n.hasOwnProperty(L)&&(s=n[L],s!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Me(e,t,L,s,n,null)}return;default:if(rl(t)){for(G in n)n.hasOwnProperty(G)&&(s=n[G],s!==void 0&&Vo(e,t,G,s,n,void 0));return}}for(b in n)n.hasOwnProperty(b)&&(s=n[b],s!=null&&Me(e,t,b,s,n,null))}function g0(e,t,n,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,u=null,g=null,b=null,T=null,L=null,G=null;for(P in n){var I=n[P];if(n.hasOwnProperty(P)&&I!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":T=I;default:s.hasOwnProperty(P)||Me(e,t,P,null,s,I)}}for(var q in s){var P=s[q];if(I=n[q],s.hasOwnProperty(q)&&(P!=null||I!=null))switch(q){case"type":u=P;break;case"name":l=P;break;case"checked":L=P;break;case"defaultChecked":G=P;break;case"value":g=P;break;case"defaultValue":b=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(i(137,t));break;default:P!==I&&Me(e,t,q,P,s,I)}}sl(e,g,b,T,L,G,u,l);return;case"select":P=g=b=q=null;for(u in n)if(T=n[u],n.hasOwnProperty(u)&&T!=null)switch(u){case"value":break;case"multiple":P=T;default:s.hasOwnProperty(u)||Me(e,t,u,null,s,T)}for(l in s)if(u=s[l],T=n[l],s.hasOwnProperty(l)&&(u!=null||T!=null))switch(l){case"value":q=u;break;case"defaultValue":b=u;break;case"multiple":g=u;default:u!==T&&Me(e,t,l,u,s,T)}t=b,n=g,s=P,q!=null?Ra(e,!!n,q,!1):!!s!=!!n&&(t!=null?Ra(e,!!n,t,!0):Ra(e,!!n,n?[]:"",!1));return;case"textarea":P=q=null;for(b in n)if(l=n[b],n.hasOwnProperty(b)&&l!=null&&!s.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Me(e,t,b,null,s,l)}for(g in s)if(l=s[g],u=n[g],s.hasOwnProperty(g)&&(l!=null||u!=null))switch(g){case"value":q=l;break;case"defaultValue":P=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(i(91));break;default:l!==u&&Me(e,t,g,l,s,u)}gu(e,q,P);return;case"option":for(var he in n)if(q=n[he],n.hasOwnProperty(he)&&q!=null&&!s.hasOwnProperty(he))switch(he){case"selected":e.selected=!1;break;default:Me(e,t,he,null,s,q)}for(T in s)if(q=s[T],P=n[T],s.hasOwnProperty(T)&&q!==P&&(q!=null||P!=null))switch(T){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Me(e,t,T,q,s,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fe in n)q=n[fe],n.hasOwnProperty(fe)&&q!=null&&!s.hasOwnProperty(fe)&&Me(e,t,fe,null,s,q);for(L in s)if(q=s[L],P=n[L],s.hasOwnProperty(L)&&q!==P&&(q!=null||P!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,t));break;default:Me(e,t,L,q,s,P)}return;default:if(rl(t)){for(var De in n)q=n[De],n.hasOwnProperty(De)&&q!==void 0&&!s.hasOwnProperty(De)&&Vo(e,t,De,void 0,s,q);for(G in s)q=s[G],P=n[G],!s.hasOwnProperty(G)||q===P||q===void 0&&P===void 0||Vo(e,t,G,q,s,P);return}}for(var k in n)q=n[k],n.hasOwnProperty(k)&&q!=null&&!s.hasOwnProperty(k)&&Me(e,t,k,null,s,q);for(I in s)q=s[I],P=n[I],!s.hasOwnProperty(I)||q===P||q==null&&P==null||Me(e,t,I,q,s,P)}var Qo=null,Fo=null;function vr(e){return e.nodeType===9?e:e.ownerDocument}function bh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xh(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Io(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xo=null;function y0(){var e=window.event;return e&&e.type==="popstate"?e===Xo?!1:(Xo=e,!0):(Xo=null,!1)}var Sh=typeof setTimeout=="function"?setTimeout:void 0,v0=typeof clearTimeout=="function"?clearTimeout:void 0,Ch=typeof Promise=="function"?Promise:void 0,b0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ch<"u"?function(e){return Ch.resolve(null).then(e).catch(x0)}:Sh;function x0(e){setTimeout(function(){throw e})}function Mn(e){return e==="head"}function _h(e,t){var n=t,s=0,l=0;do{var u=n.nextSibling;if(e.removeChild(n),u&&u.nodeType===8)if(n=u.data,n==="/$"){if(0<s&&8>s){n=s;var g=e.ownerDocument;if(n&1&&Zs(g.documentElement),n&2&&Zs(g.body),n&4)for(n=g.head,Zs(n),g=n.firstChild;g;){var b=g.nextSibling,T=g.nodeName;g[ds]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&g.rel.toLowerCase()==="stylesheet"||n.removeChild(g),g=b}}if(l===0){e.removeChild(u),ii(t);return}l--}else n==="$"||n==="$?"||n==="$!"?l++:s=n.charCodeAt(0)-48;else s=0;n=u}while(n);ii(t)}function Ko(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ko(n),el(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function S0(e,t,n,s){for(;e.nodeType===1;){var l=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[ds])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Bt(e.nextSibling),e===null)break}return null}function C0(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Bt(e.nextSibling),e===null))return null;return e}function Zo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function _0(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var s=function(){t(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Bt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Jo=null;function Th(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function Eh(e,t,n){switch(t=vr(n),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Zs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);el(e)}var Ot=new Map,Rh=new Set;function br(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var fn=K.d;K.d={f:T0,r:E0,D:R0,C:N0,L:j0,m:M0,X:A0,S:D0,M:w0};function T0(){var e=fn.f(),t=ur();return e||t}function E0(e){var t=Ca(e);t!==null&&t.tag===5&&t.type==="form"?Qf(t):fn.r(e)}var ns=typeof document>"u"?null:document;function Nh(e,t,n){var s=ns;if(s&&typeof t=="string"&&t){var l=Nt(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof n=="string"&&(l+='[crossorigin="'+n+'"]'),Rh.has(l)||(Rh.add(l),e={rel:e,crossOrigin:n,href:t},s.querySelector(l)===null&&(t=s.createElement("link"),tt(t,"link",e),Ie(t),s.head.appendChild(t)))}}function R0(e){fn.D(e),Nh("dns-prefetch",e,null)}function N0(e,t){fn.C(e,t),Nh("preconnect",e,t)}function j0(e,t,n){fn.L(e,t,n);var s=ns;if(s&&e&&t){var l='link[rel="preload"][as="'+Nt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(l+='[imagesrcset="'+Nt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(l+='[imagesizes="'+Nt(n.imageSizes)+'"]')):l+='[href="'+Nt(e)+'"]';var u=l;switch(t){case"style":u=as(e);break;case"script":u=ss(e)}Ot.has(u)||(e=v({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),Ot.set(u,e),s.querySelector(l)!==null||t==="style"&&s.querySelector(Js(u))||t==="script"&&s.querySelector(Ws(u))||(t=s.createElement("link"),tt(t,"link",e),Ie(t),s.head.appendChild(t)))}}function M0(e,t){fn.m(e,t);var n=ns;if(n&&e){var s=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+Nt(s)+'"][href="'+Nt(e)+'"]',u=l;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=ss(e)}if(!Ot.has(u)&&(e=v({rel:"modulepreload",href:e},t),Ot.set(u,e),n.querySelector(l)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ws(u)))return}s=n.createElement("link"),tt(s,"link",e),Ie(s),n.head.appendChild(s)}}}function D0(e,t,n){fn.S(e,t,n);var s=ns;if(s&&e){var l=_a(s).hoistableStyles,u=as(e);t=t||"default";var g=l.get(u);if(!g){var b={loading:0,preload:null};if(g=s.querySelector(Js(u)))b.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ot.get(u))&&Wo(e,n);var T=g=s.createElement("link");Ie(T),tt(T,"link",e),T._p=new Promise(function(L,G){T.onload=L,T.onerror=G}),T.addEventListener("load",function(){b.loading|=1}),T.addEventListener("error",function(){b.loading|=2}),b.loading|=4,xr(g,t,s)}g={type:"stylesheet",instance:g,count:1,state:b},l.set(u,g)}}}function A0(e,t){fn.X(e,t);var n=ns;if(n&&e){var s=_a(n).hoistableScripts,l=ss(e),u=s.get(l);u||(u=n.querySelector(Ws(l)),u||(e=v({src:e,async:!0},t),(t=Ot.get(l))&&ec(e,t),u=n.createElement("script"),Ie(u),tt(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(l,u))}}function w0(e,t){fn.M(e,t);var n=ns;if(n&&e){var s=_a(n).hoistableScripts,l=ss(e),u=s.get(l);u||(u=n.querySelector(Ws(l)),u||(e=v({src:e,async:!0,type:"module"},t),(t=Ot.get(l))&&ec(e,t),u=n.createElement("script"),Ie(u),tt(u,"link",e),n.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},s.set(l,u))}}function jh(e,t,n,s){var l=(l=ue.current)?br(l):null;if(!l)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=as(n.href),n=_a(l).hoistableStyles,s=n.get(t),s||(s={type:"style",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=as(n.href);var u=_a(l).hoistableStyles,g=u.get(e);if(g||(l=l.ownerDocument||l,g={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,g),(u=l.querySelector(Js(e)))&&!u._p&&(g.instance=u,g.state.loading=5),Ot.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ot.set(e,n),u||k0(l,e,n,g.state))),t&&s===null)throw Error(i(528,""));return g}if(t&&s!==null)throw Error(i(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ss(n),n=_a(l).hoistableScripts,s=n.get(t),s||(s={type:"script",instance:null,count:0,state:null},n.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function as(e){return'href="'+Nt(e)+'"'}function Js(e){return'link[rel="stylesheet"]['+e+"]"}function Mh(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function k0(e,t,n,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),tt(t,"link",n),Ie(t),e.head.appendChild(t))}function ss(e){return'[src="'+Nt(e)+'"]'}function Ws(e){return"script[async]"+e}function Dh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Nt(n.href)+'"]');if(s)return t.instance=s,Ie(s),s;var l=v({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Ie(s),tt(s,"style",l),xr(s,n.precedence,e),t.instance=s;case"stylesheet":l=as(n.href);var u=e.querySelector(Js(l));if(u)return t.state.loading|=4,t.instance=u,Ie(u),u;s=Mh(n),(l=Ot.get(l))&&Wo(s,l),u=(e.ownerDocument||e).createElement("link"),Ie(u);var g=u;return g._p=new Promise(function(b,T){g.onload=b,g.onerror=T}),tt(u,"link",s),t.state.loading|=4,xr(u,n.precedence,e),t.instance=u;case"script":return u=ss(n.src),(l=e.querySelector(Ws(u)))?(t.instance=l,Ie(l),l):(s=n,(l=Ot.get(u))&&(s=v({},n),ec(s,l)),e=e.ownerDocument||e,l=e.createElement("script"),Ie(l),tt(l,"link",s),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,xr(s,n.precedence,e));return t.instance}function xr(e,t,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=s.length?s[s.length-1]:null,u=l,g=0;g<s.length;g++){var b=s[g];if(b.dataset.precedence===t)u=b;else if(u!==l)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Wo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ec(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Sr=null;function Ah(e,t,n){if(Sr===null){var s=new Map,l=Sr=new Map;l.set(n,s)}else l=Sr,s=l.get(n),s||(s=new Map,l.set(n,s));if(s.has(e))return s;for(s.set(e,null),n=n.getElementsByTagName(e),l=0;l<n.length;l++){var u=n[l];if(!(u[ds]||u[nt]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var g=u.getAttribute(t)||"";g=e+g;var b=s.get(g);b?b.push(u):s.set(g,[u])}}return s}function wh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function O0(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function kh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ei=null;function U0(){}function z0(e,t,n){if(ei===null)throw Error(i(475));var s=ei;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var l=as(n.href),u=e.querySelector(Js(l));if(u){e=u._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=Cr.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=u,Ie(u);return}u=e.ownerDocument||e,n=Mh(n),(l=Ot.get(l))&&Wo(n,l),u=u.createElement("link"),Ie(u);var g=u;g._p=new Promise(function(b,T){g.onload=b,g.onerror=T}),tt(u,"link",n),t.instance=u}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(s.count++,t=Cr.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function B0(){if(ei===null)throw Error(i(475));var e=ei;return e.stylesheets&&e.count===0&&tc(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&tc(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Cr(){if(this.count--,this.count===0){if(this.stylesheets)tc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var _r=null;function tc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,_r=new Map,t.forEach(L0,e),_r=null,Cr.call(e))}function L0(e,t){if(!(t.state.loading&4)){var n=_r.get(e);if(n)var s=n.get(null);else{n=new Map,_r.set(e,n);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<l.length;u++){var g=l[u];(g.nodeName==="LINK"||g.getAttribute("media")!=="not all")&&(n.set(g.dataset.precedence,g),s=g)}s&&n.set(null,s)}l=t.instance,g=l.getAttribute("data-precedence"),u=n.get(g)||s,u===s&&n.set(null,l),n.set(g,l),this.count++,s=Cr.bind(this),l.addEventListener("load",s),l.addEventListener("error",s),u?u.parentNode.insertBefore(l,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var ti={$$typeof:E,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function H0(e,t,n,s,l,u,g,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ba(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ba(0),this.hiddenUpdates=ba(null),this.identifierPrefix=s,this.onUncaughtError=l,this.onCaughtError=u,this.onRecoverableError=g,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Oh(e,t,n,s,l,u,g,b,T,L,G,I){return e=new H0(e,t,n,g,b,T,L,I),t=1,u===!0&&(t|=24),u=bt(3,null,null,t),e.current=u,u.stateNode=e,t=Ul(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:s,isDehydrated:n,cache:t},Hl(u),e}function Uh(e){return e?(e=Ua,e):Ua}function zh(e,t,n,s,l,u){l=Uh(l),s.context===null?s.context=l:s.pendingContext=l,s=gn(t),s.payload={element:n},u=u===void 0?null:u,u!==null&&(s.callback=u),n=yn(e,s,t),n!==null&&(Tt(n,e,t),As(n,e,t))}function Bh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function nc(e,t){Bh(e,t),(e=e.alternate)&&Bh(e,t)}function Lh(e){if(e.tag===13){var t=Oa(e,67108864);t!==null&&Tt(t,e,67108864),nc(e,67108864)}}var Tr=!0;function q0(e,t,n,s){var l=$.T;$.T=null;var u=K.p;try{K.p=2,ac(e,t,n,s)}finally{K.p=u,$.T=l}}function $0(e,t,n,s){var l=$.T;$.T=null;var u=K.p;try{K.p=8,ac(e,t,n,s)}finally{K.p=u,$.T=l}}function ac(e,t,n,s){if(Tr){var l=sc(s);if(l===null)Go(e,t,s,Er,n),qh(e,s);else if(Y0(l,e,t,n,s))s.stopPropagation();else if(qh(e,s),t&4&&-1<P0.indexOf(e)){for(;l!==null;){var u=Ca(l);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var g=Ht(u.pendingLanes);if(g!==0){var b=u;for(b.pendingLanes|=2,b.entangledLanes|=2;g;){var T=1<<31-ot(g);b.entanglements[1]|=T,g&=~T}Gt(u),(Re&6)===0&&(or=Et()+500,Is(0))}}break;case 13:b=Oa(u,2),b!==null&&Tt(b,u,2),ur(),nc(u,2)}if(u=sc(s),u===null&&Go(e,t,s,Er,n),u===l)break;l=u}l!==null&&s.stopPropagation()}else Go(e,t,s,null,n)}}function sc(e){return e=ol(e),ic(e)}var Er=null;function ic(e){if(Er=null,e=Sa(e),e!==null){var t=f(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=d(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Er=e,null}function Hh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qr()){case Le:return 2;case yi:return 8;case ya:case Fr:return 32;case vi:return 268435456;default:return 32}default:return 32}}var rc=!1,Dn=null,An=null,wn=null,ni=new Map,ai=new Map,kn=[],P0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qh(e,t){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":wn=null;break;case"pointerover":case"pointerout":ni.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ai.delete(t.pointerId)}}function si(e,t,n,s,l,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:u,targetContainers:[l]},t!==null&&(t=Ca(t),t!==null&&Lh(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Y0(e,t,n,s,l){switch(t){case"focusin":return Dn=si(Dn,e,t,n,s,l),!0;case"dragenter":return An=si(An,e,t,n,s,l),!0;case"mouseover":return wn=si(wn,e,t,n,s,l),!0;case"pointerover":var u=l.pointerId;return ni.set(u,si(ni.get(u)||null,e,t,n,s,l)),!0;case"gotpointercapture":return u=l.pointerId,ai.set(u,si(ai.get(u)||null,e,t,n,s,l)),!0}return!1}function $h(e){var t=Sa(e.target);if(t!==null){var n=f(t);if(n!==null){if(t=n.tag,t===13){if(t=d(n),t!==null){e.blockedOn=t,zp(e.priority,function(){if(n.tag===13){var s=_t();s=fs(s);var l=Oa(n,s);l!==null&&Tt(l,n,s),nc(n,s)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=sc(e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);ll=s,n.target.dispatchEvent(s),ll=null}else return t=Ca(n),t!==null&&Lh(t),e.blockedOn=n,!1;t.shift()}return!0}function Ph(e,t,n){Rr(e)&&n.delete(t)}function G0(){rc=!1,Dn!==null&&Rr(Dn)&&(Dn=null),An!==null&&Rr(An)&&(An=null),wn!==null&&Rr(wn)&&(wn=null),ni.forEach(Ph),ai.forEach(Ph)}function Nr(e,t){e.blockedOn===t&&(e.blockedOn=null,rc||(rc=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,G0)))}var jr=null;function Yh(e){jr!==e&&(jr=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){jr===e&&(jr=null);for(var t=0;t<e.length;t+=3){var n=e[t],s=e[t+1],l=e[t+2];if(typeof s!="function"){if(ic(s||n)===null)continue;break}var u=Ca(n);u!==null&&(e.splice(t,3),t-=3,so(u,{pending:!0,data:l,method:n.method,action:s},s,l))}}))}function ii(e){function t(T){return Nr(T,e)}Dn!==null&&Nr(Dn,e),An!==null&&Nr(An,e),wn!==null&&Nr(wn,e),ni.forEach(t),ai.forEach(t);for(var n=0;n<kn.length;n++){var s=kn[n];s.blockedOn===e&&(s.blockedOn=null)}for(;0<kn.length&&(n=kn[0],n.blockedOn===null);)$h(n),n.blockedOn===null&&kn.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var l=n[s],u=n[s+1],g=l[ft]||null;if(typeof u=="function")g||Yh(n);else if(g){var b=null;if(u&&u.hasAttribute("formAction")){if(l=u,g=u[ft]||null)b=g.formAction;else if(ic(l)!==null)continue}else b=g.action;typeof b=="function"?n[s+1]=b:(n.splice(s,3),s-=3),Yh(n)}}}function lc(e){this._internalRoot=e}Mr.prototype.render=lc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var n=t.current,s=_t();zh(n,s,e,t,null,null)},Mr.prototype.unmount=lc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;zh(e.current,2,null,e,null,null),ur(),t[xa]=null}};function Mr(e){this._internalRoot=e}Mr.prototype.unstable_scheduleHydration=function(e){if(e){var t=iu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kn.length&&t!==0&&t<kn[n].priority;n++);kn.splice(n,0,e),n===0&&$h(e)}};var Gh=a.version;if(Gh!=="19.1.1")throw Error(i(527,Gh,"19.1.1"));K.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=p(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var V0={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dr.isDisabled&&Dr.supportsFiber)try{$n=Dr.inject(V0),lt=Dr}catch{}}return oi.createRoot=function(e,t){if(!o(e))throw Error(i(299));var n=!1,s="",l=rd,u=ld,g=od,b=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(g=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(b=t.unstable_transitionCallbacks)),t=Oh(e,1,!1,null,null,n,s,l,u,g,b,null),e[xa]=t.current,Yo(e),new lc(t)},oi.hydrateRoot=function(e,t,n){if(!o(e))throw Error(i(299));var s=!1,l="",u=rd,g=ld,b=od,T=null,L=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(g=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(T=n.unstable_transitionCallbacks),n.formState!==void 0&&(L=n.formState)),t=Oh(e,1,!0,t,n??null,s,l,u,g,b,T,L),t.context=Uh(null),n=t.current,s=_t(),s=fs(s),l=gn(s),l.callback=null,yn(n,l,s),n=s,t.current.lanes=n,Z(t,n),Gt(t),e[xa]=t.current,Yo(e),new Mr(t)},oi.version="19.1.1",oi}var em;function sy(){if(em)return uc.exports;em=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(a){console.error(a)}}return c(),uc.exports=ay(),uc.exports}var iy=sy();const ry=Pr(iy),ly=({onLogin:c})=>{const[a,r]=U.useState([]),[i,o]=U.useState(""),[f,d]=U.useState("");U.useEffect(()=>{const x=localStorage.getItem("meshchat_identities");x&&r(JSON.parse(x))},[]);const m=x=>{localStorage.setItem("meshchat_identities",JSON.stringify(x)),r(x)},p=x=>{localStorage.setItem("meshchat_current_identity",JSON.stringify(x)),c(x)},y=x=>{const _=a.filter(M=>M.peerId!==x.peerId);m(_)},v=()=>{if(!i.trim()){d("Please enter a username");return}if(a.some(A=>A.username.toLowerCase()===i.toLowerCase())){d("Username already exists");return}const _=`user_${Math.random().toString(36).substr(2,9)}`,M={username:i.trim(),peerId:_},R=[...a,M];m(R),localStorage.setItem("meshchat_current_identity",JSON.stringify(M)),c(M)};return h.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center p-4",children:h.jsxs("div",{className:"bg-slate-800 rounded-lg p-8 max-w-md w-full",children:[h.jsx("h1",{className:"text-2xl font-bold text-sky-400 text-center mb-8",children:"Choose Your Identity"}),h.jsxs("div",{className:"mb-8",children:[h.jsx("h2",{className:"text-lg font-semibold text-slate-300 mb-4",children:"Use Previous Identity"}),a.length>0?h.jsx("div",{className:"space-y-2",children:a.map(x=>h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:()=>p(x),className:"flex-1 p-3 bg-slate-700 hover:bg-slate-600 rounded-lg text-left transition",children:[h.jsx("div",{className:"text-slate-100 font-medium",children:x.username}),h.jsx("div",{className:"text-slate-400 text-sm",children:x.peerId})]}),h.jsx("button",{onClick:()=>y(x),className:"px-3 bg-red-600 hover:bg-red-500 text-white rounded-lg transition",title:"Delete identity",children:""})]},x.peerId))}):h.jsx("div",{className:"text-slate-400 text-center py-4",children:"No previous identities found"})]}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-semibold text-slate-300 mb-4",children:"Create New Identity"}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("input",{type:"text",value:i,onChange:x=>{o(x.target.value),d("")},placeholder:"Enter username",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none"}),f&&h.jsx("div",{className:"text-red-400 text-sm",children:f}),h.jsx("button",{onClick:v,className:"w-full bg-sky-600 hover:bg-sky-500 text-white py-3 px-4 rounded-lg font-medium transition",children:"Create Identity"})]})]})]})})};class rs{static isMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}static async checkCameraSupport(){try{return(await navigator.mediaDevices.enumerateDevices()).some(r=>r.kind==="videoinput")}catch{return!1}}static async requestCameraPermission(){try{return(await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})).getTracks().forEach(r=>r.stop()),!0}catch{return!1}}static getMobilePeerConfig(){return{config:{iceServers:[{urls:"stun:stun.cloudflare.com:3478"},{urls:"stun:stun.l.google.com:19302"}],iceTransportPolicy:"all",iceCandidatePoolSize:10},debug:1}}static checkWebRTCSupport(){return!!(window.RTCPeerConnection||window.webkitRTCPeerConnection)}}const su=class su{static getDefaultSettings(){return{peerServers:[{id:"default",name:"PeerJS Official",host:"0.peerjs.com",port:443,path:"/",secure:!0,enabled:!0}],stunServers:[{id:"cloudflare",name:"Cloudflare STUN",url:"stun:stun.cloudflare.com:3478",enabled:!0},{id:"google1",name:"Google STUN 1",url:"stun:stun.l.google.com:19302",enabled:!1},{id:"google2",name:"Google STUN 2",url:"stun:stun1.l.google.com:19302",enabled:!1}],version:"1.0"}}static loadSettings(){try{const r=localStorage.getItem(this.SETTINGS_KEY);if(r){const i=JSON.parse(r);if(i.version&&i.peerServers&&i.stunServers)return i}}catch(r){console.warn("Failed to load settings:",r)}const a=this.getDefaultSettings();return this.saveSettings(a),a}static saveSettings(a){try{localStorage.setItem(this.SETTINGS_KEY,JSON.stringify(a))}catch(r){console.error("Failed to save settings:",r)}}static getEnabledPeerServer(){return this.loadSettings().peerServers.find(r=>r.enabled)||null}static getEnabledSTUNServers(){return this.loadSettings().stunServers.filter(r=>r.enabled)}static getPeerJSConfig(){const a=this.getEnabledPeerServer(),r=this.getEnabledSTUNServers();console.log(" Generating PeerJS configuration..."),console.log(" Enabled PeerJS server:",a),console.log(" Enabled STUN servers:",r);const i={config:{iceServers:r.length>0?r.map(o=>({urls:o.url})):[{urls:"stun:stun.cloudflare.com:3478"}]},debug:2};return a&&a.enabled?(console.log(` Using custom server: ${a.name} (${a.host})`),a.host!=="0.peerjs.com"?(i.host=a.host,i.port=a.port,i.path=a.path||"/",i.secure=a.secure!==!1,a.key&&a.key.trim()&&(i.key=a.key.trim(),console.log(` Using server key: ${i.key}`)),console.log(" Custom server configuration:",{host:i.host,port:i.port,path:i.path,secure:i.secure,key:i.key})):console.log(" Using default PeerJS official server")):console.log(" No enabled PeerJS server, using default configuration"),console.log(" Final PeerJS configuration:",i),i}static addPeerServer(a){const r=this.loadSettings(),i={...a,id:`peer_${Date.now()}_${Math.random().toString(36).substr(2,6)}`};r.peerServers.push(i),this.saveSettings(r)}static addSTUNServer(a){const r=this.loadSettings(),i={...a,id:`stun_${Date.now()}_${Math.random().toString(36).substr(2,6)}`};r.stunServers.push(i),this.saveSettings(r)}static removePeerServer(a){const r=this.loadSettings();r.peerServers=r.peerServers.filter(i=>i.id!==a),this.saveSettings(r)}static removeSTUNServer(a){const r=this.loadSettings();r.stunServers=r.stunServers.filter(i=>i.id!==a),this.saveSettings(r)}static updatePeerServer(a,r){const i=this.loadSettings(),o=i.peerServers.findIndex(f=>f.id===a);o!==-1&&(i.peerServers[o]={...i.peerServers[o],...r},this.saveSettings(i))}static updateSTUNServer(a,r){const i=this.loadSettings(),o=i.stunServers.findIndex(f=>f.id===a);o!==-1&&(i.stunServers[o]={...i.stunServers[o],...r},this.saveSettings(i))}};su.SETTINGS_KEY="meshchat_system_settings";let gt=su;const hi=class hi{static async initializeServers(){if(!this.initialized)try{const a=gt.loadSettings();console.log(" Loading servers from system settings..."),this.servers=a.peerServers.map((r,i)=>({id:r.id,name:r.name,host:r.host,port:r.port,path:r.path||"/",secure:r.secure!==!1,priority:i+1})),this.servers.length===0&&(console.log(" No servers configured, using default PeerJS server"),this.servers=[{id:"default",name:"PeerJS Official",host:"0.peerjs.com",port:443,path:"/",secure:!0,priority:1}]),console.log(` Loaded ${this.servers.length} server(s) from settings:`,this.servers.map(r=>`${r.name} (${r.host})`)),this.initialized=!0}catch(a){console.error(" Failed to load servers from settings:",a),this.servers=[{id:"default",name:"PeerJS Official",host:"0.peerjs.com",port:443,path:"/",secure:!0,priority:1}],this.initialized=!0}}static async reloadServers(){console.log(" Reloading server configuration..."),this.initialized=!1,this.servers=[],this.healthCheckCache.clear(),await this.initializeServers()}static async checkServerHealth(a){const r=Date.now();try{console.log(` Checking health of ${a.name} (${a.host})`);const i=await this.testWebSocketConnection(a),o=Date.now()-r,f=i;return this.healthCheckCache.set(a.id,{isHealthy:f,responseTime:o,lastCheck:Date.now()}),console.log(`${f?"":""} ${a.name}: ${o}ms`),{isHealthy:f,responseTime:o}}catch(i){const o=Date.now()-r,f=i instanceof Error?i.message:"Unknown error";return console.log(` ${a.name} failed: ${f} (${o}ms)`),this.healthCheckCache.set(a.id,{isHealthy:!1,responseTime:o,lastCheck:Date.now()}),{isHealthy:!1,responseTime:o,error:f}}}static testWebSocketConnection(a){return new Promise(r=>{if(a.host==="0.peerjs.com"){console.log("  Skipping default PeerJS server test, assuming available"),r(!0);return}try{const i=`${a.secure?"https":"http"}://${a.host}:${a.port}`,o=new AbortController,f=setTimeout(()=>o.abort(),3e3);fetch(i,{method:"GET",signal:o.signal,mode:"no-cors"}).then(()=>{clearTimeout(f),r(!0)}).catch(()=>{clearTimeout(f),r(!1)})}catch(i){console.log("  Server test exception:",i),r(!1)}})}static async checkAllServers(){await this.initializeServers(),console.log(" Checking all PeerJS servers...");const a=new Map,r=this.servers.map(async i=>{const o=await this.checkServerHealth(i);return a.set(i.id,{...i,...o}),o});return await Promise.all(r),console.log(" Server health check completed"),a}static async getBestServer(){const a=await this.getCachedHealthyServers();if(a.length>0)return console.log(` Using cached best server: ${a[0].name}`),a[0];console.log(" No cached results, checking server health...");const r=await this.checkAllServers(),i=Array.from(r.values()).filter(f=>f.isHealthy).sort((f,d)=>f.priority!==d.priority?f.priority-d.priority:f.responseTime-d.responseTime);if(i.length===0)return console.warn(" No healthy PeerJS servers found!"),null;const o=i[0];return console.log(` Best server selected: ${o.name} (${o.responseTime}ms)`),o}static async getCachedHealthyServers(){await this.initializeServers();const a=Date.now(),r=6e4;return this.servers.map(i=>{const o=this.healthCheckCache.get(i.id);return!o||a-o.lastCheck>r?null:{...i,isHealthy:o.isHealthy,responseTime:o.responseTime,lastCheck:o.lastCheck}}).filter(i=>i&&i.isHealthy).sort((i,o)=>i.priority!==o.priority?i.priority-o.priority:i.responseTime-o.responseTime)}static async getOptimalPeerConfig(){const a=gt.getPeerJSConfig();if(console.log(" Using user-configured PeerJS settings:",a),a.host&&a.host!=="0.peerjs.com")return console.log(` Applying user custom server: ${a.host}:${a.port}`),a;const r=await this.getBestServer();if(!r)return console.warn(" No healthy servers, using default configuration"),a;const i={config:a.config||{iceServers:[{urls:"stun:stun.cloudflare.com:3478"}]},debug:a.debug||2};return r.host!=="0.peerjs.com"&&(i.host=r.host,i.port=r.port,i.path=r.path||"/",i.secure=r.secure!==!1,a.key&&(i.key=a.key)),console.log(" Final generated PeerJS configuration:",i),i}static addServer(a){const r={...a,id:`custom_${Date.now()}_${Math.random().toString(36).substr(2,6)}`};this.servers.push(r),console.log(` Added custom server: ${r.name}`)}static removeServer(a){const r=this.servers.findIndex(i=>i.id===a);if(r!==-1){const i=this.servers.splice(r,1)[0];this.healthCheckCache.delete(a),console.log(` Removed server: ${i.name}`)}}static async getServerReport(){await this.initializeServers();const a=new Map;this.servers.forEach(o=>{const f=this.healthCheckCache.get(o.id);a.set(o.id,{...o,...f,cacheAge:f?Date.now()-f.lastCheck:null})});const r=Array.from(a.values()).filter(o=>o.isHealthy).length;let i="";return r===0?i=" No healthy servers, recommend checking network connection or adding backup servers":r===1?i=" Recommend adding more backup servers to improve reliability":i=" Server configuration is good",{servers:this.servers,healthStatus:a,recommendation:i}}static clearCache(){this.healthCheckCache.clear(),console.log(" Server health cache cleared")}};hi.servers=[],hi.initialized=!1,hi.healthCheckCache=new Map;let ua=hi;window.checkPeerServers=async()=>{const c=await ua.checkAllServers();return console.log(" Server Health Results:"),c.forEach((a,r)=>{console.log(`${a.isHealthy?"":""} ${a.name}: ${a.responseTime}ms`)}),c};window.getPeerServerReport=async()=>{const c=await ua.getServerReport();return console.log(" PeerJS Server Report:",c),c};window.getBestPeerServer=async()=>{const c=await ua.getBestServer();return console.log(" Best PeerJS Server:",c),c};class oy{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(a){this.flush(),this._parts.push(a)}append(a){this._pieces.push(a)}flush(){if(this._pieces.length>0){const a=new Uint8Array(this._pieces);this._parts.push(a),this._pieces=[]}}toArrayBuffer(){const a=[];for(const r of this._parts)a.push(r);return cy(a).buffer}}function cy(c){let a=0;for(const o of c)a+=o.byteLength;const r=new Uint8Array(a);let i=0;for(const o of c){const f=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);r.set(f,i),i+=o.byteLength}return r}function Pm(c){return new uy(c).unpack()}function Ym(c){const a=new fy,r=a.pack(c);return r instanceof Promise?r.then(()=>a.getBuffer()):a.getBuffer()}class uy{constructor(a){this.index=0,this.dataBuffer=a,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const a=this.unpack_uint8();if(a<128)return a;if((a^224)<32)return(a^224)-32;let r;if((r=a^160)<=15)return this.unpack_raw(r);if((r=a^176)<=15)return this.unpack_string(r);if((r=a^144)<=15)return this.unpack_array(r);if((r=a^128)<=15)return this.unpack_map(r);switch(a){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return r=this.unpack_uint16(),this.unpack_string(r);case 217:return r=this.unpack_uint32(),this.unpack_string(r);case 218:return r=this.unpack_uint16(),this.unpack_raw(r);case 219:return r=this.unpack_uint32(),this.unpack_raw(r);case 220:return r=this.unpack_uint16(),this.unpack_array(r);case 221:return r=this.unpack_uint32(),this.unpack_array(r);case 222:return r=this.unpack_uint16(),this.unpack_map(r);case 223:return r=this.unpack_uint32(),this.unpack_map(r)}}unpack_uint8(){const a=this.dataView[this.index]&255;return this.index++,a}unpack_uint16(){const a=this.read(2),r=(a[0]&255)*256+(a[1]&255);return this.index+=2,r}unpack_uint32(){const a=this.read(4),r=((a[0]*256+a[1])*256+a[2])*256+a[3];return this.index+=4,r}unpack_uint64(){const a=this.read(8),r=((((((a[0]*256+a[1])*256+a[2])*256+a[3])*256+a[4])*256+a[5])*256+a[6])*256+a[7];return this.index+=8,r}unpack_int8(){const a=this.unpack_uint8();return a<128?a:a-256}unpack_int16(){const a=this.unpack_uint16();return a<32768?a:a-65536}unpack_int32(){const a=this.unpack_uint32();return a<2**31?a:a-2**32}unpack_int64(){const a=this.unpack_uint64();return a<2**63?a:a-2**64}unpack_raw(a){if(this.length<this.index+a)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${a} ${this.length}`);const r=this.dataBuffer.slice(this.index,this.index+a);return this.index+=a,r}unpack_string(a){const r=this.read(a);let i=0,o="",f,d;for(;i<a;)f=r[i],f<160?(d=f,i++):(f^192)<32?(d=(f&31)<<6|r[i+1]&63,i+=2):(f^224)<16?(d=(f&15)<<12|(r[i+1]&63)<<6|r[i+2]&63,i+=3):(d=(f&7)<<18|(r[i+1]&63)<<12|(r[i+2]&63)<<6|r[i+3]&63,i+=4),o+=String.fromCodePoint(d);return this.index+=a,o}unpack_array(a){const r=new Array(a);for(let i=0;i<a;i++)r[i]=this.unpack();return r}unpack_map(a){const r={};for(let i=0;i<a;i++){const o=this.unpack();r[o]=this.unpack()}return r}unpack_float(){const a=this.unpack_uint32(),r=a>>31,i=(a>>23&255)-127,o=a&8388607|8388608;return(r===0?1:-1)*o*2**(i-23)}unpack_double(){const a=this.unpack_uint32(),r=this.unpack_uint32(),i=a>>31,o=(a>>20&2047)-1023,d=(a&1048575|1048576)*2**(o-20)+r*2**(o-52);return(i===0?1:-1)*d}read(a){const r=this.index;if(r+a<=this.length)return this.dataView.subarray(r,r+a);throw new Error("BinaryPackFailure: read index out of range")}}class fy{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(a){if(typeof a=="string")this.pack_string(a);else if(typeof a=="number")Math.floor(a)===a?this.pack_integer(a):this.pack_double(a);else if(typeof a=="boolean")a===!0?this._bufferBuilder.append(195):a===!1&&this._bufferBuilder.append(194);else if(a===void 0)this._bufferBuilder.append(192);else if(typeof a=="object")if(a===null)this._bufferBuilder.append(192);else{const r=a.constructor;if(a instanceof Array){const i=this.pack_array(a);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else if(a instanceof ArrayBuffer)this.pack_bin(new Uint8Array(a));else if("BYTES_PER_ELEMENT"in a){const i=a;this.pack_bin(new Uint8Array(i.buffer,i.byteOffset,i.byteLength))}else if(a instanceof Date)this.pack_string(a.toString());else{if(a instanceof Blob)return a.arrayBuffer().then(i=>{this.pack_bin(new Uint8Array(i)),this._bufferBuilder.flush()});if(r==Object||r.toString().startsWith("class")){const i=this.pack_object(a);if(i instanceof Promise)return i.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${r.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof a}" not yet supported`);this._bufferBuilder.flush()}pack_bin(a){const r=a.length;if(r<=15)this.pack_uint8(160+r);else if(r<=65535)this._bufferBuilder.append(218),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(a)}pack_string(a){const r=this._textEncoder.encode(a),i=r.length;if(i<=15)this.pack_uint8(176+i);else if(i<=65535)this._bufferBuilder.append(216),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(i);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(r)}pack_array(a){const r=a.length;if(r<=15)this.pack_uint8(144+r);else if(r<=65535)this._bufferBuilder.append(220),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(r);else throw new Error("Invalid length");const i=o=>{if(o<r){const f=this.pack(a[o]);return f instanceof Promise?f.then(()=>i(o+1)):i(o+1)}};return i(0)}pack_integer(a){if(a>=-32&&a<=127)this._bufferBuilder.append(a&255);else if(a>=0&&a<=255)this._bufferBuilder.append(204),this.pack_uint8(a);else if(a>=-128&&a<=127)this._bufferBuilder.append(208),this.pack_int8(a);else if(a>=0&&a<=65535)this._bufferBuilder.append(205),this.pack_uint16(a);else if(a>=-32768&&a<=32767)this._bufferBuilder.append(209),this.pack_int16(a);else if(a>=0&&a<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(a);else if(a>=-2147483648&&a<=2147483647)this._bufferBuilder.append(210),this.pack_int32(a);else if(a>=-9223372036854776e3&&a<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(a);else if(a>=0&&a<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(a);else throw new Error("Invalid integer")}pack_double(a){let r=0;a<0&&(r=1,a=-a);const i=Math.floor(Math.log(a)/Math.LN2),o=a/2**i-1,f=Math.floor(o*2**52),d=2**32,m=r<<31|i+1023<<20|f/d&1048575,p=f%d;this._bufferBuilder.append(203),this.pack_int32(m),this.pack_int32(p)}pack_object(a){const r=Object.keys(a),i=r.length;if(i<=15)this.pack_uint8(128+i);else if(i<=65535)this._bufferBuilder.append(222),this.pack_uint16(i);else if(i<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(i);else throw new Error("Invalid length");const o=f=>{if(f<r.length){const d=r[f];if(a.hasOwnProperty(d)){this.pack(d);const m=this.pack(a[d]);if(m instanceof Promise)return m.then(()=>o(f+1))}return o(f+1)}};return o(0)}pack_uint8(a){this._bufferBuilder.append(a)}pack_uint16(a){this._bufferBuilder.append(a>>8),this._bufferBuilder.append(a&255)}pack_uint32(a){const r=a&4294967295;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_uint64(a){const r=a/4294967296,i=a%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}pack_int8(a){this._bufferBuilder.append(a&255)}pack_int16(a){this._bufferBuilder.append((a&65280)>>8),this._bufferBuilder.append(a&255)}pack_int32(a){this._bufferBuilder.append(a>>>24&255),this._bufferBuilder.append((a&16711680)>>>16),this._bufferBuilder.append((a&65280)>>>8),this._bufferBuilder.append(a&255)}pack_int64(a){const r=Math.floor(a/4294967296),i=a%2**32;this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255),this._bufferBuilder.append((i&4278190080)>>>24),this._bufferBuilder.append((i&16711680)>>>16),this._bufferBuilder.append((i&65280)>>>8),this._bufferBuilder.append(i&255)}constructor(){this._bufferBuilder=new oy,this._textEncoder=new TextEncoder}}let Gm=!0,Vm=!0;function di(c,a,r){const i=c.match(a);return i&&i.length>=r&&parseFloat(i[r],10)}function fa(c,a,r){if(!c.RTCPeerConnection)return;const i=c.RTCPeerConnection.prototype,o=i.addEventListener;i.addEventListener=function(d,m){if(d!==a)return o.apply(this,arguments);const p=y=>{const v=r(y);v&&(m.handleEvent?m.handleEvent(v):m(v))};return this._eventMap=this._eventMap||{},this._eventMap[a]||(this._eventMap[a]=new Map),this._eventMap[a].set(m,p),o.apply(this,[d,p])};const f=i.removeEventListener;i.removeEventListener=function(d,m){if(d!==a||!this._eventMap||!this._eventMap[a])return f.apply(this,arguments);if(!this._eventMap[a].has(m))return f.apply(this,arguments);const p=this._eventMap[a].get(m);return this._eventMap[a].delete(m),this._eventMap[a].size===0&&delete this._eventMap[a],Object.keys(this._eventMap).length===0&&delete this._eventMap,f.apply(this,[d,p])},Object.defineProperty(i,"on"+a,{get(){return this["_on"+a]},set(d){this["_on"+a]&&(this.removeEventListener(a,this["_on"+a]),delete this["_on"+a]),d&&this.addEventListener(a,this["_on"+a]=d)},enumerable:!0,configurable:!0})}function dy(c){return typeof c!="boolean"?new Error("Argument type: "+typeof c+". Please use a boolean."):(Gm=c,c?"adapter.js logging disabled":"adapter.js logging enabled")}function hy(c){return typeof c!="boolean"?new Error("Argument type: "+typeof c+". Please use a boolean."):(Vm=!c,"adapter.js deprecation warnings "+(c?"disabled":"enabled"))}function Qm(){if(typeof window=="object"){if(Gm)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Wc(c,a){Vm&&console.warn(c+" is deprecated, please use "+a+" instead.")}function my(c){const a={browser:null,version:null};if(typeof c>"u"||!c.navigator||!c.navigator.userAgent)return a.browser="Not a browser.",a;const{navigator:r}=c;if(r.userAgentData&&r.userAgentData.brands){const i=r.userAgentData.brands.find(o=>o.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(r.mozGetUserMedia)a.browser="firefox",a.version=parseInt(di(r.userAgent,/Firefox\/(\d+)\./,1));else if(r.webkitGetUserMedia||c.isSecureContext===!1&&c.webkitRTCPeerConnection)a.browser="chrome",a.version=parseInt(di(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(c.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))a.browser="safari",a.version=parseInt(di(r.userAgent,/AppleWebKit\/(\d+)\./,1)),a.supportsUnifiedPlan=c.RTCRtpTransceiver&&"currentDirection"in c.RTCRtpTransceiver.prototype,a._safariVersion=di(r.userAgent,/Version\/(\d+(\.?\d+))/,1);else return a.browser="Not a supported browser.",a;return a}function tm(c){return Object.prototype.toString.call(c)==="[object Object]"}function Fm(c){return tm(c)?Object.keys(c).reduce(function(a,r){const i=tm(c[r]),o=i?Fm(c[r]):c[r],f=i&&!Object.keys(o).length;return o===void 0||f?a:Object.assign(a,{[r]:o})},{}):c}function qc(c,a,r){!a||r.has(a.id)||(r.set(a.id,a),Object.keys(a).forEach(i=>{i.endsWith("Id")?qc(c,c.get(a[i]),r):i.endsWith("Ids")&&a[i].forEach(o=>{qc(c,c.get(o),r)})}))}function nm(c,a,r){const i=r?"outbound-rtp":"inbound-rtp",o=new Map;if(a===null)return o;const f=[];return c.forEach(d=>{d.type==="track"&&d.trackIdentifier===a.id&&f.push(d)}),f.forEach(d=>{c.forEach(m=>{m.type===i&&m.trackId===d.id&&qc(c,m,o)})}),o}const am=Qm;function Im(c,a){const r=c&&c.navigator;if(!r.mediaDevices)return;const i=function(m){if(typeof m!="object"||m.mandatory||m.optional)return m;const p={};return Object.keys(m).forEach(y=>{if(y==="require"||y==="advanced"||y==="mediaSource")return;const v=typeof m[y]=="object"?m[y]:{ideal:m[y]};v.exact!==void 0&&typeof v.exact=="number"&&(v.min=v.max=v.exact);const x=function(_,M){return _?_+M.charAt(0).toUpperCase()+M.slice(1):M==="deviceId"?"sourceId":M};if(v.ideal!==void 0){p.optional=p.optional||[];let _={};typeof v.ideal=="number"?(_[x("min",y)]=v.ideal,p.optional.push(_),_={},_[x("max",y)]=v.ideal,p.optional.push(_)):(_[x("",y)]=v.ideal,p.optional.push(_))}v.exact!==void 0&&typeof v.exact!="number"?(p.mandatory=p.mandatory||{},p.mandatory[x("",y)]=v.exact):["min","max"].forEach(_=>{v[_]!==void 0&&(p.mandatory=p.mandatory||{},p.mandatory[x(_,y)]=v[_])})}),m.advanced&&(p.optional=(p.optional||[]).concat(m.advanced)),p},o=function(m,p){if(a.version>=61)return p(m);if(m=JSON.parse(JSON.stringify(m)),m&&typeof m.audio=="object"){const y=function(v,x,_){x in v&&!(_ in v)&&(v[_]=v[x],delete v[x])};m=JSON.parse(JSON.stringify(m)),y(m.audio,"autoGainControl","googAutoGainControl"),y(m.audio,"noiseSuppression","googNoiseSuppression"),m.audio=i(m.audio)}if(m&&typeof m.video=="object"){let y=m.video.facingMode;y=y&&(typeof y=="object"?y:{ideal:y});const v=a.version<66;if(y&&(y.exact==="user"||y.exact==="environment"||y.ideal==="user"||y.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!v)){delete m.video.facingMode;let x;if(y.exact==="environment"||y.ideal==="environment"?x=["back","rear"]:(y.exact==="user"||y.ideal==="user")&&(x=["front"]),x)return r.mediaDevices.enumerateDevices().then(_=>{_=_.filter(R=>R.kind==="videoinput");let M=_.find(R=>x.some(A=>R.label.toLowerCase().includes(A)));return!M&&_.length&&x.includes("back")&&(M=_[_.length-1]),M&&(m.video.deviceId=y.exact?{exact:M.deviceId}:{ideal:M.deviceId}),m.video=i(m.video),am("chrome: "+JSON.stringify(m)),p(m)})}m.video=i(m.video)}return am("chrome: "+JSON.stringify(m)),p(m)},f=function(m){return a.version>=64?m:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[m.name]||m.name,message:m.message,constraint:m.constraint||m.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},d=function(m,p,y){o(m,v=>{r.webkitGetUserMedia(v,p,x=>{y&&y(f(x))})})};if(r.getUserMedia=d.bind(r),r.mediaDevices.getUserMedia){const m=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(p){return o(p,y=>m(y).then(v=>{if(y.audio&&!v.getAudioTracks().length||y.video&&!v.getVideoTracks().length)throw v.getTracks().forEach(x=>{x.stop()}),new DOMException("","NotFoundError");return v},v=>Promise.reject(f(v))))}}}function Xm(c){c.MediaStream=c.MediaStream||c.webkitMediaStream}function Km(c){if(typeof c=="object"&&c.RTCPeerConnection&&!("ontrack"in c.RTCPeerConnection.prototype)){Object.defineProperty(c.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const a=c.RTCPeerConnection.prototype.setRemoteDescription;c.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",o=>{let f;c.RTCPeerConnection.prototype.getReceivers?f=this.getReceivers().find(m=>m.track&&m.track.id===o.track.id):f={track:o.track};const d=new Event("track");d.track=o.track,d.receiver=f,d.transceiver={receiver:f},d.streams=[i.stream],this.dispatchEvent(d)}),i.stream.getTracks().forEach(o=>{let f;c.RTCPeerConnection.prototype.getReceivers?f=this.getReceivers().find(m=>m.track&&m.track.id===o.id):f={track:o};const d=new Event("track");d.track=o,d.receiver=f,d.transceiver={receiver:f},d.streams=[i.stream],this.dispatchEvent(d)})},this.addEventListener("addstream",this._ontrackpoly)),a.apply(this,arguments)}}else fa(c,"track",a=>(a.transceiver||Object.defineProperty(a,"transceiver",{value:{receiver:a.receiver}}),a))}function Zm(c){if(typeof c=="object"&&c.RTCPeerConnection&&!("getSenders"in c.RTCPeerConnection.prototype)&&"createDTMFSender"in c.RTCPeerConnection.prototype){const a=function(o,f){return{track:f,get dtmf(){return this._dtmf===void 0&&(f.kind==="audio"?this._dtmf=o.createDTMFSender(f):this._dtmf=null),this._dtmf},_pc:o}};if(!c.RTCPeerConnection.prototype.getSenders){c.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const o=c.RTCPeerConnection.prototype.addTrack;c.RTCPeerConnection.prototype.addTrack=function(m,p){let y=o.apply(this,arguments);return y||(y=a(this,m),this._senders.push(y)),y};const f=c.RTCPeerConnection.prototype.removeTrack;c.RTCPeerConnection.prototype.removeTrack=function(m){f.apply(this,arguments);const p=this._senders.indexOf(m);p!==-1&&this._senders.splice(p,1)}}const r=c.RTCPeerConnection.prototype.addStream;c.RTCPeerConnection.prototype.addStream=function(f){this._senders=this._senders||[],r.apply(this,[f]),f.getTracks().forEach(d=>{this._senders.push(a(this,d))})};const i=c.RTCPeerConnection.prototype.removeStream;c.RTCPeerConnection.prototype.removeStream=function(f){this._senders=this._senders||[],i.apply(this,[f]),f.getTracks().forEach(d=>{const m=this._senders.find(p=>p.track===d);m&&this._senders.splice(this._senders.indexOf(m),1)})}}else if(typeof c=="object"&&c.RTCPeerConnection&&"getSenders"in c.RTCPeerConnection.prototype&&"createDTMFSender"in c.RTCPeerConnection.prototype&&c.RTCRtpSender&&!("dtmf"in c.RTCRtpSender.prototype)){const a=c.RTCPeerConnection.prototype.getSenders;c.RTCPeerConnection.prototype.getSenders=function(){const i=a.apply(this,[]);return i.forEach(o=>o._pc=this),i},Object.defineProperty(c.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Jm(c){if(!(typeof c=="object"&&c.RTCPeerConnection&&c.RTCRtpSender&&c.RTCRtpReceiver))return;if(!("getStats"in c.RTCRtpSender.prototype)){const r=c.RTCPeerConnection.prototype.getSenders;r&&(c.RTCPeerConnection.prototype.getSenders=function(){const f=r.apply(this,[]);return f.forEach(d=>d._pc=this),f});const i=c.RTCPeerConnection.prototype.addTrack;i&&(c.RTCPeerConnection.prototype.addTrack=function(){const f=i.apply(this,arguments);return f._pc=this,f}),c.RTCRtpSender.prototype.getStats=function(){const f=this;return this._pc.getStats().then(d=>nm(d,f.track,!0))}}if(!("getStats"in c.RTCRtpReceiver.prototype)){const r=c.RTCPeerConnection.prototype.getReceivers;r&&(c.RTCPeerConnection.prototype.getReceivers=function(){const o=r.apply(this,[]);return o.forEach(f=>f._pc=this),o}),fa(c,"track",i=>(i.receiver._pc=i.srcElement,i)),c.RTCRtpReceiver.prototype.getStats=function(){const o=this;return this._pc.getStats().then(f=>nm(f,o.track,!1))}}if(!("getStats"in c.RTCRtpSender.prototype&&"getStats"in c.RTCRtpReceiver.prototype))return;const a=c.RTCPeerConnection.prototype.getStats;c.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof c.MediaStreamTrack){const i=arguments[0];let o,f,d;return this.getSenders().forEach(m=>{m.track===i&&(o?d=!0:o=m)}),this.getReceivers().forEach(m=>(m.track===i&&(f?d=!0:f=m),m.track===i)),d||o&&f?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):o?o.getStats():f?f.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return a.apply(this,arguments)}}function Wm(c){c.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(d=>this._shimmedLocalStreams[d][0])};const a=c.RTCPeerConnection.prototype.addTrack;c.RTCPeerConnection.prototype.addTrack=function(d,m){if(!m)return a.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const p=a.apply(this,arguments);return this._shimmedLocalStreams[m.id]?this._shimmedLocalStreams[m.id].indexOf(p)===-1&&this._shimmedLocalStreams[m.id].push(p):this._shimmedLocalStreams[m.id]=[m,p],p};const r=c.RTCPeerConnection.prototype.addStream;c.RTCPeerConnection.prototype.addStream=function(d){this._shimmedLocalStreams=this._shimmedLocalStreams||{},d.getTracks().forEach(y=>{if(this.getSenders().find(x=>x.track===y))throw new DOMException("Track already exists.","InvalidAccessError")});const m=this.getSenders();r.apply(this,arguments);const p=this.getSenders().filter(y=>m.indexOf(y)===-1);this._shimmedLocalStreams[d.id]=[d].concat(p)};const i=c.RTCPeerConnection.prototype.removeStream;c.RTCPeerConnection.prototype.removeStream=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[d.id],i.apply(this,arguments)};const o=c.RTCPeerConnection.prototype.removeTrack;c.RTCPeerConnection.prototype.removeTrack=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},d&&Object.keys(this._shimmedLocalStreams).forEach(m=>{const p=this._shimmedLocalStreams[m].indexOf(d);p!==-1&&this._shimmedLocalStreams[m].splice(p,1),this._shimmedLocalStreams[m].length===1&&delete this._shimmedLocalStreams[m]}),o.apply(this,arguments)}}function ep(c,a){if(!c.RTCPeerConnection)return;if(c.RTCPeerConnection.prototype.addTrack&&a.version>=65)return Wm(c);const r=c.RTCPeerConnection.prototype.getLocalStreams;c.RTCPeerConnection.prototype.getLocalStreams=function(){const v=r.apply(this);return this._reverseStreams=this._reverseStreams||{},v.map(x=>this._reverseStreams[x.id])};const i=c.RTCPeerConnection.prototype.addStream;c.RTCPeerConnection.prototype.addStream=function(v){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},v.getTracks().forEach(x=>{if(this.getSenders().find(M=>M.track===x))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[v.id]){const x=new c.MediaStream(v.getTracks());this._streams[v.id]=x,this._reverseStreams[x.id]=v,v=x}i.apply(this,[v])};const o=c.RTCPeerConnection.prototype.removeStream;c.RTCPeerConnection.prototype.removeStream=function(v){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[v.id]||v]),delete this._reverseStreams[this._streams[v.id]?this._streams[v.id].id:v.id],delete this._streams[v.id]},c.RTCPeerConnection.prototype.addTrack=function(v,x){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const _=[].slice.call(arguments,1);if(_.length!==1||!_[0].getTracks().find(A=>A===v))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(A=>A.track===v))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const R=this._streams[x.id];if(R)R.addTrack(v),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const A=new c.MediaStream([v]);this._streams[x.id]=A,this._reverseStreams[A.id]=x,this.addStream(A)}return this.getSenders().find(A=>A.track===v)};function f(y,v){let x=v.sdp;return Object.keys(y._reverseStreams||[]).forEach(_=>{const M=y._reverseStreams[_],R=y._streams[M.id];x=x.replace(new RegExp(R.id,"g"),M.id)}),new RTCSessionDescription({type:v.type,sdp:x})}function d(y,v){let x=v.sdp;return Object.keys(y._reverseStreams||[]).forEach(_=>{const M=y._reverseStreams[_],R=y._streams[M.id];x=x.replace(new RegExp(M.id,"g"),R.id)}),new RTCSessionDescription({type:v.type,sdp:x})}["createOffer","createAnswer"].forEach(function(y){const v=c.RTCPeerConnection.prototype[y],x={[y](){const _=arguments;return arguments.length&&typeof arguments[0]=="function"?v.apply(this,[R=>{const A=f(this,R);_[0].apply(null,[A])},R=>{_[1]&&_[1].apply(null,R)},arguments[2]]):v.apply(this,arguments).then(R=>f(this,R))}};c.RTCPeerConnection.prototype[y]=x[y]});const m=c.RTCPeerConnection.prototype.setLocalDescription;c.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?m.apply(this,arguments):(arguments[0]=d(this,arguments[0]),m.apply(this,arguments))};const p=Object.getOwnPropertyDescriptor(c.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(c.RTCPeerConnection.prototype,"localDescription",{get(){const y=p.get.apply(this);return y.type===""?y:f(this,y)}}),c.RTCPeerConnection.prototype.removeTrack=function(v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!v._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(v._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let _;Object.keys(this._streams).forEach(M=>{this._streams[M].getTracks().find(A=>v.track===A)&&(_=this._streams[M])}),_&&(_.getTracks().length===1?this.removeStream(this._reverseStreams[_.id]):_.removeTrack(v.track),this.dispatchEvent(new Event("negotiationneeded")))}}function $c(c,a){!c.RTCPeerConnection&&c.webkitRTCPeerConnection&&(c.RTCPeerConnection=c.webkitRTCPeerConnection),c.RTCPeerConnection&&a.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const i=c.RTCPeerConnection.prototype[r],o={[r](){return arguments[0]=new(r==="addIceCandidate"?c.RTCIceCandidate:c.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};c.RTCPeerConnection.prototype[r]=o[r]})}function tp(c,a){fa(c,"negotiationneeded",r=>{const i=r.target;if(!((a.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return r})}const sm=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:tp,shimAddTrackRemoveTrack:ep,shimAddTrackRemoveTrackWithNative:Wm,shimGetSendersWithDtmf:Zm,shimGetUserMedia:Im,shimMediaStream:Xm,shimOnTrack:Km,shimPeerConnection:$c,shimSenderReceiverGetStats:Jm},Symbol.toStringTag,{value:"Module"}));function np(c,a){const r=c&&c.navigator,i=c&&c.MediaStreamTrack;if(r.getUserMedia=function(o,f,d){Wc("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(o).then(f,d)},!(a.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const o=function(d,m,p){m in d&&!(p in d)&&(d[p]=d[m],delete d[m])},f=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(d){return typeof d=="object"&&typeof d.audio=="object"&&(d=JSON.parse(JSON.stringify(d)),o(d.audio,"autoGainControl","mozAutoGainControl"),o(d.audio,"noiseSuppression","mozNoiseSuppression")),f(d)},i&&i.prototype.getSettings){const d=i.prototype.getSettings;i.prototype.getSettings=function(){const m=d.apply(this,arguments);return o(m,"mozAutoGainControl","autoGainControl"),o(m,"mozNoiseSuppression","noiseSuppression"),m}}if(i&&i.prototype.applyConstraints){const d=i.prototype.applyConstraints;i.prototype.applyConstraints=function(m){return this.kind==="audio"&&typeof m=="object"&&(m=JSON.parse(JSON.stringify(m)),o(m,"autoGainControl","mozAutoGainControl"),o(m,"noiseSuppression","mozNoiseSuppression")),d.apply(this,[m])}}}}function py(c,a){c.navigator.mediaDevices&&"getDisplayMedia"in c.navigator.mediaDevices||c.navigator.mediaDevices&&(c.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const o=new DOMException("getDisplayMedia without video constraints is undefined");return o.name="NotFoundError",o.code=8,Promise.reject(o)}return i.video===!0?i.video={mediaSource:a}:i.video.mediaSource=a,c.navigator.mediaDevices.getUserMedia(i)})}function ap(c){typeof c=="object"&&c.RTCTrackEvent&&"receiver"in c.RTCTrackEvent.prototype&&!("transceiver"in c.RTCTrackEvent.prototype)&&Object.defineProperty(c.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Pc(c,a){if(typeof c!="object"||!(c.RTCPeerConnection||c.mozRTCPeerConnection))return;!c.RTCPeerConnection&&c.mozRTCPeerConnection&&(c.RTCPeerConnection=c.mozRTCPeerConnection),a.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(o){const f=c.RTCPeerConnection.prototype[o],d={[o](){return arguments[0]=new(o==="addIceCandidate"?c.RTCIceCandidate:c.RTCSessionDescription)(arguments[0]),f.apply(this,arguments)}};c.RTCPeerConnection.prototype[o]=d[o]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=c.RTCPeerConnection.prototype.getStats;c.RTCPeerConnection.prototype.getStats=function(){const[f,d,m]=arguments;return i.apply(this,[f||null]).then(p=>{if(a.version<53&&!d)try{p.forEach(y=>{y.type=r[y.type]||y.type})}catch(y){if(y.name!=="TypeError")throw y;p.forEach((v,x)=>{p.set(x,Object.assign({},v,{type:r[v.type]||v.type}))})}return p}).then(d,m)}}function sp(c){if(!(typeof c=="object"&&c.RTCPeerConnection&&c.RTCRtpSender)||c.RTCRtpSender&&"getStats"in c.RTCRtpSender.prototype)return;const a=c.RTCPeerConnection.prototype.getSenders;a&&(c.RTCPeerConnection.prototype.getSenders=function(){const o=a.apply(this,[]);return o.forEach(f=>f._pc=this),o});const r=c.RTCPeerConnection.prototype.addTrack;r&&(c.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),c.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ip(c){if(!(typeof c=="object"&&c.RTCPeerConnection&&c.RTCRtpSender)||c.RTCRtpSender&&"getStats"in c.RTCRtpReceiver.prototype)return;const a=c.RTCPeerConnection.prototype.getReceivers;a&&(c.RTCPeerConnection.prototype.getReceivers=function(){const i=a.apply(this,[]);return i.forEach(o=>o._pc=this),i}),fa(c,"track",r=>(r.receiver._pc=r.srcElement,r)),c.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function rp(c){!c.RTCPeerConnection||"removeStream"in c.RTCPeerConnection.prototype||(c.RTCPeerConnection.prototype.removeStream=function(r){Wc("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&r.getTracks().includes(i.track)&&this.removeTrack(i)})})}function lp(c){c.DataChannel&&!c.RTCDataChannel&&(c.RTCDataChannel=c.DataChannel)}function op(c){if(!(typeof c=="object"&&c.RTCPeerConnection))return;const a=c.RTCPeerConnection.prototype.addTransceiver;a&&(c.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const o=i.length>0;o&&i.forEach(d=>{if("rid"in d&&!/^[a-z0-9]{0,16}$/i.test(d.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in d&&!(parseFloat(d.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in d&&!(parseFloat(d.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const f=a.apply(this,arguments);if(o){const{sender:d}=f,m=d.getParameters();(!("encodings"in m)||m.encodings.length===1&&Object.keys(m.encodings[0]).length===0)&&(m.encodings=i,d.sendEncodings=i,this.setParametersPromises.push(d.setParameters(m).then(()=>{delete d.sendEncodings}).catch(()=>{delete d.sendEncodings})))}return f})}function cp(c){if(!(typeof c=="object"&&c.RTCRtpSender))return;const a=c.RTCRtpSender.prototype.getParameters;a&&(c.RTCRtpSender.prototype.getParameters=function(){const i=a.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function up(c){if(!(typeof c=="object"&&c.RTCPeerConnection))return;const a=c.RTCPeerConnection.prototype.createOffer;c.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>a.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):a.apply(this,arguments)}}function fp(c){if(!(typeof c=="object"&&c.RTCPeerConnection))return;const a=c.RTCPeerConnection.prototype.createAnswer;c.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>a.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):a.apply(this,arguments)}}const im=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:op,shimCreateAnswer:fp,shimCreateOffer:up,shimGetDisplayMedia:py,shimGetParameters:cp,shimGetUserMedia:np,shimOnTrack:ap,shimPeerConnection:Pc,shimRTCDataChannel:lp,shimReceiverGetStats:ip,shimRemoveStream:rp,shimSenderGetStats:sp},Symbol.toStringTag,{value:"Module"}));function dp(c){if(!(typeof c!="object"||!c.RTCPeerConnection)){if("getLocalStreams"in c.RTCPeerConnection.prototype||(c.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in c.RTCPeerConnection.prototype)){const a=c.RTCPeerConnection.prototype.addTrack;c.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(o=>a.call(this,o,i)),i.getVideoTracks().forEach(o=>a.call(this,o,i))},c.RTCPeerConnection.prototype.addTrack=function(i,...o){return o&&o.forEach(f=>{this._localStreams?this._localStreams.includes(f)||this._localStreams.push(f):this._localStreams=[f]}),a.apply(this,arguments)}}"removeStream"in c.RTCPeerConnection.prototype||(c.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(r);if(i===-1)return;this._localStreams.splice(i,1);const o=r.getTracks();this.getSenders().forEach(f=>{o.includes(f.track)&&this.removeTrack(f)})})}}function hp(c){if(!(typeof c!="object"||!c.RTCPeerConnection)&&("getRemoteStreams"in c.RTCPeerConnection.prototype||(c.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in c.RTCPeerConnection.prototype))){Object.defineProperty(c.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(o=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(o))return;this._remoteStreams.push(o);const f=new Event("addstream");f.stream=o,this.dispatchEvent(f)})})}});const a=c.RTCPeerConnection.prototype.setRemoteDescription;c.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(o){o.streams.forEach(f=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(f)>=0)return;i._remoteStreams.push(f);const d=new Event("addstream");d.stream=f,i.dispatchEvent(d)})}),a.apply(i,arguments)}}}function mp(c){if(typeof c!="object"||!c.RTCPeerConnection)return;const a=c.RTCPeerConnection.prototype,r=a.createOffer,i=a.createAnswer,o=a.setLocalDescription,f=a.setRemoteDescription,d=a.addIceCandidate;a.createOffer=function(y,v){const x=arguments.length>=2?arguments[2]:arguments[0],_=r.apply(this,[x]);return v?(_.then(y,v),Promise.resolve()):_},a.createAnswer=function(y,v){const x=arguments.length>=2?arguments[2]:arguments[0],_=i.apply(this,[x]);return v?(_.then(y,v),Promise.resolve()):_};let m=function(p,y,v){const x=o.apply(this,[p]);return v?(x.then(y,v),Promise.resolve()):x};a.setLocalDescription=m,m=function(p,y,v){const x=f.apply(this,[p]);return v?(x.then(y,v),Promise.resolve()):x},a.setRemoteDescription=m,m=function(p,y,v){const x=d.apply(this,[p]);return v?(x.then(y,v),Promise.resolve()):x},a.addIceCandidate=m}function pp(c){const a=c&&c.navigator;if(a.mediaDevices&&a.mediaDevices.getUserMedia){const r=a.mediaDevices,i=r.getUserMedia.bind(r);a.mediaDevices.getUserMedia=o=>i(gp(o))}!a.getUserMedia&&a.mediaDevices&&a.mediaDevices.getUserMedia&&(a.getUserMedia=(function(i,o,f){a.mediaDevices.getUserMedia(i).then(o,f)}).bind(a))}function gp(c){return c&&c.video!==void 0?Object.assign({},c,{video:Fm(c.video)}):c}function yp(c){if(!c.RTCPeerConnection)return;const a=c.RTCPeerConnection;c.RTCPeerConnection=function(i,o){if(i&&i.iceServers){const f=[];for(let d=0;d<i.iceServers.length;d++){let m=i.iceServers[d];m.urls===void 0&&m.url?(Wc("RTCIceServer.url","RTCIceServer.urls"),m=JSON.parse(JSON.stringify(m)),m.urls=m.url,delete m.url,f.push(m)):f.push(i.iceServers[d])}i.iceServers=f}return new a(i,o)},c.RTCPeerConnection.prototype=a.prototype,"generateCertificate"in a&&Object.defineProperty(c.RTCPeerConnection,"generateCertificate",{get(){return a.generateCertificate}})}function vp(c){typeof c=="object"&&c.RTCTrackEvent&&"receiver"in c.RTCTrackEvent.prototype&&!("transceiver"in c.RTCTrackEvent.prototype)&&Object.defineProperty(c.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function bp(c){const a=c.RTCPeerConnection.prototype.createOffer;c.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const o=this.getTransceivers().find(d=>d.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):i.offerToReceiveAudio===!0&&!o&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const f=this.getTransceivers().find(d=>d.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&f?f.direction==="sendrecv"?f.setDirection?f.setDirection("sendonly"):f.direction="sendonly":f.direction==="recvonly"&&(f.setDirection?f.setDirection("inactive"):f.direction="inactive"):i.offerToReceiveVideo===!0&&!f&&this.addTransceiver("video",{direction:"recvonly"})}return a.apply(this,arguments)}}function xp(c){typeof c!="object"||c.AudioContext||(c.AudioContext=c.webkitAudioContext)}const rm=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:xp,shimCallbacksAPI:mp,shimConstraints:gp,shimCreateOfferLegacy:bp,shimGetUserMedia:pp,shimLocalStreamsAPI:dp,shimRTCIceServerUrls:yp,shimRemoteStreamsAPI:hp,shimTrackEventTransceiver:vp},Symbol.toStringTag,{value:"Module"}));var mc={exports:{}},lm;function gy(){return lm||(lm=1,(function(c){const a={};a.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},a.localCName=a.generateIdentifier(),a.splitLines=function(r){return r.trim().split(`
`).map(i=>i.trim())},a.splitSections=function(r){return r.split(`
m=`).map((o,f)=>(f>0?"m="+o:o).trim()+`\r
`)},a.getDescription=function(r){const i=a.splitSections(r);return i&&i[0]},a.getMediaSections=function(r){const i=a.splitSections(r);return i.shift(),i},a.matchPrefix=function(r,i){return a.splitLines(r).filter(o=>o.indexOf(i)===0)},a.parseCandidate=function(r){let i;r.indexOf("a=candidate:")===0?i=r.substring(12).split(" "):i=r.substring(10).split(" ");const o={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let f=8;f<i.length;f+=2)switch(i[f]){case"raddr":o.relatedAddress=i[f+1];break;case"rport":o.relatedPort=parseInt(i[f+1],10);break;case"tcptype":o.tcpType=i[f+1];break;case"ufrag":o.ufrag=i[f+1],o.usernameFragment=i[f+1];break;default:o[i[f]]===void 0&&(o[i[f]]=i[f+1]);break}return o},a.writeCandidate=function(r){const i=[];i.push(r.foundation);const o=r.component;o==="rtp"?i.push(1):o==="rtcp"?i.push(2):i.push(o),i.push(r.protocol.toUpperCase()),i.push(r.priority),i.push(r.address||r.ip),i.push(r.port);const f=r.type;return i.push("typ"),i.push(f),f!=="host"&&r.relatedAddress&&r.relatedPort&&(i.push("raddr"),i.push(r.relatedAddress),i.push("rport"),i.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(i.push("ufrag"),i.push(r.usernameFragment||r.ufrag)),"candidate:"+i.join(" ")},a.parseIceOptions=function(r){return r.substring(14).split(" ")},a.parseRtpMap=function(r){let i=r.substring(9).split(" ");const o={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),o.name=i[0],o.clockRate=parseInt(i[1],10),o.channels=i.length===3?parseInt(i[2],10):1,o.numChannels=o.channels,o},a.writeRtpMap=function(r){let i=r.payloadType;r.preferredPayloadType!==void 0&&(i=r.preferredPayloadType);const o=r.channels||r.numChannels||1;return"a=rtpmap:"+i+" "+r.name+"/"+r.clockRate+(o!==1?"/"+o:"")+`\r
`},a.parseExtmap=function(r){const i=r.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},a.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},a.parseFmtp=function(r){const i={};let o;const f=r.substring(r.indexOf(" ")+1).split(";");for(let d=0;d<f.length;d++)o=f[d].trim().split("="),i[o[0].trim()]=o[1];return i},a.writeFmtp=function(r){let i="",o=r.payloadType;if(r.preferredPayloadType!==void 0&&(o=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const f=[];Object.keys(r.parameters).forEach(d=>{r.parameters[d]!==void 0?f.push(d+"="+r.parameters[d]):f.push(d)}),i+="a=fmtp:"+o+" "+f.join(";")+`\r
`}return i},a.parseRtcpFb=function(r){const i=r.substring(r.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},a.writeRtcpFb=function(r){let i="",o=r.payloadType;return r.preferredPayloadType!==void 0&&(o=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(f=>{i+="a=rtcp-fb:"+o+" "+f.type+(f.parameter&&f.parameter.length?" "+f.parameter:"")+`\r
`}),i},a.parseSsrcMedia=function(r){const i=r.indexOf(" "),o={ssrc:parseInt(r.substring(7,i),10)},f=r.indexOf(":",i);return f>-1?(o.attribute=r.substring(i+1,f),o.value=r.substring(f+1)):o.attribute=r.substring(i+1),o},a.parseSsrcGroup=function(r){const i=r.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(o=>parseInt(o,10))}},a.getMid=function(r){const i=a.matchPrefix(r,"a=mid:")[0];if(i)return i.substring(6)},a.parseFingerprint=function(r){const i=r.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},a.getDtlsParameters=function(r,i){return{role:"auto",fingerprints:a.matchPrefix(r+i,"a=fingerprint:").map(a.parseFingerprint)}},a.writeDtlsParameters=function(r,i){let o="a=setup:"+i+`\r
`;return r.fingerprints.forEach(f=>{o+="a=fingerprint:"+f.algorithm+" "+f.value+`\r
`}),o},a.parseCryptoLine=function(r){const i=r.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},a.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?a.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},a.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const i=r.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},a.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},a.getCryptoParameters=function(r,i){return a.matchPrefix(r+i,"a=crypto:").map(a.parseCryptoLine)},a.getIceParameters=function(r,i){const o=a.matchPrefix(r+i,"a=ice-ufrag:")[0],f=a.matchPrefix(r+i,"a=ice-pwd:")[0];return o&&f?{usernameFragment:o.substring(12),password:f.substring(10)}:null},a.writeIceParameters=function(r){let i="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(i+=`a=ice-lite\r
`),i},a.parseRtpParameters=function(r){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},f=a.splitLines(r)[0].split(" ");i.profile=f[2];for(let m=3;m<f.length;m++){const p=f[m],y=a.matchPrefix(r,"a=rtpmap:"+p+" ")[0];if(y){const v=a.parseRtpMap(y),x=a.matchPrefix(r,"a=fmtp:"+p+" ");switch(v.parameters=x.length?a.parseFmtp(x[0]):{},v.rtcpFeedback=a.matchPrefix(r,"a=rtcp-fb:"+p+" ").map(a.parseRtcpFb),i.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(v.name.toUpperCase());break}}}a.matchPrefix(r,"a=extmap:").forEach(m=>{i.headerExtensions.push(a.parseExtmap(m))});const d=a.matchPrefix(r,"a=rtcp-fb:* ").map(a.parseRtcpFb);return i.codecs.forEach(m=>{d.forEach(p=>{m.rtcpFeedback.find(v=>v.type===p.type&&v.parameter===p.parameter)||m.rtcpFeedback.push(p)})}),i},a.writeRtpDescription=function(r,i){let o="";o+="m="+r+" ",o+=i.codecs.length>0?"9":"0",o+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",o+=i.codecs.map(d=>d.preferredPayloadType!==void 0?d.preferredPayloadType:d.payloadType).join(" ")+`\r
`,o+=`c=IN IP4 0.0.0.0\r
`,o+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(d=>{o+=a.writeRtpMap(d),o+=a.writeFmtp(d),o+=a.writeRtcpFb(d)});let f=0;return i.codecs.forEach(d=>{d.maxptime>f&&(f=d.maxptime)}),f>0&&(o+="a=maxptime:"+f+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(d=>{o+=a.writeExtmap(d)}),o},a.parseRtpEncodingParameters=function(r){const i=[],o=a.parseRtpParameters(r),f=o.fecMechanisms.indexOf("RED")!==-1,d=o.fecMechanisms.indexOf("ULPFEC")!==-1,m=a.matchPrefix(r,"a=ssrc:").map(_=>a.parseSsrcMedia(_)).filter(_=>_.attribute==="cname"),p=m.length>0&&m[0].ssrc;let y;const v=a.matchPrefix(r,"a=ssrc-group:FID").map(_=>_.substring(17).split(" ").map(R=>parseInt(R,10)));v.length>0&&v[0].length>1&&v[0][0]===p&&(y=v[0][1]),o.codecs.forEach(_=>{if(_.name.toUpperCase()==="RTX"&&_.parameters.apt){let M={ssrc:p,codecPayloadType:parseInt(_.parameters.apt,10)};p&&y&&(M.rtx={ssrc:y}),i.push(M),f&&(M=JSON.parse(JSON.stringify(M)),M.fec={ssrc:p,mechanism:d?"red+ulpfec":"red"},i.push(M))}}),i.length===0&&p&&i.push({ssrc:p});let x=a.matchPrefix(r,"b=");return x.length&&(x[0].indexOf("b=TIAS:")===0?x=parseInt(x[0].substring(7),10):x[0].indexOf("b=AS:")===0?x=parseInt(x[0].substring(5),10)*1e3*.95-2e3*8:x=void 0,i.forEach(_=>{_.maxBitrate=x})),i},a.parseRtcpParameters=function(r){const i={},o=a.matchPrefix(r,"a=ssrc:").map(m=>a.parseSsrcMedia(m)).filter(m=>m.attribute==="cname")[0];o&&(i.cname=o.value,i.ssrc=o.ssrc);const f=a.matchPrefix(r,"a=rtcp-rsize");i.reducedSize=f.length>0,i.compound=f.length===0;const d=a.matchPrefix(r,"a=rtcp-mux");return i.mux=d.length>0,i},a.writeRtcpParameters=function(r){let i="";return r.reducedSize&&(i+=`a=rtcp-rsize\r
`),r.mux&&(i+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(i+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),i},a.parseMsid=function(r){let i;const o=a.matchPrefix(r,"a=msid:");if(o.length===1)return i=o[0].substring(7).split(" "),{stream:i[0],track:i[1]};const f=a.matchPrefix(r,"a=ssrc:").map(d=>a.parseSsrcMedia(d)).filter(d=>d.attribute==="msid");if(f.length>0)return i=f[0].value.split(" "),{stream:i[0],track:i[1]}},a.parseSctpDescription=function(r){const i=a.parseMLine(r),o=a.matchPrefix(r,"a=max-message-size:");let f;o.length>0&&(f=parseInt(o[0].substring(19),10)),isNaN(f)&&(f=65536);const d=a.matchPrefix(r,"a=sctp-port:");if(d.length>0)return{port:parseInt(d[0].substring(12),10),protocol:i.fmt,maxMessageSize:f};const m=a.matchPrefix(r,"a=sctpmap:");if(m.length>0){const p=m[0].substring(10).split(" ");return{port:parseInt(p[0],10),protocol:p[1],maxMessageSize:f}}},a.writeSctpDescription=function(r,i){let o=[];return r.protocol!=="DTLS/SCTP"?o=["m="+r.kind+" 9 "+r.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:o=["m="+r.kind+" 9 "+r.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&o.push("a=max-message-size:"+i.maxMessageSize+`\r
`),o.join("")},a.generateSessionId=function(){return Math.random().toString().substr(2,22)},a.writeSessionBoilerplate=function(r,i,o){let f;const d=i!==void 0?i:2;return r?f=r:f=a.generateSessionId(),`v=0\r
o=`+(o||"thisisadapterortc")+" "+f+" "+d+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},a.getDirection=function(r,i){const o=a.splitLines(r);for(let f=0;f<o.length;f++)switch(o[f]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return o[f].substring(2)}return i?a.getDirection(i):"sendrecv"},a.getKind=function(r){return a.splitLines(r)[0].split(" ")[0].substring(2)},a.isRejected=function(r){return r.split(" ",2)[1]==="0"},a.parseMLine=function(r){const o=a.splitLines(r)[0].substring(2).split(" ");return{kind:o[0],port:parseInt(o[1],10),protocol:o[2],fmt:o.slice(3).join(" ")}},a.parseOLine=function(r){const o=a.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:o[0],sessionId:o[1],sessionVersion:parseInt(o[2],10),netType:o[3],addressType:o[4],address:o[5]}},a.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const i=a.splitLines(r);for(let o=0;o<i.length;o++)if(i[o].length<2||i[o].charAt(1)!=="=")return!1;return!0},c.exports=a})(mc)),mc.exports}var Sp=gy();const ls=Pr(Sp),yy=I0({__proto__:null,default:ls},[Sp]);function wr(c){if(!c.RTCIceCandidate||c.RTCIceCandidate&&"foundation"in c.RTCIceCandidate.prototype)return;const a=c.RTCIceCandidate;c.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const o=new a(i),f=ls.parseCandidate(i.candidate);for(const d in f)d in o||Object.defineProperty(o,d,{value:f[d]});return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new a(i)},c.RTCIceCandidate.prototype=a.prototype,fa(c,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new c.RTCIceCandidate(r.candidate),writable:"false"}),r))}function Yc(c){!c.RTCIceCandidate||c.RTCIceCandidate&&"relayProtocol"in c.RTCIceCandidate.prototype||fa(c,"icecandidate",a=>{if(a.candidate){const r=ls.parseCandidate(a.candidate.candidate);r.type==="relay"&&(a.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return a})}function kr(c,a){if(!c.RTCPeerConnection)return;"sctp"in c.RTCPeerConnection.prototype||Object.defineProperty(c.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(m){if(!m||!m.sdp)return!1;const p=ls.splitSections(m.sdp);return p.shift(),p.some(y=>{const v=ls.parseMLine(y);return v&&v.kind==="application"&&v.protocol.indexOf("SCTP")!==-1})},i=function(m){const p=m.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(p===null||p.length<2)return-1;const y=parseInt(p[1],10);return y!==y?-1:y},o=function(m){let p=65536;return a.browser==="firefox"&&(a.version<57?m===-1?p=16384:p=2147483637:a.version<60?p=a.version===57?65535:65536:p=2147483637),p},f=function(m,p){let y=65536;a.browser==="firefox"&&a.version===57&&(y=65535);const v=ls.matchPrefix(m.sdp,"a=max-message-size:");return v.length>0?y=parseInt(v[0].substring(19),10):a.browser==="firefox"&&p!==-1&&(y=2147483637),y},d=c.RTCPeerConnection.prototype.setRemoteDescription;c.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,a.browser==="chrome"&&a.version>=76){const{sdpSemantics:p}=this.getConfiguration();p==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const p=i(arguments[0]),y=o(p),v=f(arguments[0],p);let x;y===0&&v===0?x=Number.POSITIVE_INFINITY:y===0||v===0?x=Math.max(y,v):x=Math.min(y,v);const _={};Object.defineProperty(_,"maxMessageSize",{get(){return x}}),this._sctp=_}return d.apply(this,arguments)}}function Or(c){if(!(c.RTCPeerConnection&&"createDataChannel"in c.RTCPeerConnection.prototype))return;function a(i,o){const f=i.send;i.send=function(){const m=arguments[0],p=m.length||m.size||m.byteLength;if(i.readyState==="open"&&o.sctp&&p>o.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+o.sctp.maxMessageSize+" bytes)");return f.apply(i,arguments)}}const r=c.RTCPeerConnection.prototype.createDataChannel;c.RTCPeerConnection.prototype.createDataChannel=function(){const o=r.apply(this,arguments);return a(o,this),o},fa(c,"datachannel",i=>(a(i.channel,i.target),i))}function Gc(c){if(!c.RTCPeerConnection||"connectionState"in c.RTCPeerConnection.prototype)return;const a=c.RTCPeerConnection.prototype;Object.defineProperty(a,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(a,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const i=a[r];a[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=o=>{const f=o.target;if(f._lastConnectionState!==f.connectionState){f._lastConnectionState=f.connectionState;const d=new Event("connectionstatechange",o);f.dispatchEvent(d)}return o},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function Vc(c,a){if(!c.RTCPeerConnection||a.browser==="chrome"&&a.version>=71||a.browser==="safari"&&a._safariVersion>=13.1)return;const r=c.RTCPeerConnection.prototype.setRemoteDescription;c.RTCPeerConnection.prototype.setRemoteDescription=function(o){if(o&&o.sdp&&o.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const f=o.sdp.split(`
`).filter(d=>d.trim()!=="a=extmap-allow-mixed").join(`
`);c.RTCSessionDescription&&o instanceof c.RTCSessionDescription?arguments[0]=new c.RTCSessionDescription({type:o.type,sdp:f}):o.sdp=f}return r.apply(this,arguments)}}function Ur(c,a){if(!(c.RTCPeerConnection&&c.RTCPeerConnection.prototype))return;const r=c.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(c.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(a.browser==="chrome"&&a.version<78||a.browser==="firefox"&&a.version<68||a.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function zr(c,a){if(!(c.RTCPeerConnection&&c.RTCPeerConnection.prototype))return;const r=c.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(c.RTCPeerConnection.prototype.setLocalDescription=function(){let o=arguments[0]||{};if(typeof o!="object"||o.type&&o.sdp)return r.apply(this,arguments);if(o={type:o.type,sdp:o.sdp},!o.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":o.type="offer";break;default:o.type="answer";break}return o.sdp||o.type!=="offer"&&o.type!=="answer"?r.apply(this,[o]):(o.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(d=>r.apply(this,[d]))})}const vy=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Vc,shimAddIceCandidateNullOrEmpty:Ur,shimConnectionState:Gc,shimMaxMessageSize:kr,shimParameterlessSetLocalDescription:zr,shimRTCIceCandidate:wr,shimRTCIceCandidateRelayProtocol:Yc,shimSendThrowTypeError:Or},Symbol.toStringTag,{value:"Module"}));function by({window:c}={},a={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=Qm,i=my(c),o={browserDetails:i,commonShim:vy,extractVersion:di,disableLog:dy,disableWarnings:hy,sdp:yy};switch(i.browser){case"chrome":if(!sm||!$c||!a.shimChrome)return r("Chrome shim is not included in this adapter release."),o;if(i.version===null)return r("Chrome shim can not determine version, not shimming."),o;r("adapter.js shimming chrome."),o.browserShim=sm,Ur(c,i),zr(c),Im(c,i),Xm(c),$c(c,i),Km(c),ep(c,i),Zm(c),Jm(c),tp(c,i),wr(c),Yc(c),Gc(c),kr(c,i),Or(c),Vc(c,i);break;case"firefox":if(!im||!Pc||!a.shimFirefox)return r("Firefox shim is not included in this adapter release."),o;r("adapter.js shimming firefox."),o.browserShim=im,Ur(c,i),zr(c),np(c,i),Pc(c,i),ap(c),rp(c),sp(c),ip(c),lp(c),op(c),cp(c),up(c),fp(c),wr(c),Gc(c),kr(c,i),Or(c);break;case"safari":if(!rm||!a.shimSafari)return r("Safari shim is not included in this adapter release."),o;r("adapter.js shimming safari."),o.browserShim=rm,Ur(c,i),zr(c),yp(c),bp(c),mp(c),dp(c),hp(c),vp(c),pp(c),xp(c),wr(c),Yc(c),kr(c,i),Or(c),Vc(c,i);break;default:r("Unsupported browser!");break}return o}const om=by({window:typeof window>"u"?void 0:window});function da(c,a,r,i){Object.defineProperty(c,a,{get:r,set:i,enumerable:!0,configurable:!0})}class Cp{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=a=>{const r=[],i=a.byteLength,o=Math.ceil(i/this.chunkedMTU);let f=0,d=0;for(;d<i;){const m=Math.min(i,d+this.chunkedMTU),p=a.slice(d,m),y={__peerData:this._dataCount,n:f,data:p,total:o};r.push(y),d=m,f++}return this._dataCount++,r}}}function xy(c){let a=0;for(const o of c)a+=o.byteLength;const r=new Uint8Array(a);let i=0;for(const o of c)r.set(o,i),i+=o.byteLength;return r}const pc=om.default||om,ci=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const c=this.getBrowser(),a=this.getVersion();return this.supportedBrowsers.includes(c)?c==="chrome"?a>=this.minChromeVersion:c==="firefox"?a>=this.minFirefoxVersion:c==="safari"?!this.isIOS&&a>=this.minSafariVersion:!1:!1}getBrowser(){return pc.browserDetails.browser}getVersion(){return pc.browserDetails.version||0}isUnifiedPlanSupported(){const c=this.getBrowser(),a=pc.browserDetails.version||0;if(c==="chrome"&&a<this.minChromeVersion)return!1;if(c==="firefox"&&a>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let r,i=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),i=!0}catch{}finally{r&&r.close()}return i}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},Sy=c=>!c||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(c),_p=()=>Math.random().toString(36).slice(2),cm={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class Cy extends Cp{noop(){}blobToArrayBuffer(a,r){const i=new FileReader;return i.onload=function(o){o.target&&r(o.target.result)},i.readAsArrayBuffer(a),i}binaryStringToArrayBuffer(a){const r=new Uint8Array(a.length);for(let i=0;i<a.length;i++)r[i]=a.charCodeAt(i)&255;return r.buffer}isSecure(){return location.protocol==="https:"}constructor(...a){super(...a),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=cm,this.browser=ci.getBrowser(),this.browserVersion=ci.getVersion(),this.pack=Ym,this.unpack=Pm,this.supports=(function(){const r={browser:ci.isBrowserSupported(),webRTC:ci.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!r.webRTC)return r;let i;try{i=new RTCPeerConnection(cm),r.audioVideo=!0;let o;try{o=i.createDataChannel("_PEERJSTEST",{ordered:!0}),r.data=!0,r.reliable=!!o.ordered;try{o.binaryType="blob",r.binaryBlob=!ci.isIOS}catch{}}catch{}finally{o&&o.close()}}catch{}finally{i&&i.close()}return r})(),this.validateId=Sy,this.randomToken=_p}}const yt=new Cy,_y="PeerJS: ";class Ty{get logLevel(){return this._logLevel}set logLevel(a){this._logLevel=a}log(...a){this._logLevel>=3&&this._print(3,...a)}warn(...a){this._logLevel>=2&&this._print(2,...a)}error(...a){this._logLevel>=1&&this._print(1,...a)}setLogFunction(a){this._print=a}_print(a,...r){const i=[_y,...r];for(const o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);a>=3?console.log(...i):a>=2?console.warn("WARNING",...i):a>=1&&console.error("ERROR",...i)}constructor(){this._logLevel=0}}var re=new Ty,eu={},Ey=Object.prototype.hasOwnProperty,ut="~";function gi(){}Object.create&&(gi.prototype=Object.create(null),new gi().__proto__||(ut=!1));function Ry(c,a,r){this.fn=c,this.context=a,this.once=r||!1}function Tp(c,a,r,i,o){if(typeof r!="function")throw new TypeError("The listener must be a function");var f=new Ry(r,i||c,o),d=ut?ut+a:a;return c._events[d]?c._events[d].fn?c._events[d]=[c._events[d],f]:c._events[d].push(f):(c._events[d]=f,c._eventsCount++),c}function Br(c,a){--c._eventsCount===0?c._events=new gi:delete c._events[a]}function rt(){this._events=new gi,this._eventsCount=0}rt.prototype.eventNames=function(){var a=[],r,i;if(this._eventsCount===0)return a;for(i in r=this._events)Ey.call(r,i)&&a.push(ut?i.slice(1):i);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(r)):a};rt.prototype.listeners=function(a){var r=ut?ut+a:a,i=this._events[r];if(!i)return[];if(i.fn)return[i.fn];for(var o=0,f=i.length,d=new Array(f);o<f;o++)d[o]=i[o].fn;return d};rt.prototype.listenerCount=function(a){var r=ut?ut+a:a,i=this._events[r];return i?i.fn?1:i.length:0};rt.prototype.emit=function(a,r,i,o,f,d){var m=ut?ut+a:a;if(!this._events[m])return!1;var p=this._events[m],y=arguments.length,v,x;if(p.fn){switch(p.once&&this.removeListener(a,p.fn,void 0,!0),y){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,r),!0;case 3:return p.fn.call(p.context,r,i),!0;case 4:return p.fn.call(p.context,r,i,o),!0;case 5:return p.fn.call(p.context,r,i,o,f),!0;case 6:return p.fn.call(p.context,r,i,o,f,d),!0}for(x=1,v=new Array(y-1);x<y;x++)v[x-1]=arguments[x];p.fn.apply(p.context,v)}else{var _=p.length,M;for(x=0;x<_;x++)switch(p[x].once&&this.removeListener(a,p[x].fn,void 0,!0),y){case 1:p[x].fn.call(p[x].context);break;case 2:p[x].fn.call(p[x].context,r);break;case 3:p[x].fn.call(p[x].context,r,i);break;case 4:p[x].fn.call(p[x].context,r,i,o);break;default:if(!v)for(M=1,v=new Array(y-1);M<y;M++)v[M-1]=arguments[M];p[x].fn.apply(p[x].context,v)}}return!0};rt.prototype.on=function(a,r,i){return Tp(this,a,r,i,!1)};rt.prototype.once=function(a,r,i){return Tp(this,a,r,i,!0)};rt.prototype.removeListener=function(a,r,i,o){var f=ut?ut+a:a;if(!this._events[f])return this;if(!r)return Br(this,f),this;var d=this._events[f];if(d.fn)d.fn===r&&(!o||d.once)&&(!i||d.context===i)&&Br(this,f);else{for(var m=0,p=[],y=d.length;m<y;m++)(d[m].fn!==r||o&&!d[m].once||i&&d[m].context!==i)&&p.push(d[m]);p.length?this._events[f]=p.length===1?p[0]:p:Br(this,f)}return this};rt.prototype.removeAllListeners=function(a){var r;return a?(r=ut?ut+a:a,this._events[r]&&Br(this,r)):(this._events=new gi,this._eventsCount=0),this};rt.prototype.off=rt.prototype.removeListener;rt.prototype.addListener=rt.prototype.on;rt.prefixed=ut;rt.EventEmitter=rt;eu=rt;var ha={};da(ha,"ConnectionType",()=>Hn);da(ha,"PeerErrorType",()=>Ye);da(ha,"BaseConnectionErrorType",()=>Qc);da(ha,"DataConnectionErrorType",()=>tu);da(ha,"SerializationType",()=>Yr);da(ha,"SocketEventType",()=>Bn);da(ha,"ServerMessageType",()=>it);var Hn=(function(c){return c.Data="data",c.Media="media",c})({}),Ye=(function(c){return c.BrowserIncompatible="browser-incompatible",c.Disconnected="disconnected",c.InvalidID="invalid-id",c.InvalidKey="invalid-key",c.Network="network",c.PeerUnavailable="peer-unavailable",c.SslUnavailable="ssl-unavailable",c.ServerError="server-error",c.SocketError="socket-error",c.SocketClosed="socket-closed",c.UnavailableID="unavailable-id",c.WebRTC="webrtc",c})({}),Qc=(function(c){return c.NegotiationFailed="negotiation-failed",c.ConnectionClosed="connection-closed",c})({}),tu=(function(c){return c.NotOpenYet="not-open-yet",c.MessageToBig="message-too-big",c})({}),Yr=(function(c){return c.Binary="binary",c.BinaryUTF8="binary-utf8",c.JSON="json",c.None="raw",c})({}),Bn=(function(c){return c.Message="message",c.Disconnected="disconnected",c.Error="error",c.Close="close",c})({}),it=(function(c){return c.Heartbeat="HEARTBEAT",c.Candidate="CANDIDATE",c.Offer="OFFER",c.Answer="ANSWER",c.Open="OPEN",c.Error="ERROR",c.IdTaken="ID-TAKEN",c.InvalidKey="INVALID-KEY",c.Leave="LEAVE",c.Expire="EXPIRE",c})({});const Ep="1.5.5";class Ny extends eu.EventEmitter{constructor(a,r,i,o,f,d=5e3){super(),this.pingInterval=d,this._disconnected=!0,this._messagesQueue=[];const m=a?"wss://":"ws://";this._baseUrl=m+r+":"+i+o+"peerjs?key="+f}start(a,r){this._id=a;const i=`${this._baseUrl}&id=${a}&token=${r}`;this._socket||!this._disconnected||(this._socket=new WebSocket(i+"&version="+Ep),this._disconnected=!1,this._socket.onmessage=o=>{let f;try{f=JSON.parse(o.data),re.log("Server message received:",f)}catch{re.log("Invalid server message",o.data);return}this.emit(Bn.Message,f)},this._socket.onclose=o=>{this._disconnected||(re.log("Socket closed.",o),this._cleanup(),this._disconnected=!0,this.emit(Bn.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),re.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){re.log("Cannot send heartbeat, because socket closed");return}const a=JSON.stringify({type:it.Heartbeat});this._socket.send(a),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const a=[...this._messagesQueue];this._messagesQueue=[];for(const r of a)this.send(r)}send(a){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(a);return}if(!a.type){this.emit(Bn.Error,"Invalid message");return}if(!this._wsOpen())return;const r=JSON.stringify(a);this._socket.send(r)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Rp{constructor(a){this.connection=a}startConnection(a){const r=this._startPeerConnection();if(this.connection.peerConnection=r,this.connection.type===Hn.Media&&a._stream&&this._addTracksToConnection(a._stream,r),a.originator){const i=this.connection,o={ordered:!!a.reliable},f=r.createDataChannel(i.label,o);i._initializeDataChannel(f),this._makeOffer()}else this.handleSDP("OFFER",a.sdp)}_startPeerConnection(){re.log("Creating RTCPeerConnection.");const a=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(a),a}_setupListeners(a){const r=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,f=this.connection.provider;re.log("Listening for ICE candidates."),a.onicecandidate=d=>{!d.candidate||!d.candidate.candidate||(re.log(`Received ICE candidates for ${r}:`,d.candidate),f.socket.send({type:it.Candidate,payload:{candidate:d.candidate,type:o,connectionId:i},dst:r}))},a.oniceconnectionstatechange=()=>{switch(a.iceConnectionState){case"failed":re.log("iceConnectionState is failed, closing connections to "+r),this.connection.emitError(Qc.NegotiationFailed,"Negotiation of connection to "+r+" failed."),this.connection.close();break;case"closed":re.log("iceConnectionState is closed, closing connections to "+r),this.connection.emitError(Qc.ConnectionClosed,"Connection to "+r+" closed."),this.connection.close();break;case"disconnected":re.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":a.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",a.iceConnectionState)},re.log("Listening for data channel"),a.ondatachannel=d=>{re.log("Received data channel");const m=d.channel;f.getConnection(r,i)._initializeDataChannel(m)},re.log("Listening for remote stream"),a.ontrack=d=>{re.log("Received remote stream");const m=d.streams[0],p=f.getConnection(r,i);if(p.type===Hn.Media){const y=p;this._addStreamToMediaConnection(m,y)}}}cleanup(){re.log("Cleaning up PeerConnection to "+this.connection.peer);const a=this.connection.peerConnection;if(!a)return;this.connection.peerConnection=null,a.onicecandidate=a.oniceconnectionstatechange=a.ondatachannel=a.ontrack=()=>{};const r=a.signalingState!=="closed";let i=!1;const o=this.connection.dataChannel;o&&(i=!!o.readyState&&o.readyState!=="closed"),(r||i)&&a.close()}async _makeOffer(){const a=this.connection.peerConnection,r=this.connection.provider;try{const i=await a.createOffer(this.connection.options.constraints);re.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await a.setLocalDescription(i),re.log("Set localDescription:",i,`for:${this.connection.peer}`);let o={sdp:i,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Hn.Data){const f=this.connection;o={...o,label:f.label,reliable:f.reliable,serialization:f.serialization}}r.socket.send({type:it.Offer,payload:o,dst:this.connection.peer})}catch(o){o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(r.emitError(Ye.WebRTC,o),re.log("Failed to setLocalDescription, ",o))}}catch(i){r.emitError(Ye.WebRTC,i),re.log("Failed to createOffer, ",i)}}async _makeAnswer(){const a=this.connection.peerConnection,r=this.connection.provider;try{const i=await a.createAnswer();re.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(i.sdp=this.connection.options.sdpTransform(i.sdp)||i.sdp);try{await a.setLocalDescription(i),re.log("Set localDescription:",i,`for:${this.connection.peer}`),r.socket.send({type:it.Answer,payload:{sdp:i,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(o){r.emitError(Ye.WebRTC,o),re.log("Failed to setLocalDescription, ",o)}}catch(i){r.emitError(Ye.WebRTC,i),re.log("Failed to create answer, ",i)}}async handleSDP(a,r){r=new RTCSessionDescription(r);const i=this.connection.peerConnection,o=this.connection.provider;re.log("Setting remote description",r);const f=this;try{await i.setRemoteDescription(r),re.log(`Set remoteDescription:${a} for:${this.connection.peer}`),a==="OFFER"&&await f._makeAnswer()}catch(d){o.emitError(Ye.WebRTC,d),re.log("Failed to setRemoteDescription, ",d)}}async handleCandidate(a){re.log("handleCandidate:",a);try{await this.connection.peerConnection.addIceCandidate(a),re.log(`Added ICE candidate for:${this.connection.peer}`)}catch(r){this.connection.provider.emitError(Ye.WebRTC,r),re.log("Failed to handleCandidate, ",r)}}_addTracksToConnection(a,r){if(re.log(`add tracks from stream ${a.id} to peer connection`),!r.addTrack)return re.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");a.getTracks().forEach(i=>{r.addTrack(i,a)})}_addStreamToMediaConnection(a,r){re.log(`add stream ${a.id} to media connection ${r.connectionId}`),r.addStream(a)}}class Np extends eu.EventEmitter{emitError(a,r){re.error("Error:",r),this.emit("error",new jy(`${a}`,r))}}class jy extends Error{constructor(a,r){typeof r=="string"?super(r):(super(),Object.assign(this,r)),this.type=a}}class jp extends Np{get open(){return this._open}constructor(a,r,i){super(),this.peer=a,this.provider=r,this.options=i,this._open=!1,this.metadata=i.metadata}}var Ic;const mi=class mi extends jp{get type(){return Hn.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(a,r,i){super(a,r,i),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||mi.ID_PREFIX+yt.randomToken(),this._negotiator=new Rp(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(a){this.dataChannel=a,this.dataChannel.onopen=()=>{re.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{re.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(a){re.log("Receiving stream",a),this._remoteStream=a,super.emit("stream",a)}handleMessage(a){const r=a.type,i=a.payload;switch(a.type){case it.Answer:this._negotiator.handleSDP(r,i.sdp),this._open=!0;break;case it.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:re.warn(`Unrecognized message type:${r} from peer:${this.peer}`);break}}answer(a,r={}){if(this._localStream){re.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=a,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:a});const i=this.provider._getMessages(this.connectionId);for(const o of i)this.handleMessage(o);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};Ic=new WeakMap,ri(mi,Ic,mi.ID_PREFIX="mc_");let Lr=mi;class My{constructor(a){this._options=a}_buildRequest(a){const r=this._options.secure?"https":"http",{host:i,port:o,path:f,key:d}=this._options,m=new URL(`${r}://${i}:${o}${f}${d}/${a}`);return m.searchParams.set("ts",`${Date.now()}${Math.random()}`),m.searchParams.set("version",Ep),fetch(m.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const a=await this._buildRequest("id");if(a.status!==200)throw new Error(`Error. Status:${a.status}`);return a.text()}catch(a){re.error("Error retrieving ID",a);let r="";throw this._options.path==="/"&&this._options.host!==yt.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r)}}async listAllPeers(){try{const a=await this._buildRequest("peers");if(a.status!==200){if(a.status===401){let r="";throw this._options.host===yt.CLOUD_HOST?r="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":r="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)}throw new Error(`Error. Status:${a.status}`)}return a.json()}catch(a){throw re.error("Error retrieving list peers",a),new Error("Could not get list peers from the server."+a)}}}var Xc,Kc;const oa=class oa extends jp{get type(){return Hn.Data}constructor(a,r,i){super(a,r,i),this.connectionId=this.options.connectionId||oa.ID_PREFIX+_p(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Rp(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(a){this.dataChannel=a,this.dataChannel.onopen=()=>{re.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=r=>{re.log(`DC#${this.connectionId} dc onmessage:`,r.data)},this.dataChannel.onclose=()=>{re.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(a){if(a!=null&&a.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(a,r=!1){if(!this.open){this.emitError(tu.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(a,r)}async handleMessage(a){const r=a.payload;switch(a.type){case it.Answer:await this._negotiator.handleSDP(a.type,r.sdp);break;case it.Candidate:await this._negotiator.handleCandidate(r.candidate);break;default:re.warn("Unrecognized message type:",a.type,"from peer:",this.peer);break}}};Xc=new WeakMap,Kc=new WeakMap,ri(oa,Xc,oa.ID_PREFIX="dc_"),ri(oa,Kc,oa.MAX_BUFFERED_AMOUNT=8388608);let Hr=oa;class nu extends Hr{get bufferSize(){return this._bufferSize}_initializeDataChannel(a){super._initializeDataChannel(a),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",r=>this._handleDataMessage(r))}_bufferedSend(a){(this._buffering||!this._trySend(a))&&(this._buffer.push(a),this._bufferSize=this._buffer.length)}_trySend(a){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>Hr.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(a)}catch(r){return re.error(`DC#:${this.connectionId} Error when sending:`,r),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const a=this._buffer[0];this._trySend(a)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(a){if(a!=null&&a.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...a){super(...a),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class gc extends nu{close(a){super.close(a),this._chunkedData={}}constructor(a,r,i){super(a,r,i),this.chunker=new Cp,this.serialization=Yr.Binary,this._chunkedData={}}_handleDataMessage({data:a}){const r=Pm(a),i=r.__peerData;if(i){if(i.type==="close"){this.close();return}this._handleChunk(r);return}this.emit("data",r)}_handleChunk(a){const r=a.__peerData,i=this._chunkedData[r]||{data:[],count:0,total:a.total};if(i.data[a.n]=new Uint8Array(a.data),i.count++,this._chunkedData[r]=i,i.total===i.count){delete this._chunkedData[r];const o=xy(i.data);this._handleDataMessage({data:o})}}_send(a,r){const i=Ym(a);if(i instanceof Promise)return this._send_blob(i);if(!r&&i.byteLength>this.chunker.chunkedMTU){this._sendChunks(i);return}this._bufferedSend(i)}async _send_blob(a){const r=await a;if(r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}_sendChunks(a){const r=this.chunker.chunk(a);re.log(`DC#${this.connectionId} Try to send ${r.length} chunks...`);for(const i of r)this.send(i,!0)}}class Dy extends nu{_handleDataMessage({data:a}){super.emit("data",a)}_send(a,r){this._bufferedSend(a)}constructor(...a){super(...a),this.serialization=Yr.None}}class Ay extends nu{_handleDataMessage({data:a}){const r=this.parse(this.decoder.decode(a)),i=r.__peerData;if(i&&i.type==="close"){this.close();return}this.emit("data",r)}_send(a,r){const i=this.encoder.encode(this.stringify(a));if(i.byteLength>=yt.chunkedMTU){this.emitError(tu.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(i)}constructor(...a){super(...a),this.serialization=Yr.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var Zc;const pi=class pi extends Np{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const a=Object.create(null);for(const[r,i]of this._connections)a[r]=i;return a}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(a,r){super(),this._serializers={raw:Dy,json:Ay,binary:gc,"binary-utf8":gc,default:gc},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let i;if(a&&a.constructor==Object?r=a:a&&(i=a.toString()),r={debug:0,host:yt.CLOUD_HOST,port:yt.CLOUD_PORT,path:"/",key:pi.DEFAULT_KEY,token:yt.randomToken(),config:yt.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...r},this._options=r,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==yt.CLOUD_HOST?this._options.secure=yt.isSecure():this._options.host==yt.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&re.setLogFunction(this._options.logFunction),re.logLevel=this._options.debug||0,this._api=new My(r),this._socket=this._createServerConnection(),!yt.supports.audioVideo&&!yt.supports.data){this._delayedAbort(Ye.BrowserIncompatible,"The current browser does not support WebRTC");return}if(i&&!yt.validateId(i)){this._delayedAbort(Ye.InvalidID,`ID "${i}" is invalid`);return}i?this._initialize(i):this._api.retrieveId().then(o=>this._initialize(o)).catch(o=>this._abort(Ye.ServerError,o))}_createServerConnection(){const a=new Ny(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return a.on(Bn.Message,r=>{this._handleMessage(r)}),a.on(Bn.Error,r=>{this._abort(Ye.SocketError,r)}),a.on(Bn.Disconnected,()=>{this.disconnected||(this.emitError(Ye.Network,"Lost connection to server."),this.disconnect())}),a.on(Bn.Close,()=>{this.disconnected||this._abort(Ye.SocketClosed,"Underlying socket is already closed.")}),a}_initialize(a){this._id=a,this.socket.start(a,this._options.token)}_handleMessage(a){const r=a.type,i=a.payload,o=a.src;switch(r){case it.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case it.Error:this._abort(Ye.ServerError,i.msg);break;case it.IdTaken:this._abort(Ye.UnavailableID,`ID "${this.id}" is taken`);break;case it.InvalidKey:this._abort(Ye.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case it.Leave:re.log(`Received leave message from ${o}`),this._cleanupPeer(o),this._connections.delete(o);break;case it.Expire:this.emitError(Ye.PeerUnavailable,`Could not connect to peer ${o}`);break;case it.Offer:{const f=i.connectionId;let d=this.getConnection(o,f);if(d&&(d.close(),re.warn(`Offer received for existing Connection ID:${f}`)),i.type===Hn.Media){const p=new Lr(o,this,{connectionId:f,_payload:i,metadata:i.metadata});d=p,this._addConnection(o,d),this.emit("call",p)}else if(i.type===Hn.Data){const p=new this._serializers[i.serialization](o,this,{connectionId:f,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable});d=p,this._addConnection(o,d),this.emit("connection",p)}else{re.warn(`Received malformed connection type:${i.type}`);return}const m=this._getMessages(f);for(const p of m)d.handleMessage(p);break}default:{if(!i){re.warn(`You received a malformed message from ${o} of type ${r}`);return}const f=i.connectionId,d=this.getConnection(o,f);d&&d.peerConnection?d.handleMessage(a):f?this._storeMessage(f,a):re.warn("You received an unrecognized message:",a);break}}}_storeMessage(a,r){this._lostMessages.has(a)||this._lostMessages.set(a,[]),this._lostMessages.get(a).push(r)}_getMessages(a){const r=this._lostMessages.get(a);return r?(this._lostMessages.delete(a),r):[]}connect(a,r={}){if(r={serialization:"default",...r},this.disconnected){re.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Ye.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const i=new this._serializers[r.serialization](a,this,r);return this._addConnection(a,i),i}call(a,r,i={}){if(this.disconnected){re.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Ye.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){re.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const o=new Lr(a,this,{...i,_stream:r});return this._addConnection(a,o),o}_addConnection(a,r){re.log(`add connection ${r.type}:${r.connectionId} to peerId:${a}`),this._connections.has(a)||this._connections.set(a,[]),this._connections.get(a).push(r)}_removeConnection(a){const r=this._connections.get(a.peer);if(r){const i=r.indexOf(a);i!==-1&&r.splice(i,1)}this._lostMessages.delete(a.connectionId)}getConnection(a,r){const i=this._connections.get(a);if(!i)return null;for(const o of i)if(o.connectionId===r)return o;return null}_delayedAbort(a,r){setTimeout(()=>{this._abort(a,r)},0)}_abort(a,r){re.error("Aborting!"),this.emitError(a,r),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(re.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const a of this._connections.keys())this._cleanupPeer(a),this._connections.delete(a);this.socket.removeAllListeners()}_cleanupPeer(a){const r=this._connections.get(a);if(r)for(const i of r)i.close()}disconnect(){if(this.disconnected)return;const a=this.id;re.log(`Disconnect peer with ID:${a}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=a,this._id=null,this.emit("disconnected",a)}reconnect(){if(this.disconnected&&!this.destroyed)re.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)re.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(a=r=>{}){this._api.listAllPeers().then(r=>a(r)).catch(r=>this._abort(Ye.ServerError,r))}};Zc=new WeakMap,ri(pi,Zc,pi.DEFAULT_KEY="peerjs");let Fc=pi;var Mp=Fc;const ca=class ca{static async getOrCreatePeer(a,r){if(console.log(` Requesting peer connection for ID: ${a}`),this.currentPeer&&!this.currentPeer.destroyed&&this.currentPeer.id===a&&this.currentPeer.open)return console.log(" Reusing existing healthy peer connection"),this.currentPeer;if(this.isInitializing&&this.initPromise&&this.lastPeerId===a)return console.log(" Waiting for existing initialization to complete"),this.initPromise;this.currentPeer&&(this.currentPeer.destroyed||this.lastPeerId!==a)&&(console.log(" Cleaning up incompatible connection"),await this.forceCleanup()),this.isInitializing=!0,this.lastPeerId=a,this.connectionCount++,console.log(` Creating peer connection #${this.connectionCount} for ID: ${a}`),this.initPromise=this.createPeerConnection(a,r);try{return this.currentPeer=await this.initPromise,console.log(` Peer connection #${this.connectionCount} established successfully`),this.currentPeer}catch(i){throw console.error(` Peer connection #${this.connectionCount} failed:`,i),i}finally{this.isInitializing=!1,this.initPromise=null}}static createPeerConnection(a,r){return new Promise((i,o)=>{console.log(" Starting peer creation with config:",r);const f=new Mp(a,r);let d=!1;const m=setTimeout(()=>{d||(console.log(" Peer connection timeout, destroying..."),f.destroy(),o(new Error("Peer connection timeout after 30 seconds")))},3e4);f.on("open",p=>{d||(d=!0,clearTimeout(m),console.log(` Peer opened with ID: ${p}`),i(f))}),f.on("error",p=>{d||(d=!0,clearTimeout(m),console.error(" Peer error:",p.type,p.message),p.type==="unavailable-id"&&console.log(" ID unavailable, will retry with cleanup"),o(p))}),f.on("disconnected",()=>{console.log(" Peer disconnected")}),f.on("close",()=>{console.log(" Peer connection closed")})})}static async forceCleanup(){if(console.log(" Starting force cleanup..."),this.isInitializing&&this.initPromise&&(console.log(" Cancelling ongoing initialization"),this.isInitializing=!1,this.initPromise=null),this.currentPeer){console.log(" Destroying current peer connection");try{this.currentPeer.destroyed||this.currentPeer.destroy()}catch(a){console.warn(" Error during peer destruction:",a)}this.currentPeer=null}console.log(" Waiting for cleanup to complete..."),await new Promise(a=>setTimeout(a,500)),console.log(" Force cleanup completed")}static getConnectionStatus(){const a=this.currentPeer;return{hasPeer:!!a,isOpen:(a==null?void 0:a.open)||!1,isDestroyed:(a==null?void 0:a.destroyed)||!1,peerId:(a==null?void 0:a.id)||null,isInitializing:this.isInitializing,connectionCount:this.connectionCount,socketState:a!=null&&a.socket?this.getSocketStateString(a.socket.readyState):null}}static getSocketStateString(a){switch(a){case WebSocket.CONNECTING:return"CONNECTING";case WebSocket.OPEN:return"OPEN";case WebSocket.CLOSING:return"CLOSING";case WebSocket.CLOSED:return"CLOSED";default:return"UNKNOWN"}}static checkForDuplicateConnections(){const a=performance.getEntriesByType("resource").filter(o=>o.name.includes("peerjs")).map(o=>o.name),r=a.length;let i="";return r>1?i=` Detected ${r} PeerJS connections, recommend refreshing page to clean duplicate connections`:r===1?i=" Connection count is normal":i=" No PeerJS connections detected",{duplicateCount:r,connections:a,recommendation:i}}static reset(){console.log(" Resetting PeerConnectionManager"),this.forceCleanup(),this.connectionCount=0,this.lastPeerId=null}static getDiagnosticInfo(){const a=this.getConnectionStatus(),r=this.checkForDuplicateConnections();return{...a,...r,lastPeerId:this.lastPeerId,timestamp:new Date().toISOString()}}};ca.currentPeer=null,ca.isInitializing=!1,ca.initPromise=null,ca.connectionCount=0,ca.lastPeerId=null;let Qt=ca;window.peerConnectionStatus=()=>{const c=Qt.getConnectionStatus();return console.log(" Peer Connection Status:",c),c};window.checkDuplicateConnections=()=>{const c=Qt.checkForDuplicateConnections();return console.log(" Duplicate Connection Check:",c),c};window.peerDiagnostic=()=>{const c=Qt.getDiagnosticInfo();return console.log(" Peer Connection Diagnostic:",c),c};window.forcePeerCleanup=async()=>{console.log(" Force cleaning peer connections..."),await Qt.forceCleanup(),console.log(" Force cleanup completed")};const wy=(c,a)=>{const[r,i]=U.useState(!1),[o,f]=U.useState(!0),[d,m]=U.useState(!0),[p,y]=U.useState(""),v=U.useRef(null),x=U.useRef(0),_=U.useRef(!1),M=U.useRef(!1),R=U.useRef(`tab_${Date.now()}_${Math.random().toString(36).substr(2,9)}`);U.useRef(null),U.useCallback(()=>{console.log(" Connection timeout, forcing reconnect..."),i(!1),v.current&&!v.current.destroyed&&v.current.destroy(),j()},[]);const A=U.useCallback(E=>{if(E.type==="unavailable-id"||E.type==="ID-TAKEN"){const N=x.current+1,H=5,Y=Math.min(1e4*Math.pow(1.5,x.current),6e4);console.log(" ID occupied, waiting for server cleanup...");const w=` Connection Conflict Detected: Your ID is still registered on server

 Reason: Previous browser session didn't disconnect properly, server still thinks you're online

 Waiting for server to automatically cleanup old connection...

 Attempt ${N}/${H} - Please wait ${Math.round(Y/1e3)} seconds

 Please don't close browser, system is handling this automatically...`;y(w),x.current<H?setTimeout(()=>{x.current++,console.log(` Retry ${N}/${H} after ${Math.round(Y/1e3)}s wait`),O()},Y):(console.log(" Server cleanup timeout. Manual refresh recommended."),y(` Connection Timeout: Server cleanup taking too long

 Possible causes:
 Server overload
 Unstable network connection
 Multiple tabs using same ID

 Solutions:
1. Close other MUVOV tabs
2. Refresh current page (Ctrl+F5)
3. Wait 2-3 minutes and try again

 Your friends list and chat history will remain intact after refresh`),i(!1))}else E.type==="peer-unavailable"?console.log(" Old ID cleared from server, can use original ID"):E.type==="network"||E.type==="server-error"?(console.log(" Network/server error, will retry..."),setTimeout(()=>{!r&&x.current<10&&j()},3e3)):E.type==="disconnected"&&(console.log(" Disconnected, attempting reconnect..."),setTimeout(()=>j(),2e3))},[r]),C=U.useCallback(E=>{const N=()=>{if(v.current===E){if(console.log(" Main peer disconnected"),i(!1),document.hidden){console.log(" Disconnected while in background, will reconnect when visible");return}setTimeout(()=>{E&&!E.destroyed&&v.current===E&&!document.hidden&&(console.log(" Attempting foreground reconnect"),E.reconnect())},1e3)}},H=Y=>{v.current===E&&(console.error(" Main PeerJS error:",Y),i(!1),A(Y))};return E.on("disconnected",N),E.on("error",H),()=>{E.off("disconnected",N),E.off("error",H)}},[A]),O=U.useCallback(async()=>{if(M.current){console.log(" Peer initialization already in progress");return}M.current=!0;try{const E=a||`user_${Math.random().toString(36).substr(2,9)}`;let N=await ua.getOptimalPeerConfig();if(rs.isMobile()){const w=rs.getMobilePeerConfig();N={...N,config:{...N.config,...w.config},debug:w.debug},console.log(" Applied mobile optimizations to peer config")}console.log(" Initializing peer with ID:",E,"attempt:",x.current),console.log(" Using config:",N);const H=await Qt.getOrCreatePeer(E,N);v.current=H,console.log(" Peer connection established with ID:",H.id),i(!0),y(""),x.current=0,_.current=!1;const Y=C(H);H._cleanupListeners=Y}catch(E){console.error(" Failed to initialize peer:",E),i(!1),A(E)}finally{M.current=!1}},[a,C,A]),j=U.useCallback(()=>{if(_.current){console.log("Reconnection already in progress");return}const E=3;if(x.current>=E){console.log("Max reconnection attempts reached, pausing for server cleanup..."),y(` Connection Attempts Paused: Maximum retries reached

 Current Status: System waiting for server to cleanup old connections

 Please wait 1 minute, system will automatically retry

 Suggestions:
 Keep this page open, don't close it
 If urgent, refresh page to force reconnection
 Ensure no other tabs are using the same ID

 This is normal behavior and won't affect your data security`),setTimeout(()=>{console.log("Resetting reconnect state after server cleanup period..."),x.current=0,_.current=!1,y(" Server cleanup completed, retrying connection...")},6e4);return}_.current=!0,x.current++,Qt.forceCleanup();const N=Math.min(15e3*Math.pow(1.5,x.current),45e3),H=` Network Reconnecting...

 Reason: Network interruption or server disconnection

 Waiting ${Math.round(N/1e3)} seconds before retry...

 Attempt ${x.current}/${E}

 Please keep network connection stable`;y(H),setTimeout(()=>{console.log(`Attempting reconnect ${x.current}/${E} after ${N/1e3}s...`),_.current=!1,O()},N)},[O]);return U.useEffect(()=>{const E=()=>{const Y=!document.hidden;if(f(Y),Y&&!r){if(console.log(" Page became visible, checking connection status"),console.log(" Mobile background recovery: resetting all reconnect states"),x.current=0,_.current=!1,M.current=!1,y(""),v.current&&!v.current.destroyed){console.log(" Destroying existing connection for fresh start");try{v.current.destroy()}catch{}v.current=null}console.log(" Creating fresh connection after background recovery"),O()}},N=()=>{m(!0),r||setTimeout(()=>{r||j()},1e3)},H=()=>{m(!1)};return document.addEventListener("visibilitychange",E),window.addEventListener("online",N),window.addEventListener("offline",H),()=>{document.removeEventListener("visibilitychange",E),window.removeEventListener("online",N),window.removeEventListener("offline",H)}},[r,j]),U.useEffect(()=>{console.log(" useMeshNetwork effect triggered");const E=Qt.getConnectionStatus();if(E.hasPeer&&E.isOpen&&!E.isDestroyed){console.log(" Using existing healthy peer connection"),v.current=Qt.currentPeer,i(!0);return}O();const N=H=>{var w;if(H.type==="beforeunload"&&(((w=performance.navigation)==null?void 0:w.type)===1||H.persisted||document.visibilityState==="visible"||H.returnValue===void 0)){console.log(" Page refresh detected, keeping connection to avoid ID conflicts");return}console.log(" Page actually closing, cleaning up connection"),v.current&&!v.current.destroyed&&v.current.destroy()};return window.addEventListener("beforeunload",N),()=>{window.removeEventListener("beforeunload",N),console.log(" Component unmounting, cleaning up connection"),v.current&&!v.current.destroyed&&v.current.destroy()}},[]),{isReady:r,isVisible:o,isOnline:d,connectionStatus:p,attemptReconnect:j,peerInstance:v.current,getCacheStats:()=>({totalMessages:0,tabId:R.current,isReconnecting:_.current})}},ky=c=>{const[a,r]=U.useState({isInCall:!1,isVideoCall:!1,localStream:null,remoteStream:null,incomingCall:null,callError:null,facingMode:"user",callStartTime:null,callDuration:0}),i=U.useRef(null),o=U.useRef(null),f=U.useRef(null),d=U.useCallback(async(R,A)=>{if(!c||!c.open){console.error("Peer not ready");return}if(a.isInCall){console.warn("Already in call");return}console.log(` Starting ${A?"video":"audio"} call to ${R}`);try{const C=await navigator.mediaDevices.getUserMedia({audio:!0,video:A?{facingMode:a.facingMode}:!1});console.log(" Got local stream:",C.getTracks().map(E=>`${E.kind}: ${E.enabled}`)),r(E=>({...E,isInCall:!0,isVideoCall:A,localStream:C,callError:null,callStartTime:Date.now()})),setTimeout(()=>{i.current&&C&&(i.current.srcObject=C,i.current.play().catch(E=>console.log("Local video play error:",E)))},100);const O=c.call(R,C,{metadata:{isVideoCall:A}});f.current=O,O.on("stream",E=>{console.log(" Received remote stream:",E.getTracks().map(N=>`${N.kind}: ${N.enabled}`)),r(N=>({...N,remoteStream:E})),setTimeout(()=>{o.current&&E&&(o.current.srcObject=E,o.current.play().catch(N=>console.log("Remote video play error:",N)))},100)}),O.on("close",()=>{console.log(" Call ended by remote"),r(E=>{const N=!!E.remoteStream;return{...E,callError:N?"Call ended by remote":"Call was declined"}}),setTimeout(()=>{v()},1e3)}),O.on("error",E=>{console.error(" Call error:",E),r(N=>({...N,callError:"Call failed - friend may be offline"})),setTimeout(()=>{v()},2e3)});const j=setTimeout(()=>{r(E=>f.current===O&&!E.remoteStream?(console.log(" Call timeout - no answer"),setTimeout(()=>{v()},2e3),{...E,callError:"No answer - call timed out"}):E)},3e4);O.on("stream",()=>{clearTimeout(j)}),O.on("close",()=>{clearTimeout(j)})}catch(C){console.error("Failed to start call:",C),r(O=>({...O,callError:"Failed to access camera/microphone"})),setTimeout(()=>{r(O=>({...O,callError:null}))},3e3)}},[c,a.isInCall,a.facingMode]),m=U.useCallback(async()=>{var C;const R=a.incomingCall;if(!R)return;const A=((C=R.metadata)==null?void 0:C.isVideoCall)||!1;console.log(` Accepting ${A?"video":"audio"} call`);try{const O=await navigator.mediaDevices.getUserMedia({audio:!0,video:A?{facingMode:a.facingMode}:!1});console.log(" Got local stream for answer:",O.getTracks().map(j=>`${j.kind}: ${j.enabled}`)),R.answer(O),f.current=R,r(j=>({...j,isInCall:!0,isVideoCall:A,localStream:O,incomingCall:null,callError:null,callStartTime:Date.now()})),setTimeout(()=>{i.current&&O&&(i.current.srcObject=O,i.current.play().catch(j=>console.log("Local video play error:",j)))},100),R.on("stream",j=>{console.log(" Received remote stream:",j.getTracks().map(E=>`${E.kind}: ${E.enabled}`)),r(E=>({...E,remoteStream:j})),setTimeout(()=>{o.current&&j&&(o.current.srcObject=j,o.current.play().catch(E=>console.log("Remote video play error:",E)))},100)}),R.on("close",()=>{console.log(" Call ended by remote"),r(j=>({...j,callError:"Call ended by remote"})),setTimeout(()=>{v()},1e3)}),R.on("error",j=>{console.error(" Call error:",j),v()})}catch(O){console.error("Failed to accept call:",O),r(j=>({...j,callError:"Failed to access camera/microphone",incomingCall:null}))}},[a.incomingCall,a.facingMode]),p=U.useCallback(R=>{if(c){const A=c.connect(R);A.on("open",()=>{A.send({type:"call_hangup"})})}},[c]),y=U.useCallback(()=>{const R=a.incomingCall;R&&(p(R.peer),R.close(),r(A=>({...A,incomingCall:null})))},[a.incomingCall,p]),v=U.useCallback(()=>{if(console.log(" Ending call"),f.current&&p(f.current.peer),a.localStream&&a.localStream.getTracks().forEach(R=>R.stop()),f.current){try{f.current.close()}catch(R){console.log("Error closing call:",R)}f.current=null}if(a.incomingCall)try{a.incomingCall.close()}catch(R){console.log("Error closing incoming call:",R)}if(i.current&&(i.current.srcObject=null),o.current&&(o.current.srcObject=null),a.callStartTime&&a.isInCall){const R=Math.floor((Date.now()-a.callStartTime)/1e3),A={id:Date.now().toString(),type:a.isVideoCall?"video":"audio",duration:R,timestamp:a.callStartTime,endTime:Date.now()},C=JSON.parse(localStorage.getItem("callRecords")||"[]");C.push(A),localStorage.setItem("callRecords",JSON.stringify(C))}r({isInCall:!1,isVideoCall:!1,localStream:null,remoteStream:null,incomingCall:null,callError:null,facingMode:"user",callStartTime:null,callDuration:0})},[a.localStream,a.callStartTime,a.isVideoCall,a.isInCall,a.incomingCall]);U.useEffect(()=>{let R;return a.isInCall&&a.callStartTime&&(R=setInterval(()=>{r(A=>({...A,callDuration:Math.floor((Date.now()-A.callStartTime)/1e3)}))},1e3)),()=>{R&&clearInterval(R)}},[a.isInCall,a.callStartTime]);const x=U.useCallback(async()=>{if(!a.isInCall||!a.isVideoCall||!a.localStream)return;const R=a.facingMode==="user"?"environment":"user";try{a.localStream.getVideoTracks().forEach(C=>C.stop());const A=await navigator.mediaDevices.getUserMedia({audio:!0,video:{facingMode:R}});if(i.current&&(i.current.srcObject=A),f.current&&f.current.peerConnection){const C=A.getVideoTracks()[0],O=f.current.peerConnection.getSenders().find(j=>j.track&&j.track.kind==="video");O&&C&&await O.replaceTrack(C)}r(C=>({...C,localStream:A,facingMode:R}))}catch(A){console.error("Failed to switch camera:",A),r(C=>({...C,callError:"Failed to switch camera"})),setTimeout(()=>{r(C=>({...C,callError:null}))},3e3)}},[a.isInCall,a.isVideoCall,a.localStream,a.facingMode]),_=R=>{const A=Math.floor(R/60),C=R%60;return`${A.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`},M=U.useCallback(R=>{var C;console.log(" Incoming call from:",R.peer,"Video:",(C=R.metadata)==null?void 0:C.isVideoCall),r(O=>{var j;return O.isInCall||O.incomingCall?(console.log("Already in call or has incoming call, rejecting"),R.close(),O):{...O,incomingCall:R,isVideoCall:((j=R.metadata)==null?void 0:j.isVideoCall)||!1}});const A=setTimeout(()=>{r(O=>O.incomingCall===R?(console.log("Call timeout"),R.close(),{...O,incomingCall:null,callError:"Call timed out - no response"}):O)},3e4);R.on("close",()=>{console.log(" Caller hung up"),clearTimeout(A),r(O=>({...O,incomingCall:null,callError:"Caller ended the call"})),setTimeout(()=>{r(O=>({...O,callError:null}))},3e3)}),R.on("error",O=>{console.log(" Call error:",O),clearTimeout(A),r(j=>({...j,incomingCall:null,callError:"Call failed"})),setTimeout(()=>{r(j=>({...j,callError:null}))},3e3)})},[a.isInCall]);return U.useEffect(()=>{if(c)return c.on("call",M),c.on("connection",R=>{R.on("data",A=>{A.type==="call_hangup"&&(console.log(" Received hangup signal"),r(C=>({...C,incomingCall:null,callError:C.incomingCall?"Call was declined":"Call ended by remote"})),setTimeout(()=>{r(C=>({...C,callError:null}))},3e3),f.current&&v())})}),()=>{c.off("call",M)}},[c,M]),U.useEffect(()=>()=>{f.current&&f.current.close()},[]),{callState:a,localVideoRef:i,remoteVideoRef:o,startCall:d,acceptCall:m,rejectCall:y,endCall:v,switchCamera:x,formatDuration:_}},Oy=c=>{try{const a=localStorage.getItem(c);if(a){const r=JSON.parse(a);if(Array.isArray(r))return r;if(r&&typeof r=="object"&&r.friends&&Array.isArray(r.friends))return r.friends}}catch(a){console.warn("Failed to load friends from localStorage:",a)}return[]},Uy=c=>{var R,A;const[a,r]=U.useState(()=>{const C=`meshchat_friends_${c}`;return Oy(C)}),[i,o]=U.useState(!1),f=U.useRef(null),d=U.useRef(null),m=U.useRef(new Set),p=U.useRef(!1),y=U.useRef(new Map),v=U.useCallback(()=>`meshchat_friends_${c}`,[c]);U.useEffect(()=>{try{const C=v(),O={friends:a,lastUpdated:Date.now()};localStorage.setItem(C,JSON.stringify(O))}catch(C){console.warn("Failed to save friends:",C)}},[a,v]);const x=U.useCallback(async()=>{if(p.current){console.log(" Status peer initialization already in progress");return}if(f.current&&!f.current.destroyed){console.log(" Status peer already exists, reusing connection");return}p.current=!0;try{const C=`status_${c}_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,O=await ua.getOptimalPeerConfig();console.log(" Initializing independent status peer:",C);const j=new Mp(C,O);j.on("open",()=>{console.log(" Status peer connected:",C),f.current=j,p.current=!1,setTimeout(()=>{if(console.log(" Triggering status check after peer connection"),f.current&&f.current.open){const E=JSON.parse(localStorage.getItem(`meshchat_friends_${c}`)||"[]"),N=Array.isArray(E)?E:E.friends||[];if(N.length>0){o(!0);let H=0;N.forEach((Y,w)=>{setTimeout(()=>{_(Y).finally(()=>{H++,H>=N.length&&o(!1)})},w*1e3)})}}},1e3)}),j.on("error",E=>{console.log(" Status peer error (isolated):",E.type),p.current=!1,f.current===j&&(f.current=null,setTimeout(()=>{x()},2e3))}),j.on("disconnected",()=>{console.log(" Status peer disconnected, will retry..."),p.current=!1,f.current===j&&(f.current=null,setTimeout(()=>{x()},3e3))})}catch(C){console.log("Failed to initialize status peer:",C),p.current=!1}},[c]),_=U.useCallback(async C=>{if(!f.current||!f.current.open||m.current.has(C.peerId))return;m.current.add(C.peerId);const O=N=>{y.current.set(C.peerId,{isOnline:N,lastCheck:Date.now()}),r(H=>H.map(Y=>Y.peerId===C.peerId?{...Y,isOnline:N,lastSeen:N?Date.now():Y.lastSeen}:Y)),m.current.delete(C.peerId)},j=y.current.get(C.peerId);if(j&&Date.now()-j.lastCheck<3e4){console.log(` Using cached status for ${C.username}: ${j.isOnline?"online":"offline"}`),m.current.delete(C.peerId);return}try{console.log(` Quick ping test for ${C.username} (${C.peerId})`);const N=f.current.connect(C.peerId,{reliable:!1,metadata:{type:"ping"}});let H=!1;const Y=()=>{if(!H){H=!0;try{N.close()}catch{}}},w=setTimeout(()=>{Y(),O(!1),console.log(` ${C.username} ping timeout - offline`)},1500);N.on("open",()=>{clearTimeout(w),Y(),O(!0),console.log(` ${C.username} ping success - online`)}),N.on("error",F=>{clearTimeout(w),Y(),O(!1),console.log(` ${C.username} ping error - offline:`,F.type)})}catch(N){O(!1),console.log(` ${C.username} ping failed:`,N)}},[]),M=U.useCallback(()=>{if(!f.current||!f.current.open){console.log(" Status peer not ready, attempting to initialize..."),p.current||x().then(()=>{setTimeout(()=>{f.current&&f.current.open&&M()},2e3)});return}const C=a.length>0?a:(()=>{try{const N=localStorage.getItem(`meshchat_friends_${c}`);if(N){const H=JSON.parse(N);return Array.isArray(H)?H:H.friends||[]}}catch{}return[]})();if(C.length===0){console.log(" No friends to check");return}console.log(" Starting lightweight status check for",C.length,"friends"),o(!0);let O=0;const j=3,E=[];for(let N=0;N<C.length;N+=j)E.push(C.slice(N,N+j));E.forEach((N,H)=>{setTimeout(()=>{N.forEach((Y,w)=>{setTimeout(()=>{_(Y).finally(()=>{O++,O>=C.length&&(o(!1),console.log(" Lightweight status check completed"))})},w*300)})},H*1500)})},[a,_,c,x]);return U.useEffect(()=>(x(),()=>{if(console.log(" Cleaning up status peer resources"),p.current=!1,d.current&&(clearInterval(d.current),d.current=null),f.current&&!f.current.destroyed)try{f.current.destroy()}catch(C){console.warn("Error destroying status peer:",C)}finally{f.current=null}m.current.clear(),y.current.clear()}),[x]),U.useEffect(()=>{if(f.current&&f.current.open&&a.length>0){console.log(" Setting up periodic status checks");const C=setTimeout(()=>{M()},5e3);return d.current=setInterval(()=>{M()},18e4),()=>{clearTimeout(C),d.current&&(clearInterval(d.current),d.current=null)}}},[(R=f.current)==null?void 0:R.open,a.length,M]),U.useEffect(()=>{f.current&&f.current.open&&a.length>0&&(console.log(" Status peer ready, triggering initial check"),setTimeout(()=>M(),2e3))},[(A=f.current)==null?void 0:A.open,M]),U.useEffect(()=>{const C=O=>{const{peerId:j,username:E}=O.detail;r(N=>{if(!N.some(Y=>Y.peerId===j)){const Y={peerId:j,username:E,addedTime:Date.now(),lastSeen:Date.now(),isOnline:!0};return[...N,Y]}return N})};return window.addEventListener("autoAddFriend",C),()=>{window.removeEventListener("autoAddFriend",C)}},[]),{friends:a,setFriends:r,isCheckingFriends:i,onlineFriendsCount:a.filter(C=>C.isOnline).length,refreshFriendsStatus:M}};class qr{static sanitizeForLog(a){return typeof a!="string"?String(a):a.replace(/[\r\n]/g," ").replace(/[\x00-\x1f\x7f]/g,"").substring(0,200)}static sanitizeForHTML(a){return typeof a!="string"?String(a):a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}static isValidPeerId(a){return typeof a!="string"?!1:/^[a-zA-Z0-9_-]{3,50}$/.test(a)&&a.length>=3}static sanitizeUsername(a){return typeof a!="string"?"":a.trim().replace(/[<>\"'&]/g,"").substring(0,50)}}const zy=(c,a,r)=>{const[i,o]=U.useState(null),[f,d]=U.useState([]),m=U.useRef(new Map),p=U.useCallback(A=>{const O={...A,id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`msg_${Date.now()}_${Math.random().toString(36).substring(2,11)}`,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};d(j=>[...j,O])},[]),y=U.useCallback(A=>{if(!A.trim()||!i)return;const C={type:"room-message",roomId:i.roomId,sender:c,content:A.trim(),timestamp:Date.now()};p({sender:c,content:A.trim(),isLocal:!0}),console.log("Broadcasting message to",m.current.size,"connections"),m.current.forEach((O,j)=>{if(j!==a)try{console.log("Sending message to:",j),O.send(C)}catch(E){console.error("Failed to send room message to:",j,E)}})},[i,c,a,p]),v=U.useCallback(A=>{const C=Date.now(),O=Math.random().toString(36).substring(2,11),j=Math.random().toString(36).substring(2,11),E=`room_${C}_${O}_${j}`,N={roomId:E,roomName:A.trim(),createdBy:a,createdAt:Date.now(),members:new Map([[a,{peerId:a,username:c,joinTime:Date.now(),isAlive:!0}]]),isHost:!0};return o(N),d([]),p({sender:"System",content:`Room "${A}" created`,isLocal:!1}),E},[a,c,p]),x=U.useCallback((A,C)=>{if(!(!i||!r))try{const O=r.connect(A);O.on("open",()=>{O.send({type:"room-invitation",roomId:i.roomId,roomName:i.roomName,inviterName:c,inviterPeerId:a})}),O.on("data",j=>{if(j.type==="room-join-accept"){const E={peerId:A,username:C,joinTime:Date.now(),isAlive:!0,connection:O};o(N=>{if(!N)return N;const H=new Map(N.members);return H.set(A,E),{...N,members:H}}),m.current.set(A,O),p({sender:"System",content:`${C} joined the room`,isLocal:!1}),O.send({type:"room-sync",roomId:i.roomId,roomName:i.roomName,members:Array.from(i.members.values()).map(N=>({peerId:N.peerId,username:N.username,joinTime:N.joinTime}))})}}),O.on("close",()=>{m.current.delete(A),o(j=>{if(!j)return j;const E=new Map(j.members),N=E.get(A);if(N){E.set(A,{...N,isAlive:!1});const H=j.roomId;setTimeout(()=>{o(Y=>{if(!Y||Y.roomId!==H)return Y;const w=new Map(Y.members),F=w.get(A);return F&&!F.isAlive&&w.delete(A),{...Y,members:w}})},5e3)}return{...j,members:E}}),p({sender:"System",content:`${C} disconnected`,isLocal:!1})})}catch(O){console.error("Failed to invite friend:",O)}},[i,r,c,a,p]),_=U.useCallback(()=>{m.current.forEach(A=>A.close()),m.current.clear(),o(null),d([])},[]),M=U.useCallback(A=>{console.log("Received room message:",A),A.type==="room-message"&&p({sender:A.sender,content:A.content,isLocal:!1})},[p]),R=U.useCallback(A=>{A.on("data",C=>{if(C.type==="room-invitation"){const O=qr.sanitizeForHTML(C.inviterName),j=qr.sanitizeForHTML(C.roomName);if(window.confirm(`${O} invited you to join room "${j}". Accept?`)){A.send({type:"room-join-accept"});const N={roomId:C.roomId,roomName:C.roomName,createdBy:C.inviterPeerId,createdAt:Date.now(),members:new Map([[a,{peerId:a,username:c,joinTime:Date.now(),isAlive:!0,connection:A}],[C.inviterPeerId,{peerId:C.inviterPeerId,username:C.inviterName,joinTime:Date.now(),isAlive:!0,connection:A}]]),isHost:!1};o(N),d([]),m.current.set(C.inviterPeerId,A),p({sender:"System",content:`Joined room "${C.roomName}"`,isLocal:!1})}else A.close()}else C.type==="room-sync"?i&&C.roomId===i.roomId&&o(O=>{if(!O)return O;const j=new Map(O.members);return C.members.forEach(E=>{E.peerId!==a&&j.set(E.peerId,{...E,isAlive:!0,connection:A})}),{...O,members:j}}):C.type==="room-message"&&(console.log("Processing room message from connection"),M(C))})},[a,c,M,p]);return U.useEffect(()=>{if(r)return r.on("connection",R),()=>{r.off("connection",R)}},[r,R]),{currentRoom:i,roomMessages:f,createRoom:v,inviteFriendToRoom:x,sendRoomMessage:y,leaveRoom:_}};class ui{static async generateHash(a){const i=new TextEncoder().encode(a),o=await crypto.subtle.digest("SHA-256",i);return Array.from(new Uint8Array(o)).map(d=>d.toString(16).padStart(2,"0")).join("").substring(0,16)}static async verifyHash(a,r){return await this.generateHash(a)===r}static generateMessageId(){return`msg_${Date.now()}_${Math.random().toString(36).substring(2,11)}`}}const By=(c,a,r)=>{const[i,o]=U.useState(new Map),[f,d]=U.useState(null),m=U.useRef(new Map),p=U.useRef(null),y=U.useCallback(async(j,E,N,H,Y,w)=>{const F={id:Y||ui.generateMessageId(),content:E,sender:N,timestamp:Date.now(),isLocal:H,type:"text",hash:w,status:H?"sending":"delivered"};o(V=>{const ne=new Map(V),W=ne.get(j);if(W){W.messages=[...W.messages,F];const te={peerId:j,username:W.username,messages:W.messages.map(le=>({...le,content:le.type==="file"&&le.fileName||le.content}))},se=JSON.parse(localStorage.getItem("chatHistory")||"[]"),X=se.findIndex(le=>le.peerId===j);X>=0?se[X]=te:se.push(te),localStorage.setItem("chatHistory",JSON.stringify(se)),window.dispatchEvent(new CustomEvent("chatHistoryUpdated",{detail:{peerId:j}}))}return ne})},[]),v=U.useCallback((j,E,N,H,Y,w)=>{const F={id:`file_${H}`,content:`${w?"Sending":"Receiving"} file: ${E}`,sender:Y,timestamp:Date.now(),isLocal:w,type:"file",transferId:H,fileName:E,fileSize:N};o(V=>{const ne=new Map(V),W=ne.get(j);return W&&(W.messages=[...W.messages,F]),ne})},[]),x=U.useCallback((j,E)=>{if(!a){console.warn("No peer instance available for chat");return}if(i.has(j)){d(j);return}if(m.current.has(j)){console.log("Reusing existing connection for chat"),d(j);return}const H=JSON.parse(localStorage.getItem("chatHistory")||"[]").find(w=>w.peerId===j),Y={peerId:j,username:E,messages:H?H.messages:[],connection:null,isConnected:!1};if(o(w=>new Map(w.set(j,Y))),d(j),!a||!a.open){console.log(` Chat created for ${E}, will connect when peer is ready`);return}try{console.log(` Starting chat connection to ${E} (${j})`);const w=a.connect(j,{metadata:{type:"friend_chat"},reliable:!0,serialization:"json"}),F=setTimeout(()=>{w.open||(console.log(` Chat connection timeout for ${E}, friend may be offline`),w.close())},5e3);w.on("open",()=>{clearTimeout(F),console.log(` Friend chat connected to ${E} (${j})`),o(V=>{const ne=new Map(V),W=ne.get(j);return W&&(W.connection=w,W.isConnected=!0),ne}),m.current.set(j,w),r&&r(j,w)}),w.on("error",V=>{clearTimeout(F),console.log(` Friend ${E} appears to be offline, connection failed silently`)}),w.on("data",async V=>{if(V.type==="friend_message"){if(V.hash&&!await ui.verifyHash(V.content,V.hash)){console.warn("Message integrity check failed");return}await y(j,V.content,V.sender,!1,V.id,V.hash),V.id&&w.send({type:"message_ack",messageId:V.id})}else V.type==="message_ack"?o(ne=>{const W=new Map(ne),te=W.get(j);if(te){const se=te.messages.findIndex(X=>X.id===V.messageId);se>=0&&(te.messages=[...te.messages],te.messages[se]={...te.messages[se],status:"delivered"})}return W}):V.type==="file_notification"&&v(j,V.fileName,V.fileSize,V.transferId,V.sender,!1)}),w.on("close",()=>{console.log(` Friend chat disconnected from ${E}`),o(V=>{const ne=new Map(V),W=ne.get(j);return W&&(W.isConnected=!1,W.connection=null),ne}),m.current.delete(j)})}catch(w){console.error("Failed to start friend chat:",w)}},[a,y,v,r]),_=U.useCallback(async(j,E)=>{const N=m.current.get(j);if(!N||!E.trim())return console.warn("No connection or empty message"),!1;if(!N.open)return console.warn("Connection is not open"),!1;try{const H=ui.generateMessageId(),Y=await ui.generateHash(E.trim());return N.send({type:"friend_message",id:H,content:E.trim(),sender:c,timestamp:Date.now(),hash:Y}),await y(j,E.trim(),c,!0,H,Y),!0}catch(H){return console.error("Failed to send message:",H),!1}},[c,y]),M=U.useCallback((j,E,N,H)=>{const Y=m.current.get(j);if(Y)try{Y.send({type:"file_notification",fileName:E,fileSize:N,transferId:H,sender:c,timestamp:Date.now()}),v(j,E,N,H,c,!0)}catch(w){console.error("Failed to send file notification:",w)}},[c,v]),R=U.useCallback(j=>{var E;((E=j.metadata)==null?void 0:E.type)==="friend_chat"&&(j.on("data",N=>{const H=j.peer;o(Y=>{if(!Y.has(H)){const w={peerId:H,username:N.sender,messages:[],connection:j,isConnected:!0};return new Map(Y.set(H,w))}return Y}),N.type==="friend_message"?(async()=>{if(N.hash&&!await ui.verifyHash(N.content,N.hash)){console.warn("Message integrity check failed");return}await y(H,N.content,N.sender,!1,N.id,N.hash),N.id&&j.send({type:"message_ack",messageId:N.id})})():N.type==="message_ack"?o(Y=>{const w=new Map(Y),F=w.get(H);if(F){const V=F.messages.findIndex(ne=>ne.id===N.messageId);V>=0&&(F.messages=[...F.messages],F.messages[V]={...F.messages[V],status:"delivered"})}return w}):N.type==="file_notification"&&v(H,N.fileName,N.fileSize,N.transferId,N.sender,!1),m.current.set(H,j),r&&r(H,j)}),j.on("close",()=>{const N=j.peer;o(H=>{const Y=new Map(H),w=Y.get(N);return w&&(w.isConnected=!1,w.connection=null),Y}),m.current.delete(N)}))},[y,v,r]);U.useEffect(()=>{if(a)return a.on("connection",R),()=>{a.off("connection",R)}},[a,R]);const A=U.useCallback(()=>{o(j=>{const E=new Map(j);let N=!1;return E.forEach((H,Y)=>{const w=m.current.get(Y),F=w&&w.open&&!w.destroyed;H.isConnected!==F&&(console.log(` Chat connection status changed for ${H.username}: ${F?"connected":"disconnected"}`),H.isConnected=!!F,N=!0)}),N?new Map(E):j})},[]);U.useEffect(()=>{if(i.size>0)return p.current=setInterval(()=>{A()},5e3),()=>{p.current&&(clearInterval(p.current),p.current=null)}},[i.size,A]),U.useEffect(()=>()=>{p.current&&(clearInterval(p.current),p.current=null),m.current.forEach(j=>j.close()),m.current.clear()},[]);const C=()=>f?i.get(f):null,O=j=>{const E=m.current.get(j);E&&E.close(),o(N=>{const H=new Map(N);return H.delete(j),H}),f===j&&d(null)};return{activeChats:i,currentChatPeerId:f,currentChat:C(),startChat:x,sendMessage:_,sendFileNotification:M,closeChat:O,setCurrentChatPeerId:d}};class Ln{constructor(){this.transfers=new Map,this.connections=new Map,this.chunkSize=16384,this.maxFileSize=100*1024*1024,this.completedFiles=new Map}static getInstance(){return Ln.instance||(Ln.instance=new Ln),Ln.instance}registerConnection(a,r){this.connections.get(a)===r&&r.__ftm_registered||(this.connections.set(a,r),r.__ftm_registered=!0,r.on("data",o=>{this.handleIncomingData(a,o)}),r.on("close",()=>{this.connections.delete(a),this.cancelTransfersForPeer(a)}))}async sendFile(a,r,i){if(a.size>this.maxFileSize)throw new Error(`File too large, maximum supported ${this.maxFileSize/1024/1024}MB`);const o=this.connections.get(r);if(!o)throw new Error("No connection found to receiver");const f=`transfer_${Date.now()}_${Math.random().toString(36).substring(2,11)}`;let d;(a.type.startsWith("image/")||a.type.startsWith("video/"))&&(d=URL.createObjectURL(a));const m={id:f,fileName:a.name,fileSize:a.size,fileType:a.type,sender:i,receiver:r,status:"transferring",progress:0,chunks:[],totalChunks:Math.ceil(a.size/this.chunkSize),receivedChunks:0,previewUrl:d};this.transfers.set(f,m);const p={id:f,fileName:a.name,fileSize:a.size,fileType:a.type,sender:i,timestamp:Date.now()};try{try{o.send({type:"file_transfer_request",data:p})}catch{}return console.log(` Starting to send file: ${a.name} (${this.formatFileSize(a.size)})`),this.startFileTransfer(f,a).catch(y=>{console.error("startFileTransfer error",y);const v=this.transfers.get(f);v&&(v.status="failed",v.error=y instanceof Error?y.message:String(y))}),f}catch(y){throw this.transfers.delete(f),y}}acceptFileTransfer(a){const r=this.transfers.get(a);if(!r||r.status!=="pending")return!1;const i=this.connections.get(r.sender);if(!i)return!1;r.status="accepted",r.startTime=Date.now();try{return i.send({type:"file_transfer_response",data:{transferId:a,accepted:!0}}),console.log(` Accept file transfer: ${r.fileName}`),!0}catch(o){return console.error("Failed to send accept response:",o),!1}}rejectFileTransfer(a){const r=this.transfers.get(a);if(!r||r.status!=="pending")return!1;const i=this.connections.get(r.sender);if(!i)return!1;r.status="rejected";try{return i.send({type:"file_transfer_response",data:{transferId:a,accepted:!1}}),console.log(` Reject file transfer: ${r.fileName}`),this.transfers.delete(a),!0}catch(o){return console.error("Failed to send reject response:",o),!1}}cancelFileTransfer(a){const r=this.transfers.get(a);if(!r)return!1;const i=r.receiver||r.sender,o=this.connections.get(i);if(o)try{o.send({type:"file_transfer_cancel",data:{transferId:a}})}catch(f){console.error("Failed to send cancel message:",f)}return r.status="cancelled",console.log(` Cancel file transfer: ${r.fileName}`),setTimeout(()=>{this.transfers.delete(a)},3e3),!0}async startFileTransfer(a,r){const i=this.transfers.get(a);if(!i||i.status==="cancelled"||i.status==="completed"||i.status==="failed"){console.log(`[fileTransfer] Skip transfer ${a}: status=${(i==null?void 0:i.status)||"not found"}`);return}const o=this.connections.get(i.receiver||i.sender);if(!o){i.status="failed",i.error="Connection lost";return}i.status="transferring";try{const f=await r.arrayBuffer(),d=this.transfers.get(a);if(!d||d.status==="cancelled"){console.warn(`[fileTransfer] transfer ${a} cancelled during file read, aborting`);return}const m=new Uint8Array(f);for(let p=0;p<i.totalChunks;p++){const y=p*this.chunkSize,v=Math.min(y+this.chunkSize,m.length),x=m.slice(y,v);await this.sendChunk(a,p,x),i.progress=Math.round((p+1)/i.totalChunks*100);const _=this.transfers.get(a);if(!_||_.status==="cancelled")return;p%10===0&&await new Promise(M=>setTimeout(M,1))}o.send({type:"file_transfer_complete",data:{transferId:a}}),i.status="completed",i.endTime=Date.now(),i.progress=100,console.log(` File transfer completed: ${i.fileName}`)}catch(f){i.status="failed",i.error=f instanceof Error?f.message:"Transfer failed",console.error("File transfer failed:",f)}}async sendChunk(a,r,i){const o=this.transfers.get(a);if(!o)return;const f=this.connections.get(o.receiver||o.sender);if(!f)throw new Error("Connection lost");const d=f.dc||f._dc||f.peerConnection;return await(async()=>{try{if(d&&typeof d.bufferedAmount=="number"){let y=0;for(;d.bufferedAmount>1048576&&y<200;)await new Promise(v=>setTimeout(v,20)),y++}}catch{}})(),new Promise((p,y)=>{try{f.send({type:"file_chunk",data:{transferId:a,chunkIndex:r,chunk:i.buffer||i,isLastChunk:r===o.totalChunks-1}});try{const v=d&&typeof d.bufferedAmount=="number"?d.bufferedAmount:f.bufferedAmount;typeof v=="number"&&console.debug(`[fileTransfer] sent chunk ${r} transfer=${a} bufferedAmount=${v}`)}catch{}p()}catch(v){y(v)}})}handleIncomingData(a,r){switch(r.type){case"file_transfer_request":this.handleFileTransferRequest(a,r.data);break;case"file_transfer_response":this.handleFileTransferResponse(a,r.data);break;case"file_chunk":this.handleFileChunk(a,r.data);break;case"file_transfer_complete":this.handleFileTransferComplete(a,r.data);break;case"file_transfer_cancel":this.handleFileTransferCancel(a,r.data);break}}handleFileTransferRequest(a,r){const i={id:r.id,fileName:r.fileName,fileSize:r.fileSize,fileType:r.fileType,sender:a,receiver:"",status:"transferring",progress:0,chunks:new Array(Math.ceil(r.fileSize/this.chunkSize)),totalChunks:Math.ceil(r.fileSize/this.chunkSize),receivedChunks:0};this.transfers.set(r.id,i),console.log(` Auto-accept file transfer: ${r.fileName} from ${r.sender}`)}async handleFileTransferResponse(a,r){const i=this.transfers.get(r.transferId);i&&(r.accepted?console.log(` File transfer accepted: ${i.fileName}`):(console.log(` File transfer rejected: ${i.fileName}`),i.status="rejected",setTimeout(()=>{this.transfers.delete(r.transferId)},3e3)))}handleFileChunk(a,r){const{transferId:i,chunkIndex:o,chunk:f}=r,d=this.transfers.get(i);if(!d){console.warn(`[fileTransfer] Received chunk for unknown transfer: ${i}`);return}if(d.status==="cancelled"||d.status==="completed"||d.status==="failed"){console.warn(`[fileTransfer] Ignoring chunk for ended transfer: ${i} status=${d.status}`);return}if(d.status!=="transferring"&&(d.status="transferring",d.startTime=Date.now()),d.chunks[o]){console.debug(`[fileTransfer] duplicate chunk ignored transfer=${i} idx=${o}`);return}let m;f instanceof Uint8Array?m=f:f instanceof ArrayBuffer?m=new Uint8Array(f):Array.isArray(f)?m=new Uint8Array(f):f&&f.buffer?m=new Uint8Array(f.buffer):m=new Uint8Array(f),d.chunks[o]=m,d.receivedChunks=(d.receivedChunks||0)+1,d.progress=Math.round(d.receivedChunks/d.totalChunks*100),d.receivedChunks===d.totalChunks&&this.assembleFile(d)}assembleFile(a){try{const r=a.chunks.reduce((d,m)=>d+((m==null?void 0:m.length)||0),0),i=new Uint8Array(r);let o=0;for(const d of a.chunks)d&&(i.set(d,o),o+=d.length);const f=new Blob([i],{type:a.fileType});this.completedFiles.set(a.id,f),this.isMediaFile(a.fileType)&&(a.previewUrl=URL.createObjectURL(f),a.fileType.startsWith("image/")&&this.generateThumbnail(f,a.fileType).then(d=>{d&&(a.thumbnailUrl=d)})),a.status="completed",a.endTime=Date.now(),a.progress=100,console.log(` File reception completed: ${a.fileName}`),this.notifyFileReceived(a)}catch(r){a.status="failed",a.error=r instanceof Error?r.message:"File assembly failed",console.error("File assembly failed:",r)}}handleFileTransferComplete(a,r){const i=this.transfers.get(r.transferId);i&&(i.status="completed",i.endTime=Date.now(),console.log(` File transfer completion confirmed: ${i.fileName}`))}handleFileTransferCancel(a,r){const i=this.transfers.get(r.transferId);i&&(i.status="cancelled",console.log(` File transfer cancelled: ${i.fileName}`),setTimeout(()=>{this.transfers.delete(r.transferId)},3e3))}cancelTransfersForPeer(a){for(const[r,i]of this.transfers)(i.sender===a||i.receiver===a)&&(i.status==="transferring"||i.status==="accepted"||i.status==="pending")&&(i.status="cancelled",i.error="Connection disconnected")}getTransfers(){return Array.from(this.transfers.values())}getTransfer(a){return this.transfers.get(a)}formatFileSize(a){if(a===0)return"0 B";const r=1024,i=["B","KB","MB","GB"],o=Math.floor(Math.log(a)/Math.log(r));return parseFloat((a/Math.pow(r,o)).toFixed(2))+" "+i[o]}async startTransferWithFile(a,r){await this.startFileTransfer(a,r)}isMediaFile(a){return a.startsWith("image/")||a.startsWith("video/")||a.startsWith("audio/")}async generateThumbnail(a,r){return r.startsWith("image/")?new Promise(i=>{const o=new Image,f=document.createElement("canvas"),d=f.getContext("2d");if(!d){i(null);return}o.onload=()=>{let{width:p,height:y}=o;p>y?p>150&&(y=y*150/p,p=150):y>150&&(p=p*150/y,y=150),f.width=p,f.height=y,d.drawImage(o,0,0,p,y),f.toBlob(v=>{if(v){const x=URL.createObjectURL(v);i(x)}else i(null)},"image/jpeg",.8),URL.revokeObjectURL(o.src)},o.onerror=()=>{i(null),URL.revokeObjectURL(o.src)},o.src=URL.createObjectURL(a)}):null}getFilePreviewUrl(a){const r=this.transfers.get(a);if(r&&r.previewUrl)return r.previewUrl;const i=this.completedFiles.get(a);if(i){const o=URL.createObjectURL(i);return r&&(r.previewUrl=o),o}return null}getFileBlob(a){return this.completedFiles.get(a)||null}cleanupFileResources(a){const r=this.transfers.get(a);r&&(r.previewUrl&&(URL.revokeObjectURL(r.previewUrl),r.previewUrl=void 0),r.thumbnailUrl&&(URL.revokeObjectURL(r.thumbnailUrl),r.thumbnailUrl=void 0)),this.completedFiles.delete(a)}notifyFileReceived(a){window.dispatchEvent(new CustomEvent("fileReceived",{detail:a}))}}const Dp=(c,a)=>{const[r,i]=U.useState([]),[o,f]=U.useState([]),[d,m]=U.useState(!1),p=U.useRef(Ln.getInstance()),y=U.useCallback(()=>{const w=p.current.getTransfers();i(w);const F=w.filter(V=>V.sender!==a&&(V.status==="pending"||V.status==="transferring"));f(F)},[a]),v=U.useCallback(async(w,F)=>{try{const V=await p.current.sendFile(w,F,a);return y(),V}catch(V){throw console.error(":",V),V}},[a,y]),x=U.useCallback(w=>{const F=p.current.acceptFileTransfer(w);return F&&y(),F},[y]),_=U.useCallback(w=>{const F=p.current.cancelFileTransfer(w);return F&&y(),F},[y]),M=U.useCallback(w=>{const F=p.current.cancelFileTransfer(w);return F&&y(),F},[y]),R=U.useCallback((w,F)=>{p.current.registerConnection(w,F)},[]);U.useEffect(()=>{const w=setInterval(y,1e3);return()=>clearInterval(w)},[y]),U.useEffect(()=>()=>{},[]);const A=U.useCallback(()=>r.filter(w=>w.status==="transferring"||w.status==="accepted"||w.status==="pending"),[r]),C=U.useCallback(()=>r.filter(w=>w.status==="completed"||w.status==="failed"||w.status==="cancelled"||w.status==="rejected"),[r]),O=U.useCallback(w=>{if(w===0)return"0 B";const F=1024,V=["B","KB","MB","GB"],ne=Math.floor(Math.log(w)/Math.log(F));return parseFloat((w/Math.pow(F,ne)).toFixed(2))+" "+V[ne]},[]),j=U.useCallback(w=>{if(!w.startTime||w.status!=="transferring")return"";const F=(Date.now()-w.startTime)/1e3,ne=w.progress/100*w.fileSize/F;return O(ne)+"/s"},[O]),E=U.useCallback(w=>{if(!w.startTime||w.status!=="transferring"||w.progress===0)return"";const F=(Date.now()-w.startTime)/1e3,V=w.progress/100*w.fileSize,ne=V/F,te=(w.fileSize-V)/ne;return te<60?`${Math.round(te)}`:te<3600?`${Math.round(te/60)}`:`${Math.round(te/3600)}`},[]),N=U.useCallback(w=>p.current.getFilePreviewUrl(w),[]),H=U.useCallback(w=>p.current.getFileBlob(w),[]),Y=U.useCallback(w=>p.current.getTransfer(w),[]);return{transfers:r,incomingRequests:o,isTransferModalOpen:d,setIsTransferModalOpen:m,sendFile:v,acceptFileTransfer:x,rejectFileTransfer:_,cancelFileTransfer:M,registerConnection:R,getActiveTransfers:A,getCompletedTransfers:C,formatFileSize:O,formatTransferSpeed:j,estimateRemainingTime:E,getFilePreviewUrl:N,getFileBlob:H,getTransfer:Y}},um={STATUS_CHECK_INTERVAL:12e4,INITIAL_CHECK_DELAY:2e3,CONNECTION_TIMEOUT:5e3,STAGGER_DELAY:1e3,PRESETS:{LOW_FREQUENCY:{STATUS_CHECK_INTERVAL:3e5,CONNECTION_TIMEOUT:8e3,STAGGER_DELAY:2e3},MEDIUM_FREQUENCY:{STATUS_CHECK_INTERVAL:12e4,CONNECTION_TIMEOUT:5e3,STAGGER_DELAY:1e3},HIGH_FREQUENCY:{STATUS_CHECK_INTERVAL:6e4,CONNECTION_TIMEOUT:3e3,STAGGER_DELAY:500},ORIGINAL:{STATUS_CHECK_INTERVAL:3e4,CONNECTION_TIMEOUT:5e3,STAGGER_DELAY:1e3}}},Ly=c=>{const a=um.PRESETS[c];Object.assign(um,a),console.log(` Applied ${c} preset:`,a)};var is={},yc,fm;function Hy(){return fm||(fm=1,yc=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),yc}var vc={},Un={},dm;function ma(){if(dm)return Un;dm=1;let c;const a=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Un.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},Un.getSymbolTotalCodewords=function(i){return a[i]},Un.getBCHDigit=function(r){let i=0;for(;r!==0;)i++,r>>>=1;return i},Un.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');c=i},Un.isKanjiModeEnabled=function(){return typeof c<"u"},Un.toSJIS=function(i){return c(i)},Un}var bc={},hm;function au(){return hm||(hm=1,(function(c){c.L={bit:1},c.M={bit:0},c.Q={bit:3},c.H={bit:2};function a(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return c.L;case"m":case"medium":return c.M;case"q":case"quartile":return c.Q;case"h":case"high":return c.H;default:throw new Error("Unknown EC Level: "+r)}}c.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},c.from=function(i,o){if(c.isValid(i))return i;try{return a(i)}catch{return o}}})(bc)),bc}var xc,mm;function qy(){if(mm)return xc;mm=1;function c(){this.buffer=[],this.length=0}return c.prototype={get:function(a){const r=Math.floor(a/8);return(this.buffer[r]>>>7-a%8&1)===1},put:function(a,r){for(let i=0;i<r;i++)this.putBit((a>>>r-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(a){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),a&&(this.buffer[r]|=128>>>this.length%8),this.length++}},xc=c,xc}var Sc,pm;function $y(){if(pm)return Sc;pm=1;function c(a){if(!a||a<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=a,this.data=new Uint8Array(a*a),this.reservedBit=new Uint8Array(a*a)}return c.prototype.set=function(a,r,i,o){const f=a*this.size+r;this.data[f]=i,o&&(this.reservedBit[f]=!0)},c.prototype.get=function(a,r){return this.data[a*this.size+r]},c.prototype.xor=function(a,r,i){this.data[a*this.size+r]^=i},c.prototype.isReserved=function(a,r){return this.reservedBit[a*this.size+r]},Sc=c,Sc}var Cc={},gm;function Py(){return gm||(gm=1,(function(c){const a=ma().getSymbolSize;c.getRowColCoords=function(i){if(i===1)return[];const o=Math.floor(i/7)+2,f=a(i),d=f===145?26:Math.ceil((f-13)/(2*o-2))*2,m=[f-7];for(let p=1;p<o-1;p++)m[p]=m[p-1]-d;return m.push(6),m.reverse()},c.getPositions=function(i){const o=[],f=c.getRowColCoords(i),d=f.length;for(let m=0;m<d;m++)for(let p=0;p<d;p++)m===0&&p===0||m===0&&p===d-1||m===d-1&&p===0||o.push([f[m],f[p]]);return o}})(Cc)),Cc}var _c={},ym;function Yy(){if(ym)return _c;ym=1;const c=ma().getSymbolSize,a=7;return _c.getPositions=function(i){const o=c(i);return[[0,0],[o-a,0],[0,o-a]]},_c}var Tc={},vm;function Gy(){return vm||(vm=1,(function(c){c.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const a={N1:3,N2:3,N3:40,N4:10};c.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},c.from=function(o){return c.isValid(o)?parseInt(o,10):void 0},c.getPenaltyN1=function(o){const f=o.size;let d=0,m=0,p=0,y=null,v=null;for(let x=0;x<f;x++){m=p=0,y=v=null;for(let _=0;_<f;_++){let M=o.get(x,_);M===y?m++:(m>=5&&(d+=a.N1+(m-5)),y=M,m=1),M=o.get(_,x),M===v?p++:(p>=5&&(d+=a.N1+(p-5)),v=M,p=1)}m>=5&&(d+=a.N1+(m-5)),p>=5&&(d+=a.N1+(p-5))}return d},c.getPenaltyN2=function(o){const f=o.size;let d=0;for(let m=0;m<f-1;m++)for(let p=0;p<f-1;p++){const y=o.get(m,p)+o.get(m,p+1)+o.get(m+1,p)+o.get(m+1,p+1);(y===4||y===0)&&d++}return d*a.N2},c.getPenaltyN3=function(o){const f=o.size;let d=0,m=0,p=0;for(let y=0;y<f;y++){m=p=0;for(let v=0;v<f;v++)m=m<<1&2047|o.get(y,v),v>=10&&(m===1488||m===93)&&d++,p=p<<1&2047|o.get(v,y),v>=10&&(p===1488||p===93)&&d++}return d*a.N3},c.getPenaltyN4=function(o){let f=0;const d=o.data.length;for(let p=0;p<d;p++)f+=o.data[p];return Math.abs(Math.ceil(f*100/d/5)-10)*a.N4};function r(i,o,f){switch(i){case c.Patterns.PATTERN000:return(o+f)%2===0;case c.Patterns.PATTERN001:return o%2===0;case c.Patterns.PATTERN010:return f%3===0;case c.Patterns.PATTERN011:return(o+f)%3===0;case c.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(f/3))%2===0;case c.Patterns.PATTERN101:return o*f%2+o*f%3===0;case c.Patterns.PATTERN110:return(o*f%2+o*f%3)%2===0;case c.Patterns.PATTERN111:return(o*f%3+(o+f)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}c.applyMask=function(o,f){const d=f.size;for(let m=0;m<d;m++)for(let p=0;p<d;p++)f.isReserved(p,m)||f.xor(p,m,r(o,p,m))},c.getBestMask=function(o,f){const d=Object.keys(c.Patterns).length;let m=0,p=1/0;for(let y=0;y<d;y++){f(y),c.applyMask(y,o);const v=c.getPenaltyN1(o)+c.getPenaltyN2(o)+c.getPenaltyN3(o)+c.getPenaltyN4(o);c.applyMask(y,o),v<p&&(p=v,m=y)}return m}})(Tc)),Tc}var Ar={},bm;function Ap(){if(bm)return Ar;bm=1;const c=au(),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Ar.getBlocksCount=function(o,f){switch(f){case c.L:return a[(o-1)*4+0];case c.M:return a[(o-1)*4+1];case c.Q:return a[(o-1)*4+2];case c.H:return a[(o-1)*4+3];default:return}},Ar.getTotalCodewordsCount=function(o,f){switch(f){case c.L:return r[(o-1)*4+0];case c.M:return r[(o-1)*4+1];case c.Q:return r[(o-1)*4+2];case c.H:return r[(o-1)*4+3];default:return}},Ar}var Ec={},fi={},xm;function Vy(){if(xm)return fi;xm=1;const c=new Uint8Array(512),a=new Uint8Array(256);return(function(){let i=1;for(let o=0;o<255;o++)c[o]=i,a[i]=o,i<<=1,i&256&&(i^=285);for(let o=255;o<512;o++)c[o]=c[o-255]})(),fi.log=function(i){if(i<1)throw new Error("log("+i+")");return a[i]},fi.exp=function(i){return c[i]},fi.mul=function(i,o){return i===0||o===0?0:c[a[i]+a[o]]},fi}var Sm;function Qy(){return Sm||(Sm=1,(function(c){const a=Vy();c.mul=function(i,o){const f=new Uint8Array(i.length+o.length-1);for(let d=0;d<i.length;d++)for(let m=0;m<o.length;m++)f[d+m]^=a.mul(i[d],o[m]);return f},c.mod=function(i,o){let f=new Uint8Array(i);for(;f.length-o.length>=0;){const d=f[0];for(let p=0;p<o.length;p++)f[p]^=a.mul(o[p],d);let m=0;for(;m<f.length&&f[m]===0;)m++;f=f.slice(m)}return f},c.generateECPolynomial=function(i){let o=new Uint8Array([1]);for(let f=0;f<i;f++)o=c.mul(o,new Uint8Array([1,a.exp(f)]));return o}})(Ec)),Ec}var Rc,Cm;function Fy(){if(Cm)return Rc;Cm=1;const c=Qy();function a(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return a.prototype.initialize=function(i){this.degree=i,this.genPoly=c.generateECPolynomial(this.degree)},a.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(i.length+this.degree);o.set(i);const f=c.mod(o,this.genPoly),d=this.degree-f.length;if(d>0){const m=new Uint8Array(this.degree);return m.set(f,d),m}return f},Rc=a,Rc}var Nc={},jc={},Mc={},_m;function wp(){return _m||(_m=1,Mc.isValid=function(a){return!isNaN(a)&&a>=1&&a<=40}),Mc}var Vt={},Tm;function kp(){if(Tm)return Vt;Tm=1;const c="[0-9]+",a="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;Vt.KANJI=new RegExp(r,"g"),Vt.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Vt.BYTE=new RegExp(i,"g"),Vt.NUMERIC=new RegExp(c,"g"),Vt.ALPHANUMERIC=new RegExp(a,"g");const o=new RegExp("^"+r+"$"),f=new RegExp("^"+c+"$"),d=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Vt.testKanji=function(p){return o.test(p)},Vt.testNumeric=function(p){return f.test(p)},Vt.testAlphanumeric=function(p){return d.test(p)},Vt}var Em;function pa(){return Em||(Em=1,(function(c){const a=wp(),r=kp();c.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},c.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},c.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},c.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},c.MIXED={bit:-1},c.getCharCountIndicator=function(f,d){if(!f.ccBits)throw new Error("Invalid mode: "+f);if(!a.isValid(d))throw new Error("Invalid version: "+d);return d>=1&&d<10?f.ccBits[0]:d<27?f.ccBits[1]:f.ccBits[2]},c.getBestModeForData=function(f){return r.testNumeric(f)?c.NUMERIC:r.testAlphanumeric(f)?c.ALPHANUMERIC:r.testKanji(f)?c.KANJI:c.BYTE},c.toString=function(f){if(f&&f.id)return f.id;throw new Error("Invalid mode")},c.isValid=function(f){return f&&f.bit&&f.ccBits};function i(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return c.NUMERIC;case"alphanumeric":return c.ALPHANUMERIC;case"kanji":return c.KANJI;case"byte":return c.BYTE;default:throw new Error("Unknown mode: "+o)}}c.from=function(f,d){if(c.isValid(f))return f;try{return i(f)}catch{return d}}})(jc)),jc}var Rm;function Iy(){return Rm||(Rm=1,(function(c){const a=ma(),r=Ap(),i=au(),o=pa(),f=wp(),d=7973,m=a.getBCHDigit(d);function p(_,M,R){for(let A=1;A<=40;A++)if(M<=c.getCapacity(A,R,_))return A}function y(_,M){return o.getCharCountIndicator(_,M)+4}function v(_,M){let R=0;return _.forEach(function(A){const C=y(A.mode,M);R+=C+A.getBitsLength()}),R}function x(_,M){for(let R=1;R<=40;R++)if(v(_,R)<=c.getCapacity(R,M,o.MIXED))return R}c.from=function(M,R){return f.isValid(M)?parseInt(M,10):R},c.getCapacity=function(M,R,A){if(!f.isValid(M))throw new Error("Invalid QR Code version");typeof A>"u"&&(A=o.BYTE);const C=a.getSymbolTotalCodewords(M),O=r.getTotalCodewordsCount(M,R),j=(C-O)*8;if(A===o.MIXED)return j;const E=j-y(A,M);switch(A){case o.NUMERIC:return Math.floor(E/10*3);case o.ALPHANUMERIC:return Math.floor(E/11*2);case o.KANJI:return Math.floor(E/13);case o.BYTE:default:return Math.floor(E/8)}},c.getBestVersionForData=function(M,R){let A;const C=i.from(R,i.M);if(Array.isArray(M)){if(M.length>1)return x(M,C);if(M.length===0)return 1;A=M[0]}else A=M;return p(A.mode,A.getLength(),C)},c.getEncodedBits=function(M){if(!f.isValid(M)||M<7)throw new Error("Invalid QR Code version");let R=M<<12;for(;a.getBCHDigit(R)-m>=0;)R^=d<<a.getBCHDigit(R)-m;return M<<12|R}})(Nc)),Nc}var Dc={},Nm;function Xy(){if(Nm)return Dc;Nm=1;const c=ma(),a=1335,r=21522,i=c.getBCHDigit(a);return Dc.getEncodedBits=function(f,d){const m=f.bit<<3|d;let p=m<<10;for(;c.getBCHDigit(p)-i>=0;)p^=a<<c.getBCHDigit(p)-i;return(m<<10|p)^r},Dc}var Ac={},wc,jm;function Ky(){if(jm)return wc;jm=1;const c=pa();function a(r){this.mode=c.NUMERIC,this.data=r.toString()}return a.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(i){let o,f,d;for(o=0;o+3<=this.data.length;o+=3)f=this.data.substr(o,3),d=parseInt(f,10),i.put(d,10);const m=this.data.length-o;m>0&&(f=this.data.substr(o),d=parseInt(f,10),i.put(d,m*3+1))},wc=a,wc}var kc,Mm;function Zy(){if(Mm)return kc;Mm=1;const c=pa(),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(i){this.mode=c.ALPHANUMERIC,this.data=i}return r.getBitsLength=function(o){return 11*Math.floor(o/2)+6*(o%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(o){let f;for(f=0;f+2<=this.data.length;f+=2){let d=a.indexOf(this.data[f])*45;d+=a.indexOf(this.data[f+1]),o.put(d,11)}this.data.length%2&&o.put(a.indexOf(this.data[f]),6)},kc=r,kc}var Oc,Dm;function Jy(){if(Dm)return Oc;Dm=1;const c=pa();function a(r){this.mode=c.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return a.getBitsLength=function(i){return i*8},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){for(let i=0,o=this.data.length;i<o;i++)r.put(this.data[i],8)},Oc=a,Oc}var Uc,Am;function Wy(){if(Am)return Uc;Am=1;const c=pa(),a=ma();function r(i){this.mode=c.KANJI,this.data=i}return r.getBitsLength=function(o){return o*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(i){let o;for(o=0;o<this.data.length;o++){let f=a.toSJIS(this.data[o]);if(f>=33088&&f<=40956)f-=33088;else if(f>=57408&&f<=60351)f-=49472;else throw new Error("Invalid SJIS character: "+this.data[o]+`
Make sure your charset is UTF-8`);f=(f>>>8&255)*192+(f&255),i.put(f,13)}},Uc=r,Uc}var zc={exports:{}},wm;function ev(){return wm||(wm=1,(function(c){var a={single_source_shortest_paths:function(r,i,o){var f={},d={};d[i]=0;var m=a.PriorityQueue.make();m.push(i,0);for(var p,y,v,x,_,M,R,A,C;!m.empty();){p=m.pop(),y=p.value,x=p.cost,_=r[y]||{};for(v in _)_.hasOwnProperty(v)&&(M=_[v],R=x+M,A=d[v],C=typeof d[v]>"u",(C||A>R)&&(d[v]=R,m.push(v,R),f[v]=y))}if(typeof o<"u"&&typeof d[o]>"u"){var O=["Could not find a path from ",i," to ",o,"."].join("");throw new Error(O)}return f},extract_shortest_path_from_predecessor_list:function(r,i){for(var o=[],f=i;f;)o.push(f),r[f],f=r[f];return o.reverse(),o},find_path:function(r,i,o){var f=a.single_source_shortest_paths(r,i,o);return a.extract_shortest_path_from_predecessor_list(f,o)},PriorityQueue:{make:function(r){var i=a.PriorityQueue,o={},f;r=r||{};for(f in i)i.hasOwnProperty(f)&&(o[f]=i[f]);return o.queue=[],o.sorter=r.sorter||i.default_sorter,o},default_sorter:function(r,i){return r.cost-i.cost},push:function(r,i){var o={value:r,cost:i};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};c.exports=a})(zc)),zc.exports}var km;function tv(){return km||(km=1,(function(c){const a=pa(),r=Ky(),i=Zy(),o=Jy(),f=Wy(),d=kp(),m=ma(),p=ev();function y(O){return unescape(encodeURIComponent(O)).length}function v(O,j,E){const N=[];let H;for(;(H=O.exec(E))!==null;)N.push({data:H[0],index:H.index,mode:j,length:H[0].length});return N}function x(O){const j=v(d.NUMERIC,a.NUMERIC,O),E=v(d.ALPHANUMERIC,a.ALPHANUMERIC,O);let N,H;return m.isKanjiModeEnabled()?(N=v(d.BYTE,a.BYTE,O),H=v(d.KANJI,a.KANJI,O)):(N=v(d.BYTE_KANJI,a.BYTE,O),H=[]),j.concat(E,N,H).sort(function(w,F){return w.index-F.index}).map(function(w){return{data:w.data,mode:w.mode,length:w.length}})}function _(O,j){switch(j){case a.NUMERIC:return r.getBitsLength(O);case a.ALPHANUMERIC:return i.getBitsLength(O);case a.KANJI:return f.getBitsLength(O);case a.BYTE:return o.getBitsLength(O)}}function M(O){return O.reduce(function(j,E){const N=j.length-1>=0?j[j.length-1]:null;return N&&N.mode===E.mode?(j[j.length-1].data+=E.data,j):(j.push(E),j)},[])}function R(O){const j=[];for(let E=0;E<O.length;E++){const N=O[E];switch(N.mode){case a.NUMERIC:j.push([N,{data:N.data,mode:a.ALPHANUMERIC,length:N.length},{data:N.data,mode:a.BYTE,length:N.length}]);break;case a.ALPHANUMERIC:j.push([N,{data:N.data,mode:a.BYTE,length:N.length}]);break;case a.KANJI:j.push([N,{data:N.data,mode:a.BYTE,length:y(N.data)}]);break;case a.BYTE:j.push([{data:N.data,mode:a.BYTE,length:y(N.data)}])}}return j}function A(O,j){const E={},N={start:{}};let H=["start"];for(let Y=0;Y<O.length;Y++){const w=O[Y],F=[];for(let V=0;V<w.length;V++){const ne=w[V],W=""+Y+V;F.push(W),E[W]={node:ne,lastCount:0},N[W]={};for(let te=0;te<H.length;te++){const se=H[te];E[se]&&E[se].node.mode===ne.mode?(N[se][W]=_(E[se].lastCount+ne.length,ne.mode)-_(E[se].lastCount,ne.mode),E[se].lastCount+=ne.length):(E[se]&&(E[se].lastCount=ne.length),N[se][W]=_(ne.length,ne.mode)+4+a.getCharCountIndicator(ne.mode,j))}}H=F}for(let Y=0;Y<H.length;Y++)N[H[Y]].end=0;return{map:N,table:E}}function C(O,j){let E;const N=a.getBestModeForData(O);if(E=a.from(j,N),E!==a.BYTE&&E.bit<N.bit)throw new Error('"'+O+'" cannot be encoded with mode '+a.toString(E)+`.
 Suggested mode is: `+a.toString(N));switch(E===a.KANJI&&!m.isKanjiModeEnabled()&&(E=a.BYTE),E){case a.NUMERIC:return new r(O);case a.ALPHANUMERIC:return new i(O);case a.KANJI:return new f(O);case a.BYTE:return new o(O)}}c.fromArray=function(j){return j.reduce(function(E,N){return typeof N=="string"?E.push(C(N,null)):N.data&&E.push(C(N.data,N.mode)),E},[])},c.fromString=function(j,E){const N=x(j,m.isKanjiModeEnabled()),H=R(N),Y=A(H,E),w=p.find_path(Y.map,"start","end"),F=[];for(let V=1;V<w.length-1;V++)F.push(Y.table[w[V]].node);return c.fromArray(M(F))},c.rawSplit=function(j){return c.fromArray(x(j,m.isKanjiModeEnabled()))}})(Ac)),Ac}var Om;function nv(){if(Om)return vc;Om=1;const c=ma(),a=au(),r=qy(),i=$y(),o=Py(),f=Yy(),d=Gy(),m=Ap(),p=Fy(),y=Iy(),v=Xy(),x=pa(),_=tv();function M(Y,w){const F=Y.size,V=f.getPositions(w);for(let ne=0;ne<V.length;ne++){const W=V[ne][0],te=V[ne][1];for(let se=-1;se<=7;se++)if(!(W+se<=-1||F<=W+se))for(let X=-1;X<=7;X++)te+X<=-1||F<=te+X||(se>=0&&se<=6&&(X===0||X===6)||X>=0&&X<=6&&(se===0||se===6)||se>=2&&se<=4&&X>=2&&X<=4?Y.set(W+se,te+X,!0,!0):Y.set(W+se,te+X,!1,!0))}}function R(Y){const w=Y.size;for(let F=8;F<w-8;F++){const V=F%2===0;Y.set(F,6,V,!0),Y.set(6,F,V,!0)}}function A(Y,w){const F=o.getPositions(w);for(let V=0;V<F.length;V++){const ne=F[V][0],W=F[V][1];for(let te=-2;te<=2;te++)for(let se=-2;se<=2;se++)te===-2||te===2||se===-2||se===2||te===0&&se===0?Y.set(ne+te,W+se,!0,!0):Y.set(ne+te,W+se,!1,!0)}}function C(Y,w){const F=Y.size,V=y.getEncodedBits(w);let ne,W,te;for(let se=0;se<18;se++)ne=Math.floor(se/3),W=se%3+F-8-3,te=(V>>se&1)===1,Y.set(ne,W,te,!0),Y.set(W,ne,te,!0)}function O(Y,w,F){const V=Y.size,ne=v.getEncodedBits(w,F);let W,te;for(W=0;W<15;W++)te=(ne>>W&1)===1,W<6?Y.set(W,8,te,!0):W<8?Y.set(W+1,8,te,!0):Y.set(V-15+W,8,te,!0),W<8?Y.set(8,V-W-1,te,!0):W<9?Y.set(8,15-W-1+1,te,!0):Y.set(8,15-W-1,te,!0);Y.set(V-8,8,1,!0)}function j(Y,w){const F=Y.size;let V=-1,ne=F-1,W=7,te=0;for(let se=F-1;se>0;se-=2)for(se===6&&se--;;){for(let X=0;X<2;X++)if(!Y.isReserved(ne,se-X)){let le=!1;te<w.length&&(le=(w[te]>>>W&1)===1),Y.set(ne,se-X,le),W--,W===-1&&(te++,W=7)}if(ne+=V,ne<0||F<=ne){ne-=V,V=-V;break}}}function E(Y,w,F){const V=new r;F.forEach(function(X){V.put(X.mode.bit,4),V.put(X.getLength(),x.getCharCountIndicator(X.mode,Y)),X.write(V)});const ne=c.getSymbolTotalCodewords(Y),W=m.getTotalCodewordsCount(Y,w),te=(ne-W)*8;for(V.getLengthInBits()+4<=te&&V.put(0,4);V.getLengthInBits()%8!==0;)V.putBit(0);const se=(te-V.getLengthInBits())/8;for(let X=0;X<se;X++)V.put(X%2?17:236,8);return N(V,Y,w)}function N(Y,w,F){const V=c.getSymbolTotalCodewords(w),ne=m.getTotalCodewordsCount(w,F),W=V-ne,te=m.getBlocksCount(w,F),se=V%te,X=te-se,le=Math.floor(V/te),$=Math.floor(W/te),K=$+1,ee=le-$,me=new p(ee);let S=0;const z=new Array(te),J=new Array(te);let ae=0;const ce=new Uint8Array(Y.buffer);for(let Je=0;Je<te;Je++){const Ft=Je<X?$:K;z[Je]=ce.slice(S,S+Ft),J[Je]=me.encode(z[Je]),S+=Ft,ae=Math.max(ae,Ft)}const ye=new Uint8Array(V);let ue=0,ke,xe;for(ke=0;ke<ae;ke++)for(xe=0;xe<te;xe++)ke<z[xe].length&&(ye[ue++]=z[xe][ke]);for(ke=0;ke<ee;ke++)for(xe=0;xe<te;xe++)ye[ue++]=J[xe][ke];return ye}function H(Y,w,F,V){let ne;if(Array.isArray(Y))ne=_.fromArray(Y);else if(typeof Y=="string"){let le=w;if(!le){const $=_.rawSplit(Y);le=y.getBestVersionForData($,F)}ne=_.fromString(Y,le||40)}else throw new Error("Invalid data");const W=y.getBestVersionForData(ne,F);if(!W)throw new Error("The amount of data is too big to be stored in a QR Code");if(!w)w=W;else if(w<W)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+W+`.
`);const te=E(w,F,ne),se=c.getSymbolSize(w),X=new i(se);return M(X,w),R(X),A(X,w),O(X,F,0),w>=7&&C(X,w),j(X,te),isNaN(V)&&(V=d.getBestMask(X,O.bind(null,X,F))),d.applyMask(V,X),O(X,F,V),{modules:X,version:w,errorCorrectionLevel:F,maskPattern:V,segments:ne}}return vc.create=function(w,F){if(typeof w>"u"||w==="")throw new Error("No input text");let V=a.M,ne,W;return typeof F<"u"&&(V=a.from(F.errorCorrectionLevel,a.M),ne=y.from(F.version),W=d.from(F.maskPattern),F.toSJISFunc&&c.setToSJISFunction(F.toSJISFunc)),H(w,ne,V,W)},vc}var Bc={},Lc={},Um;function Op(){return Um||(Um=1,(function(c){function a(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let i=r.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+r);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(f){return[f,f]}))),i.length===6&&i.push("F","F");const o=parseInt(i.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+i.slice(0,6).join("")}}c.getOptions=function(i){i||(i={}),i.color||(i.color={});const o=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,f=i.width&&i.width>=21?i.width:void 0,d=i.scale||4;return{width:f,scale:f?4:d,margin:o,color:{dark:a(i.color.dark||"#000000ff"),light:a(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},c.getScale=function(i,o){return o.width&&o.width>=i+o.margin*2?o.width/(i+o.margin*2):o.scale},c.getImageWidth=function(i,o){const f=c.getScale(i,o);return Math.floor((i+o.margin*2)*f)},c.qrToImageData=function(i,o,f){const d=o.modules.size,m=o.modules.data,p=c.getScale(d,f),y=Math.floor((d+f.margin*2)*p),v=f.margin*p,x=[f.color.light,f.color.dark];for(let _=0;_<y;_++)for(let M=0;M<y;M++){let R=(_*y+M)*4,A=f.color.light;if(_>=v&&M>=v&&_<y-v&&M<y-v){const C=Math.floor((_-v)/p),O=Math.floor((M-v)/p);A=x[m[C*d+O]?1:0]}i[R++]=A.r,i[R++]=A.g,i[R++]=A.b,i[R]=A.a}}})(Lc)),Lc}var zm;function av(){return zm||(zm=1,(function(c){const a=Op();function r(o,f,d){o.clearRect(0,0,f.width,f.height),f.style||(f.style={}),f.height=d,f.width=d,f.style.height=d+"px",f.style.width=d+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}c.render=function(f,d,m){let p=m,y=d;typeof p>"u"&&(!d||!d.getContext)&&(p=d,d=void 0),d||(y=i()),p=a.getOptions(p);const v=a.getImageWidth(f.modules.size,p),x=y.getContext("2d"),_=x.createImageData(v,v);return a.qrToImageData(_.data,f,p),r(x,y,v),x.putImageData(_,0,0),y},c.renderToDataURL=function(f,d,m){let p=m;typeof p>"u"&&(!d||!d.getContext)&&(p=d,d=void 0),p||(p={});const y=c.render(f,d,p),v=p.type||"image/png",x=p.rendererOpts||{};return y.toDataURL(v,x.quality)}})(Bc)),Bc}var Hc={},Bm;function sv(){if(Bm)return Hc;Bm=1;const c=Op();function a(o,f){const d=o.a/255,m=f+'="'+o.hex+'"';return d<1?m+" "+f+'-opacity="'+d.toFixed(2).slice(1)+'"':m}function r(o,f,d){let m=o+f;return typeof d<"u"&&(m+=" "+d),m}function i(o,f,d){let m="",p=0,y=!1,v=0;for(let x=0;x<o.length;x++){const _=Math.floor(x%f),M=Math.floor(x/f);!_&&!y&&(y=!0),o[x]?(v++,x>0&&_>0&&o[x-1]||(m+=y?r("M",_+d,.5+M+d):r("m",p,0),p=0,y=!1),_+1<f&&o[x+1]||(m+=r("h",v),v=0)):p++}return m}return Hc.render=function(f,d,m){const p=c.getOptions(d),y=f.modules.size,v=f.modules.data,x=y+p.margin*2,_=p.color.light.a?"<path "+a(p.color.light,"fill")+' d="M0 0h'+x+"v"+x+'H0z"/>':"",M="<path "+a(p.color.dark,"stroke")+' d="'+i(v,y,p.margin)+'"/>',R='viewBox="0 0 '+x+" "+x+'"',C='<svg xmlns="http://www.w3.org/2000/svg" '+(p.width?'width="'+p.width+'" height="'+p.width+'" ':"")+R+' shape-rendering="crispEdges">'+_+M+`</svg>
`;return typeof m=="function"&&m(null,C),C},Hc}var Lm;function iv(){if(Lm)return is;Lm=1;const c=Hy(),a=nv(),r=av(),i=sv();function o(f,d,m,p,y){const v=[].slice.call(arguments,1),x=v.length,_=typeof v[x-1]=="function";if(!_&&!c())throw new Error("Callback required as last argument");if(_){if(x<2)throw new Error("Too few arguments provided");x===2?(y=m,m=d,d=p=void 0):x===3&&(d.getContext&&typeof y>"u"?(y=p,p=void 0):(y=p,p=m,m=d,d=void 0))}else{if(x<1)throw new Error("Too few arguments provided");return x===1?(m=d,d=p=void 0):x===2&&!d.getContext&&(p=m,m=d,d=void 0),new Promise(function(M,R){try{const A=a.create(m,p);M(f(A,d,p))}catch(A){R(A)}})}try{const M=a.create(m,p);y(null,f(M,d,p))}catch(M){y(M)}}return is.create=a.create,is.toCanvas=o.bind(null,r.render),is.toDataURL=o.bind(null,r.renderToDataURL),is.toString=o.bind(null,function(f,d,m){return i.render(f,m)}),is}var rv=iv();const lv=Pr(rv),ov="modulepreload",cv=function(c,a){return new URL(c,a).href},Hm={},uv=function(a,r,i){let o=Promise.resolve();if(r&&r.length>0){let d=function(v){return Promise.all(v.map(x=>Promise.resolve(x).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};const m=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),y=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=d(r.map(v=>{if(v=cv(v,i),v in Hm)return;Hm[v]=!0;const x=v.endsWith(".css"),_=x?'[rel="stylesheet"]':"";if(!!i)for(let A=m.length-1;A>=0;A--){const C=m[A];if(C.href===v&&(!x||C.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${_}`))return;const R=document.createElement("link");if(R.rel=x?"stylesheet":ov,x||(R.as="script"),R.crossOrigin="",R.href=v,y&&R.setAttribute("nonce",y),document.head.appendChild(R),x)return new Promise((A,C)=>{R.addEventListener("load",A),R.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${v}`)))})}))}function f(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&f(m.reason);return a().catch(f)})};class be{constructor(a,r,i,o,f){this._legacyCanvasSize=be.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=a,this.$canvas=document.createElement("canvas"),i&&typeof i=="object"?this._onDecode=r:(console.warn(i||o||f?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=r),r=typeof i=="object"?i:{},this._onDecodeError=r.onDecodeError||(typeof i=="function"?i:this._onDecodeError),this._calculateScanRegion=r.calculateScanRegion||(typeof o=="function"?o:this._calculateScanRegion),this._preferredCamera=r.preferredCamera||f||this._preferredCamera,this._legacyCanvasSize=typeof i=="number"?i:typeof o=="number"?o:this._legacyCanvasSize,this._maxScansPerSecond=r.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),a.disablePictureInPicture=!0,a.playsInline=!0,a.muted=!0;let d=!1;if(a.hidden&&(a.hidden=!1,d=!0),document.body.contains(a)||(document.body.appendChild(a),d=!0),i=a.parentElement,r.highlightScanRegion||r.highlightCodeOutline){if(o=!!r.overlay,this.$overlay=r.overlay||document.createElement("div"),f=this.$overlay.style,f.position="absolute",f.display="none",f.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!o&&r.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}r.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(a),requestAnimationFrame(()=>{let m=window.getComputedStyle(a);m.display==="none"&&(a.style.setProperty("display","block","important"),d=!0),m.visibility!=="visible"&&(a.style.setProperty("visibility","visible","important"),d=!0),d&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),a.style.opacity="0",a.style.width="0",a.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),a.addEventListener("play",this._onPlay),a.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=be.createQrEngine()}static set WORKER_PATH(a){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await be.listCameras(!1)).length}catch{return!1}}static async listCameras(a=!1){if(!navigator.mediaDevices)return[];let r=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(o=>o.kind==="videoinput"),i;try{a&&(await r()).every(o=>!o.label)&&(i=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await r()).map((o,f)=>({id:o.deviceId,label:o.label||(f===0?"Default Camera":`Camera ${f+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),be._stopVideoStream(i))}}async hasFlash(){let a;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;a=this.$video.srcObject}else a=(await this._getCameraStream()).stream;return"torch"in a.getVideoTracks()[0].getSettings()}catch{return!1}finally{a&&a!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),be._stopVideoStream(a))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(a){throw this._flashOn=!1,a}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),be._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:a,facingMode:r}=await this._getCameraStream();!this._active||this._paused?be._stopVideoStream(a):(this._setVideoMirror(r),this.$video.srcObject=a,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(a){if(!this._paused)throw this._active=!1,a}}stop(){this.pause(),this._active=!1}async pause(a=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let r=()=>{this.$video.srcObject instanceof MediaStream&&(be._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return a?(r(),!0):(await new Promise(i=>setTimeout(i,300)),this._paused?(r(),!0):!1)}async setCamera(a){a!==this._preferredCamera&&(this._preferredCamera=a,await this._restartVideoStream())}static async scanImage(a,r,i,o,f=!1,d=!1){let m,p=!1;r&&("scanRegion"in r||"qrEngine"in r||"canvas"in r||"disallowCanvasResizing"in r||"alsoTryWithoutScanRegion"in r||"returnDetailedScanResult"in r)?(m=r.scanRegion,i=r.qrEngine,o=r.canvas,f=r.disallowCanvasResizing||!1,d=r.alsoTryWithoutScanRegion||!1,p=!0):console.warn(r||i||o||f||d?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),r=!!i;try{let y,v;[i,y]=await Promise.all([i||be.createQrEngine(),be._loadImage(a)]),[o,v]=be._drawToCanvas(y,m,o,f);let x;if(i instanceof Worker){let _=i;r||be._postWorkerMessageSync(_,"inversionMode","both"),x=await new Promise((M,R)=>{let A,C,O,j=-1;C=N=>{N.data.id===j&&(_.removeEventListener("message",C),_.removeEventListener("error",O),clearTimeout(A),N.data.data!==null?M({data:N.data.data,cornerPoints:be._convertPoints(N.data.cornerPoints,m)}):R(be.NO_QR_CODE_FOUND))},O=N=>{_.removeEventListener("message",C),_.removeEventListener("error",O),clearTimeout(A),R("Scanner error: "+(N?N.message||N:"Unknown Error"))},_.addEventListener("message",C),_.addEventListener("error",O),A=setTimeout(()=>O("timeout"),1e4);let E=v.getImageData(0,0,o.width,o.height);j=be._postWorkerMessageSync(_,"decode",E,[E.data.buffer])})}else x=await Promise.race([new Promise((_,M)=>window.setTimeout(()=>M("Scanner error: timeout"),1e4)),(async()=>{try{var[_]=await i.detect(o);if(!_)throw be.NO_QR_CODE_FOUND;return{data:_.rawValue,cornerPoints:be._convertPoints(_.cornerPoints,m)}}catch(M){if(_=M.message||M,/not implemented|service unavailable/.test(_))return be._disableBarcodeDetector=!0,be.scanImage(a,{scanRegion:m,canvas:o,disallowCanvasResizing:f,alsoTryWithoutScanRegion:d});throw`Scanner error: ${_}`}})()]);return p?x:x.data}catch(y){if(!m||!d)throw y;let v=await be.scanImage(a,{qrEngine:i,canvas:o,disallowCanvasResizing:f});return p?v:v.data}finally{r||be._postWorkerMessage(i,"close")}}setGrayscaleWeights(a,r,i,o=!0){be._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:a,green:r,blue:i,useIntegerApproximation:o})}setInversionMode(a){be._postWorkerMessage(this._qrEnginePromise,"inversionMode",a)}static async createQrEngine(a){if(a&&console.warn("Specifying a worker path is not required and not supported anymore."),a=()=>uv(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[],import.meta.url).then(i=>i.createWorker()),!(!be._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return a();let r=navigator.userAgentData;return r&&r.brands.some(({brand:i})=>/Chromium/i.test(i))&&/mac ?OS/i.test(r.platform)&&await r.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:i,platformVersion:o})=>/arm/i.test(i||"arm")&&13<=parseInt(o||"13")).catch(()=>!0)?a():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(a){let r=Math.round(.6666666666666666*Math.min(a.videoWidth,a.videoHeight));return{x:Math.round((a.videoWidth-r)/2),y:Math.round((a.videoHeight-r)/2),width:r,height:r,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var a=this.$video,r=a.videoWidth,i=a.videoHeight,o=a.offsetWidth,f=a.offsetHeight,d=a.offsetLeft,m=a.offsetTop,p=window.getComputedStyle(a),y=p.objectFit,v=r/i,x=o/f;switch(y){case"none":var _=r,M=i;break;case"fill":_=o,M=f;break;default:(y==="cover"?v>x:v<x)?(M=f,_=M*v):(_=o,M=_/v),y==="scale-down"&&(_=Math.min(_,r),M=Math.min(M,i))}var[R,A]=p.objectPosition.split(" ").map((O,j)=>{const E=parseFloat(O);return O.endsWith("%")?(j?f-M:o-_)*E/100:E});p=this._scanRegion.width||r,x=this._scanRegion.height||i,y=this._scanRegion.x||0;var C=this._scanRegion.y||0;v=this.$overlay.style,v.width=`${p/r*_}px`,v.height=`${x/i*M}px`,v.top=`${m+A+C/i*M}px`,i=/scaleX\(-1\)/.test(a.style.transform),v.left=`${d+(i?o-R-_:R)+(i?r-y-p:y)/r*_}px`,v.transform=a.style.transform}})}static _convertPoints(a,r){if(!r)return a;let i=r.x||0,o=r.y||0,f=r.width&&r.downScaledWidth?r.width/r.downScaledWidth:1;r=r.height&&r.downScaledHeight?r.height/r.downScaledHeight:1;for(let d of a)d.x=d.x*f+i,d.y=d.y*r+o;return a}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var a=Date.now()-this._lastScanTimestamp,r=1e3/this._maxScansPerSecond;a<r&&await new Promise(o=>setTimeout(o,r-a)),this._lastScanTimestamp=Date.now();try{var i=await be.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(o){if(!this._active)return;this._onDecodeError(o)}!be._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=be.createQrEngine()),i?(this._onDecode?this._onDecode(i):this._legacyOnDecode&&this._legacyOnDecode(i.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",i.cornerPoints.map(({x:o,y:f})=>`${o},${f}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(a){a!==be.NO_QR_CODE_FOUND&&console.log(a)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let a=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",r=[{width:{min:1024}},{width:{min:768}},{}],i=r.map(o=>Object.assign({},o,{[a]:{exact:this._preferredCamera}}));for(let o of[...i,...r])try{let f=await navigator.mediaDevices.getUserMedia({video:o,audio:!1}),d=this._getFacingMode(f)||(o.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:f,facingMode:d}}catch{}throw"Camera not found."}async _restartVideoStream(){let a=this._paused;await this.pause(!0)&&!a&&this._active&&await this.start()}static _stopVideoStream(a){for(let r of a.getTracks())r.stop(),a.removeTrack(r)}_setVideoMirror(a){this.$video.style.transform="scaleX("+(a==="user"?-1:1)+")"}_getFacingMode(a){return(a=a.getVideoTracks()[0])?/rear|back|environment/i.test(a.label)?"environment":/front|user|face/i.test(a.label)?"user":null:null}static _drawToCanvas(a,r,i,o=!1){i=i||document.createElement("canvas");let f=r&&r.x?r.x:0,d=r&&r.y?r.y:0,m=r&&r.width?r.width:a.videoWidth||a.width,p=r&&r.height?r.height:a.videoHeight||a.height;return o||(o=r&&r.downScaledWidth?r.downScaledWidth:m,r=r&&r.downScaledHeight?r.downScaledHeight:p,i.width!==o&&(i.width=o),i.height!==r&&(i.height=r)),r=i.getContext("2d",{alpha:!1}),r.imageSmoothingEnabled=!1,r.drawImage(a,f,d,m,p,0,0,i.width,i.height),[i,r]}static async _loadImage(a){if(a instanceof Image)return await be._awaitImageLoad(a),a;if(a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement||a instanceof SVGImageElement||"OffscreenCanvas"in window&&a instanceof OffscreenCanvas||"ImageBitmap"in window&&a instanceof ImageBitmap)return a;if(a instanceof File||a instanceof Blob||a instanceof URL||typeof a=="string"){let r=new Image;r.src=a instanceof File||a instanceof Blob?URL.createObjectURL(a):a.toString();try{return await be._awaitImageLoad(r),r}finally{(a instanceof File||a instanceof Blob)&&URL.revokeObjectURL(r.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(a){a.complete&&a.naturalWidth!==0||await new Promise((r,i)=>{let o=f=>{a.removeEventListener("load",o),a.removeEventListener("error",o),f instanceof ErrorEvent?i("Image load error"):r()};a.addEventListener("load",o),a.addEventListener("error",o)})}static async _postWorkerMessage(a,r,i,o){return be._postWorkerMessageSync(await a,r,i,o)}static _postWorkerMessageSync(a,r,i,o){if(!(a instanceof Worker))return-1;let f=be._workerMessageId++;return a.postMessage({id:f,type:r,data:i},o),f}}be.DEFAULT_CANVAS_SIZE=400;be.NO_QR_CODE_FOUND="No QR code found";be._disableBarcodeDetector=!1;be._workerMessageId=0;const fv=({isVisible:c,mode:a,identity:r,onClose:i,onFriendScanned:o})=>{const[f,d]=U.useState(""),[m,p]=U.useState(""),[y,v]=U.useState(!1),[x,_]=U.useState(null),M=U.useRef(null),R=U.useRef(null);return U.useEffect(()=>{if(a==="generate"&&c){const A=`meshchat://add?peerId=${r.peerId}&username=${encodeURIComponent(r.username)}`;console.log("Generating QR code with data:",A),lv.toDataURL(A,{width:256,margin:2,color:{dark:"#1e293b",light:"#f8fafc"}}).then(C=>{d(C)}).catch(C=>{console.error("Failed to generate QR code:",C)})}},[a,c,r]),U.useEffect(()=>{(async()=>{const C=rs.isMobile();if(v(C),a==="scan"&&c){if(!await rs.checkCameraSupport()){p("No camera found on this device");return}const j=await rs.requestCameraPermission();_(j),j||p("Camera permission denied. Please allow camera access and try again.")}})()},[a,c]),U.useEffect(()=>{if(a==="scan"&&c&&M.current&&!R.current&&x){const A={highlightScanRegion:!0,highlightCodeOutline:!0,...y&&{preferredCamera:"environment",maxScansPerSecond:5}};R.current=new be(M.current,C=>{try{const O=typeof C=="string"?C:C.data;if(console.log("Scanned QR data:",O.substring(0,50)+"..."),O.startsWith("meshchat://add?")){const j=new URL(O),E=j.searchParams.get("peerId"),N=j.searchParams.get("username");E&&N&&qr.isValidPeerId(E)?(console.log("Valid friend QR code, adding friend"),o(E,decodeURIComponent(N)),i()):(console.log("Invalid QR code params"),p("Invalid friend QR code format"))}else console.log("Not a meshchat QR code"),p("Not a MeshChat friend QR code")}catch(O){console.error("QR scan error:",O),p("Failed to parse QR code")}},A),R.current.start().catch(C=>{console.error("Failed to start QR scanner:",C),p("Camera access failed. Please refresh and allow camera access."),R.current=null})}return()=>{R.current&&(R.current.stop(),R.current.destroy(),R.current=null)}},[a,c,o,i,x,y]),U.useEffect(()=>{if(c){if(a==="generate"&&R.current)try{R.current.stop(),R.current.destroy()}catch(A){console.warn("QR scanner mode switch error:",A)}finally{R.current=null}}else if(p(""),R.current)try{R.current.stop(),R.current.destroy()}catch(A){console.warn("QR scanner cleanup error:",A)}finally{R.current=null}},[c,a]),c?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg max-w-sm w-full mx-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-slate-100 font-medium",children:a==="generate"?"My QR Code":"Scan Friend QR Code"}),h.jsx("button",{onClick:i,className:"text-slate-400 hover:text-slate-300",children:""})]}),a==="generate"?h.jsx("div",{className:"text-center",children:f?h.jsxs(h.Fragment,{children:[h.jsx("img",{src:f,alt:"Friend QR Code",className:"mx-auto mb-3 bg-white p-2 rounded"}),h.jsx("p",{className:"text-slate-300 text-sm mb-3",children:"Let your friend scan this QR code to add you"}),h.jsx("button",{onClick:()=>{const A=document.createElement("a");A.download=`meshchat-${r.username}.png`,A.href=f,A.click()},className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded text-sm",children:"Save QR Code"})]}):h.jsx("div",{className:"text-slate-400",children:"Generating QR code..."})}):h.jsx("div",{className:"text-center",children:x===!1?h.jsxs("div",{className:"p-4",children:[h.jsx("div",{className:"text-red-400 text-sm mb-3",children:"Camera permission is required to scan QR codes"}),h.jsx("button",{onClick:async()=>{const A=await rs.requestCameraPermission();_(A),A||p("Please allow camera access in your browser settings")},className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded text-sm",children:"Grant Camera Access"})]}):h.jsxs(h.Fragment,{children:[h.jsx("video",{ref:M,className:"w-full h-64 bg-slate-700 rounded mb-3",playsInline:!0,muted:!0}),m&&h.jsx("div",{className:"text-red-400 text-sm mb-3",children:m}),h.jsx("p",{className:"text-slate-300 text-sm",children:y?"Point your camera at the QR code":"Point camera at friend's QR code"}),y&&h.jsx("p",{className:"text-slate-400 text-xs mt-2",children:"Tip: Use the back camera for better scanning"})]})})]})}):null},dv=({currentIdentity:c,peerInstance:a,friends:r,setFriends:i,onStartAudioCall:o,onStartVideoCall:f,onStartChat:d})=>{const[m,p]=U.useState(""),[y,v]=U.useState(""),[x,_]=U.useState(""),[M,R]=U.useState(""),[A,C]=U.useState(!1),[O,j]=U.useState("generate"),[E,N]=U.useState(Date.now()),[H,Y]=U.useState(0),[w,F]=U.useState(!1),V=U.useCallback(X=>{try{const $=JSON.parse(localStorage.getItem("chatHistory")||"[]").find(K=>K.peerId===X);if($&&$.messages&&$.messages.length>0){const K=$.messages[$.messages.length-1];return{content:K.content||"",isLocal:K.isLocal||!1,timestamp:K.timestamp||0}}}catch(le){console.warn("Failed to get last message:",le)}return null},[H]);U.useEffect(()=>{const X=setInterval(()=>{N(Date.now())},6e4);return()=>clearInterval(X)},[]),U.useEffect(()=>{const X=le=>{const{peerId:$,username:K}=le.detail;i(ee=>{if(ee.some(z=>z.peerId===$))return ee;console.log(" Auto-adding friend:",K);const S={peerId:$,username:K,addedTime:Date.now(),lastSeen:Date.now(),isOnline:!0};if(a&&a.open)try{const z=a.connect($);z.on("open",()=>{z.send({type:"friend_added_back",fromPeerId:c.peerId,fromUsername:c.username,timestamp:Date.now()}),setTimeout(()=>z.close(),1e3)})}catch(z){console.warn("Failed to send add-back notification:",z)}return[...ee,S]})};return window.addEventListener("autoAddFriend",X),()=>{window.removeEventListener("autoAddFriend",X)}},[a,c]),U.useEffect(()=>{const X=()=>{Y(Date.now())};return window.addEventListener("chatHistoryUpdated",X),()=>{window.removeEventListener("chatHistoryUpdated",X)}},[]);const ne=async()=>{if(!m.trim()||!y.trim()){_("Please enter both Peer ID and username");return}const X=m.trim(),le=y.trim();if(X===c.peerId){_("Cannot add yourself as friend");return}if(!qr.isValidPeerId(X)){_("Invalid Peer ID format. Please check and try again.");return}if(r.some(ee=>ee.peerId===X)){_("Friend already exists");return}_(""),R("Adding friend...");const K={peerId:X,username:le,addedTime:Date.now(),lastSeen:Date.now(),isOnline:!1};i([...r,K]),p(""),v("");try{if(console.log(` Added friend: ${K.username}, status will be checked automatically`),R("Friend added successfully!"),a&&a.open)try{const ee=a.connect(X,{metadata:{type:"friend_request"}}),me=setTimeout(()=>{ee.close(),console.log("Friend notification timeout")},5e3);ee.on("open",()=>{clearTimeout(me),ee.send({type:"friend_added",fromPeerId:c.peerId,fromUsername:c.username,timestamp:Date.now()}),setTimeout(()=>ee.close(),1e3),R("Friend added and notified successfully!")}),ee.on("error",S=>{clearTimeout(me),console.warn("Failed to notify friend:",S),R("Friend added, but they may need to add you back manually.")})}catch(ee){console.warn("Failed to connect for notification:",ee),R("Friend added, but notification failed. They may need to add you back.")}else R("Friend added, but you're offline. Notification will be sent when connected.");setTimeout(()=>R(""),3e3)}catch(ee){console.error("Failed to check friend status:",ee),R("Friend added, but status check failed."),setTimeout(()=>R(""),3e3)}},W=X=>{const le=r.filter($=>$.peerId!==X);i(le)},te=async(X,le)=>{if(X===c.peerId){_("Cannot add yourself as friend");return}if(r.some(ee=>ee.peerId===X)){_("Friend already exists");return}_(""),R("Adding friend from QR code...");const K={peerId:X,username:le,addedTime:Date.now(),lastSeen:Date.now(),isOnline:!1};i([...r,K]);try{if(R("Friend added successfully via QR code!"),a&&a.open)try{const ee=a.connect(X,{metadata:{type:"friend_request"}}),me=setTimeout(()=>{ee.close()},5e3);ee.on("open",()=>{clearTimeout(me),ee.send({type:"friend_added",fromPeerId:c.peerId,fromUsername:c.username,timestamp:Date.now()}),setTimeout(()=>ee.close(),1e3),R("QR friend added and notified successfully!")}),ee.on("error",S=>{clearTimeout(me),console.warn("Failed to notify QR friend:",S),R("QR friend added, but notification failed.")})}catch(ee){console.warn("Failed to connect to QR friend:",ee),R("QR friend added, but they may need to add you back.")}setTimeout(()=>R(""),3e3)}catch(ee){console.error("Failed to process QR friend:",ee),R("QR friend added, but status check failed."),setTimeout(()=>R(""),3e3)}},se=X=>{if(X===0)return"Never seen";const le=E-X,$=Math.floor(le/6e4),K=Math.floor($/60),ee=Math.floor(K/24);return ee>0?`${ee}d ago`:K>0?`${K}h ago`:$>0?`${$}m ago`:"Just now"};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"mb-3",children:[h.jsxs("button",{onClick:()=>F(!w),className:"w-full flex items-center justify-between p-2 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300",children:[h.jsx("span",{children:" Add Friend"}),h.jsx("span",{children:w?"":""})]}),w&&h.jsxs("div",{className:"mt-2 space-y-2 p-2 bg-slate-750 rounded",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>{j("generate"),C(!0)},className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2 px-3 rounded text-xs flex items-center justify-center gap-1",children:" My QR Code"}),h.jsx("button",{onClick:()=>{j("scan"),C(!0)},className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white py-2 px-3 rounded text-xs flex items-center justify-center gap-1",children:" Scan QR Code"})]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("input",{type:"text",value:m,onChange:X=>{p(X.target.value),_("")},placeholder:"Peer ID",className:"flex-1 px-2 py-1 bg-slate-700 border border-slate-600 rounded text-slate-100 text-xs"}),h.jsx("input",{type:"text",value:y,onChange:X=>{v(X.target.value),_("")},placeholder:"Username",className:"flex-1 px-2 py-1 bg-slate-700 border border-slate-600 rounded text-slate-100 text-xs"})]}),x&&h.jsx("div",{className:"text-red-400 text-xs",children:x}),M&&h.jsx("div",{className:"text-yellow-400 text-xs",children:M}),h.jsx("button",{onClick:ne,className:"w-full bg-green-600 hover:bg-green-500 text-white px-2 py-1 rounded text-xs",children:"Add Friend"})]})]}),h.jsxs("div",{children:[h.jsxs("h3",{className:"text-sm font-medium text-slate-300 mb-2",children:["Friends (",r.length,")"]}),r.length>0?h.jsx("div",{className:"space-y-2",children:r.map(X=>h.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-700 rounded",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`w-2 h-2 rounded-full transition-colors duration-300 ${X.isOnline?"bg-green-500 animate-pulse":"bg-gray-500"}`}),h.jsx("span",{className:"text-slate-100 text-sm font-medium",children:X.username})]}),h.jsx("div",{className:"text-slate-400 text-xs",children:(()=>{const le=V(X.peerId);if(le){const $=le.isLocal?"You: ":`${X.username}: `,K=le.content.length>30?le.content.substring(0,30)+"...":le.content;return`${$}${K}`}return se(X.lastSeen)})()})]}),h.jsx("button",{onClick:()=>d&&d(X.peerId,X.username),className:"bg-sky-600 hover:bg-sky-500 text-white px-2 py-1 rounded text-xs",title:"Send message",children:""}),h.jsx("button",{onClick:()=>o(X.peerId),disabled:!a||!a.open,className:`px-2 py-1 rounded text-xs ${a&&a.open?"bg-green-600 hover:bg-green-500 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,title:a&&a.open?"Audio call":"Connection not ready",children:""}),h.jsx("button",{onClick:()=>f(X.peerId),disabled:!a||!a.open,className:`px-2 py-1 rounded text-xs ${a&&a.open?"bg-blue-600 hover:bg-blue-500 text-white":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,title:a&&a.open?"Video call":"Connection not ready",children:""}),h.jsx("button",{onClick:()=>W(X.peerId),className:"bg-red-600 hover:bg-red-500 text-white px-2 py-1 rounded text-xs",children:""})]},X.peerId))}):h.jsx("div",{className:"text-slate-400 text-center py-4 text-sm",children:"No friends added yet"})]}),h.jsx(fv,{isVisible:A,mode:O,identity:c,onClose:()=>C(!1),onFriendScanned:te})]})},hv=({currentRoom:c,friends:a,onCreateRoom:r,onInviteFriend:i,onLeaveRoom:o})=>{const[f,d]=U.useState(""),[m,p]=U.useState(!1),y=()=>{f.trim()&&(r(f.trim()),d(""))},v=x=>{i(x.peerId,x.username),p(!1)};return c?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"bg-slate-700 p-3 rounded",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h3",{className:"text-slate-100 font-medium",children:c.roomName}),h.jsx("button",{onClick:o,className:"bg-red-600 hover:bg-red-500 text-white px-2 py-1 rounded text-xs",children:"Leave"})]}),h.jsxs("div",{className:"text-slate-400 text-xs",children:["Room ID: ",c.roomId]})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"text-slate-300 text-sm font-medium mb-2",children:["Members (",c.members.size,")"]}),h.jsx("div",{className:"space-y-1",children:Array.from(c.members.values()).map(x=>h.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-700 rounded",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${x.isAlive?"bg-green-500":"bg-gray-500"}`}),h.jsx("span",{className:"text-slate-100 text-sm",children:x.username}),c.createdBy===x.peerId&&h.jsx("span",{className:"text-yellow-400 text-xs",children:"Host"})]},x.peerId))})]}),c.isHost&&h.jsx("div",{children:h.jsx("button",{onClick:()=>p(!0),className:"w-full bg-blue-600 hover:bg-blue-500 text-white py-2 px-3 rounded text-sm",children:"Invite Friends"})}),m&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg max-w-sm w-full mx-4",children:[h.jsx("h3",{className:"text-slate-100 font-medium mb-3",children:"Invite Friends"}),h.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:a.filter(x=>!c.members.has(x.peerId)).map(x=>h.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-700 rounded",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${x.isOnline?"bg-green-500":"bg-gray-500"}`}),h.jsx("span",{className:"text-slate-100 text-sm",children:x.username})]}),h.jsx("button",{onClick:()=>v(x),className:"bg-green-600 hover:bg-green-500 text-white px-2 py-1 rounded text-xs",children:"Invite"})]},x.peerId))}),h.jsx("button",{onClick:()=>p(!1),className:"w-full mt-3 bg-slate-600 hover:bg-slate-500 text-white py-2 px-3 rounded text-sm",children:"Close"})]})})]}):h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-slate-300 text-sm font-medium mb-2",children:"Create Room"}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("input",{type:"text",value:f,onChange:x=>d(x.target.value),placeholder:"Room name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-slate-100 text-sm"}),h.jsx("button",{onClick:y,disabled:!f.trim(),className:"w-full bg-green-600 hover:bg-green-500 disabled:bg-slate-500 text-white py-2 px-3 rounded text-sm",children:"Create Room"})]})]}),h.jsx("div",{className:"text-slate-400 text-center py-8 text-sm",children:"Create a room to start chatting with multiple friends"})]})},mv=({callState:c,localVideoRef:a,remoteVideoRef:r,onAccept:i,onReject:o,onEndCall:f,onSwitchCamera:d,getCallerName:m,formatDuration:p})=>c.incomingCall?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsx("div",{className:"bg-slate-800 p-6 rounded-lg shadow-xl max-w-sm w-full mx-4",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-4xl mb-4",children:c.isVideoCall?"":""}),h.jsxs("h3",{className:"text-lg font-semibold text-white mb-2",children:["Incoming ",c.isVideoCall?"Video":"Audio"," Call"]}),h.jsxs("p",{className:"text-slate-300 mb-6",children:[m(c.incomingCall.peer)," is calling you"]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:o,className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-3 px-4 rounded-lg font-medium",children:" Decline"}),h.jsx("button",{onClick:i,className:"flex-1 bg-green-600 hover:bg-green-500 text-white py-3 px-4 rounded-lg font-medium",children:" Accept"})]})]})})}):c.isInCall?h.jsxs("div",{className:"fixed inset-0 bg-black z-50 flex flex-col",children:[h.jsx("div",{className:"flex-1 relative",children:c.isVideoCall?h.jsxs(h.Fragment,{children:[h.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),h.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute top-4 right-4 w-32 h-24 bg-gray-800 rounded-lg object-cover"}),h.jsx("div",{className:"absolute top-4 left-4 bg-black bg-opacity-50 text-white px-3 py-1 rounded-lg font-mono",children:p(c.callDuration)})]}):h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-6xl mb-4",children:""}),h.jsx("h2",{className:"text-2xl text-white mb-2",children:"Audio Call"}),h.jsx("p",{className:"text-slate-300 mb-4",children:"Call in progress..."}),h.jsx("div",{className:"text-xl text-green-400 font-mono",children:p(c.callDuration)}),h.jsx("audio",{ref:a,autoPlay:!0,muted:!0,style:{display:"none"}}),h.jsx("audio",{ref:r,autoPlay:!0,style:{display:"none"}})]})})}),h.jsxs("div",{className:"p-6 bg-slate-900 flex justify-center gap-4",children:[c.isVideoCall&&d&&h.jsx("button",{onClick:d,className:"bg-gray-600 hover:bg-gray-500 text-white px-6 py-3 rounded-full font-medium",children:" Switch Camera"}),h.jsx("button",{onClick:f,className:"bg-red-600 hover:bg-red-500 text-white px-8 py-3 rounded-full font-medium",children:" End Call"})]})]}):c.callError?h.jsx("div",{className:"fixed top-4 right-4 bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg z-50",children:c.callError}):null;class qm{static generateBackupData(){const a={identity:JSON.parse(localStorage.getItem("meshchat_current_identity")||"{}"),identities:JSON.parse(localStorage.getItem("meshchat_identities")||"[]"),friends:{},settings:JSON.parse(localStorage.getItem("meshchat_system_settings")||"null"),timestamp:Date.now(),version:"1.1"};return a.identities.forEach(r=>{const i=`meshchat_friends_${r.peerId}`,o=localStorage.getItem(i);if(o)try{const f=JSON.parse(o);a.friends[r.peerId]=Array.isArray(f)?f:f.friends||[]}catch{console.warn("Failed to parse friends data for",r.peerId)}}),a}static async encryptData(a,r){const i=new TextEncoder,o=JSON.stringify(a),f=crypto.getRandomValues(new Uint8Array(16)),d=await crypto.subtle.importKey("raw",i.encode(r),"PBKDF2",!1,["deriveBits","deriveKey"]),m=await crypto.subtle.deriveKey({name:"PBKDF2",salt:f,iterations:1e5,hash:"SHA-256"},d,{name:"AES-GCM",length:256},!1,["encrypt"]),p=crypto.getRandomValues(new Uint8Array(12)),y=await crypto.subtle.encrypt({name:"AES-GCM",iv:p},m,i.encode(o)),v=new Uint8Array(f.length+p.length+y.byteLength);return v.set(f,0),v.set(p,f.length),v.set(new Uint8Array(y),f.length+p.length),btoa(String.fromCharCode(...v))}static async decryptData(a,r){const i=new TextDecoder,o=new TextEncoder,f=new Uint8Array(atob(a).split("").map(_=>_.charCodeAt(0))),d=f.slice(0,16),m=f.slice(16,28),p=f.slice(28),y=await crypto.subtle.importKey("raw",o.encode(r),"PBKDF2",!1,["deriveBits","deriveKey"]),v=await crypto.subtle.deriveKey({name:"PBKDF2",salt:d,iterations:1e5,hash:"SHA-256"},y,{name:"AES-GCM",length:256},!1,["decrypt"]),x=await crypto.subtle.decrypt({name:"AES-GCM",iv:m},v,p);return JSON.parse(i.decode(x))}static async createBackup(a){try{const r=this.generateBackupData(),i=await this.encryptData(r,a),o=new Blob([i],{type:"text/plain"}),f=URL.createObjectURL(o),d=document.createElement("a");d.href=f,d.download=`meshchat-backup-${new Date().toISOString().split("T")[0]}.mcb`,d.click(),URL.revokeObjectURL(f)}catch(r){throw new Error("Failed to create backup: "+r.message)}}static async restoreBackup(a,r){try{const i=await a.text(),o=await this.decryptData(i,r);if(!o.version||!o.timestamp)throw new Error("Invalid backup file format");o.identity&&Object.keys(o.identity).length>0&&localStorage.setItem("meshchat_current_identity",JSON.stringify(o.identity)),o.identities&&Array.isArray(o.identities)&&localStorage.setItem("meshchat_identities",JSON.stringify(o.identities)),o.friends&&Object.entries(o.friends).forEach(([f,d])=>{const m=`meshchat_friends_${f}`,p={friends:d,lastUpdated:Date.now(),tabId:`restore_${Date.now()}`};localStorage.setItem(m,JSON.stringify(p))}),o.settings&&localStorage.setItem("meshchat_system_settings",JSON.stringify(o.settings))}catch(i){throw i.message.includes("decrypt")?new Error("Invalid password or corrupted backup file"):new Error("Failed to restore backup: "+i.message)}}}const pv=({isVisible:c,onClose:a,onRestoreComplete:r})=>{const[i,o]=U.useState("menu"),[f,d]=U.useState(""),[m,p]=U.useState(""),[y,v]=U.useState(null),[x,_]=U.useState(!1),[M,R]=U.useState(""),[A,C]=U.useState(""),O=()=>{o("menu"),d(""),p(""),v(null),R(""),C(""),_(!1)},j=()=>{O(),a()},E=async()=>{if(!f||f.length<6){R("Password must be at least 6 characters");return}if(f!==m){R("Passwords do not match");return}_(!0),R("");try{await qm.createBackup(f),C("Backup created successfully!"),setTimeout(()=>{j()},2e3)}catch(H){R(H.message)}finally{_(!1)}},N=async()=>{if(!y){R("Please select a backup file");return}if(!f){R("Please enter backup password");return}_(!0),R("");try{await qm.restoreBackup(y,f),C("Backup restored successfully! Please refresh the page."),setTimeout(()=>{r(),j()},2e3)}catch(H){R(H.message)}finally{_(!1)}};return c?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg max-w-md w-full mx-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h3",{className:"text-slate-100 font-medium",children:[i==="menu"&&"Backup & Restore",i==="backup"&&"Create Backup",i==="restore"&&"Restore Backup"]}),h.jsx("button",{onClick:j,className:"text-slate-400 hover:text-slate-300",children:""})]}),M&&h.jsx("div",{className:"bg-red-600 text-white p-2 rounded mb-4 text-sm",children:M}),A&&h.jsx("div",{className:"bg-green-600 text-white p-2 rounded mb-4 text-sm",children:A}),i==="menu"&&h.jsxs("div",{className:"space-y-3",children:[h.jsx("button",{onClick:()=>o("backup"),className:"w-full bg-blue-600 hover:bg-blue-500 text-white py-3 px-4 rounded text-sm",children:" Create Encrypted Backup"}),h.jsx("button",{onClick:()=>o("restore"),className:"w-full bg-green-600 hover:bg-green-500 text-white py-3 px-4 rounded text-sm",children:" Restore from Backup"}),h.jsx("p",{className:"text-slate-400 text-xs text-center",children:"Backup includes your identities and friends list"})]}),i==="backup"&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-300 text-sm mb-2",children:"Backup Password"}),h.jsx("input",{type:"password",value:f,onChange:H=>d(H.target.value),placeholder:"Enter a strong password",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-slate-100 text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-300 text-sm mb-2",children:"Confirm Password"}),h.jsx("input",{type:"password",value:m,onChange:H=>p(H.target.value),placeholder:"Confirm password",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-slate-100 text-sm"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>o("menu"),className:"flex-1 bg-slate-600 hover:bg-slate-500 text-white py-2 px-4 rounded text-sm",children:"Back"}),h.jsx("button",{onClick:E,disabled:x,className:"flex-1 bg-blue-600 hover:bg-blue-500 disabled:bg-slate-500 text-white py-2 px-4 rounded text-sm",children:x?"Creating...":"Create Backup"})]})]}),i==="restore"&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-300 text-sm mb-2",children:"Backup File"}),h.jsx("input",{type:"file",accept:".mcb",onChange:H=>{var Y;return v(((Y=H.target.files)==null?void 0:Y[0])||null)},className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-slate-100 text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-300 text-sm mb-2",children:"Backup Password"}),h.jsx("input",{type:"password",value:f,onChange:H=>d(H.target.value),placeholder:"Enter backup password",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded text-slate-100 text-sm"})]}),h.jsx("div",{className:"bg-yellow-600 text-yellow-100 p-2 rounded text-xs",children:" This will replace your current data. Make sure to backup first!"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>o("menu"),className:"flex-1 bg-slate-600 hover:bg-slate-500 text-white py-2 px-4 rounded text-sm",children:"Back"}),h.jsx("button",{onClick:N,disabled:x,className:"flex-1 bg-green-600 hover:bg-green-500 disabled:bg-slate-500 text-white py-2 px-4 rounded text-sm",children:x?"Restoring...":"Restore"})]})]})]})}):null},gv=({isVisible:c,onClose:a,onSettingsChanged:r})=>{const[i,o]=U.useState("peer"),[f,d]=U.useState([]),[m,p]=U.useState([]),[y,v]=U.useState(!1),[x,_]=U.useState(null),[M,R]=U.useState(null),[A,C]=U.useState({name:"",host:"",port:443,path:"/",secure:!0,key:""}),[O,j]=U.useState({name:"",url:""}),[E,N]=U.useState({name:"",host:"",port:443,path:"/",secure:!0,key:""}),[H,Y]=U.useState({name:"",url:""});U.useEffect(()=>{c&&w()},[c]);const w=()=>{const S=gt.loadSettings();d(S.peerServers),p(S.stunServers)},F=()=>{v(!1),_(null),R(null),C({name:"",host:"",port:443,path:"/",secure:!0,key:""}),j({name:"",url:""}),N({name:"",host:"",port:443,path:"/",secure:!0,key:""}),Y({name:"",url:""}),a()},V=(S,z)=>{z&&f.forEach(J=>{J.id!==S&&J.enabled&&gt.updatePeerServer(J.id,{enabled:!1})}),gt.updatePeerServer(S,{enabled:z}),w(),r()},ne=(S,z)=>{gt.updateSTUNServer(S,{enabled:z}),w(),r()},W=()=>{!A.name||!A.host||(gt.addPeerServer({...A,enabled:!1}),C({name:"",host:"",port:443,path:"/",secure:!0,key:""}),v(!1),w())},te=()=>{!O.name||!O.url||(gt.addSTUNServer({...O,enabled:!1}),j({name:"",url:""}),v(!1),w())},se=S=>{gt.removePeerServer(S),w(),r()},X=S=>{gt.removeSTUNServer(S),w(),r()},le=S=>{_(S.id),N({name:S.name,host:S.host,port:S.port,path:S.path||"/",secure:S.secure!==!1,key:S.key||""}),v(!1)},$=S=>{R(S.id),Y({name:S.name,url:S.url}),v(!1)},K=()=>{!x||!E.name||!E.host||(gt.updatePeerServer(x,{name:E.name,host:E.host,port:E.port,path:E.path,secure:E.secure,key:E.key}),_(null),N({name:"",host:"",port:443,path:"/",secure:!0,key:""}),w(),r())},ee=()=>{!M||!H.name||!H.url||(gt.updateSTUNServer(M,{name:H.name,url:H.url}),R(null),Y({name:"",url:""}),w(),r())},me=()=>{_(null),R(null),N({name:"",host:"",port:443,path:"/",secure:!0,key:""}),Y({name:"",url:""})};return c?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-slate-100 font-medium",children:"System Settings"}),h.jsx("button",{onClick:F,className:"text-slate-400 hover:text-slate-300",children:""})]}),h.jsxs("div",{className:"flex mb-4",children:[h.jsx("button",{onClick:()=>o("peer"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-l ${i==="peer"?"bg-sky-600 text-white":"bg-slate-700 text-slate-300"}`,children:"PeerJS Servers"}),h.jsx("button",{onClick:()=>o("stun"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-r ${i==="stun"?"bg-sky-600 text-white":"bg-slate-700 text-slate-300"}`,children:"STUN Servers"})]}),i==="peer"&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h4",{className:"text-slate-300 font-medium",children:"PeerJS Servers"}),h.jsx("button",{onClick:()=>{v(!0),_(null),R(null)},className:"bg-green-600 hover:bg-green-500 text-white px-3 py-1 rounded text-sm",children:"+ Add Server"})]}),y&&i==="peer"&&h.jsxs("div",{className:"bg-slate-700 p-4 rounded space-y-3",children:[h.jsx("h5",{className:"text-slate-300 font-medium",children:"Add PeerJS Server"}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsx("input",{type:"text",placeholder:"Server Name",value:A.name,onChange:S=>C(z=>({...z,name:S.target.value})),className:"px-3 py-2 bg-slate-600 border border-slate-500 rounded text-slate-100 text-sm"}),h.jsx("input",{type:"text",placeholder:"Host (e.g., peerjs.example.com)",value:A.host,onChange:S=>C(z=>({...z,host:S.target.value})),className:"px-3 py-2 bg-slate-600 border border-slate-500 rounded text-slate-100 text-sm"}),h.jsx("input",{type:"number",placeholder:"Port",value:A.port,onChange:S=>C(z=>({...z,port:parseInt(S.target.value)||443})),className:"px-3 py-2 bg-slate-600 border border-slate-500 rounded text-slate-100 text-sm"}),h.jsx("input",{type:"text",placeholder:"Path (e.g., /peerjs)",value:A.path,onChange:S=>C(z=>({...z,path:S.target.value})),className:"px-3 py-2 bg-slate-600 border border-slate-500 rounded text-slate-100 text-sm"}),h.jsx("input",{type:"text",placeholder:"Key (optional, e.g., peerjs)",value:A.key,onChange:S=>C(z=>({...z,key:S.target.value})),className:"px-3 py-2 bg-slate-600 border border-slate-500 rounded text-slate-100 text-sm col-span-2"})]}),h.jsxs("label",{className:"flex items-center gap-2 text-slate-300 text-sm",children:[h.jsx("input",{type:"checkbox",checked:A.secure,onChange:S=>C(z=>({...z,secure:S.target.checked}))}),"Use HTTPS/WSS"]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>v(!1),className:"bg-slate-600 hover:bg-slate-500 text-white px-3 py-2 rounded text-sm",children:"Cancel"}),h.jsx("button",{onClick:W,className:"bg-green-600 hover:bg-green-500 text-white px-3 py-2 rounded text-sm",children:"Add Server"})]})]}),h.jsx("div",{className:"space-y-2",children:f.map(S=>h.jsx("div",{className:"bg-slate-700 rounded",children:x===S.id?h.jsxs("div",{className:"p-4 space-y-3",children:[h.jsx("h5",{className:"text-slate-300 font-medium",children:"Edit PeerJS Server"}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsx("input",{type:"text",placeholder:"Server Name",value:E.name,onChange:z=>N(J=>({...J,name:z.target.value})),className:"px-3 py-2 bg-slate-600 border border-slate-500 rounded text-slate-100 text-sm"}),h.jsx("input",{type:"text",placeholder:"Host (e.g., peerjs.example.com)",value:E.host,onChange:z=>N(J=>({...J,host:z.target.value})),className:"px-3 py-2 bg-slate-600 border border-slate-500 rounded text-slate-100 text-sm"}),h.jsx("input",{type:"number",placeholder:"Port",value:E.port,onChange:z=>N(J=>({...J,port:parseInt(z.target.value)||443})),className:"px-3 py-2 bg-slate-600 border border-slate-500 rounded text-slate-100 text-sm"}),h.jsx("input",{type:"text",placeholder:"Path (e.g., /peerjs)",value:E.path,onChange:z=>N(J=>({...J,path:z.target.value})),className:"px-3 py-2 bg-slate-600 border border-slate-500 rounded text-slate-100 text-sm"}),h.jsx("input",{type:"text",placeholder:"Key (optional, e.g., peerjs)",value:E.key,onChange:z=>N(J=>({...J,key:z.target.value})),className:"px-3 py-2 bg-slate-600 border border-slate-500 rounded text-slate-100 text-sm col-span-2"})]}),h.jsxs("label",{className:"flex items-center gap-2 text-slate-300 text-sm",children:[h.jsx("input",{type:"checkbox",checked:E.secure,onChange:z=>N(J=>({...J,secure:z.target.checked}))}),"Use HTTPS/WSS"]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:me,className:"bg-slate-600 hover:bg-slate-500 text-white px-3 py-2 rounded text-sm",children:"Cancel"}),h.jsx("button",{onClick:K,className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-2 rounded text-sm",children:"Save Changes"})]})]}):h.jsxs("div",{className:"flex items-center justify-between p-3",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"radio",name:"peerServer",checked:S.enabled,onChange:z=>V(S.id,z.target.checked)}),h.jsx("span",{className:"text-slate-100 font-medium",children:S.name})]}),h.jsxs("div",{className:"text-slate-400 text-sm",children:[S.secure?"https://":"http://",S.host,":",S.port,S.path,S.key&&h.jsxs("span",{className:"ml-2 text-slate-500",children:["(key: ",S.key,")"]})]})]}),h.jsx("div",{className:"flex items-center gap-1",children:S.id!=="default"&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:()=>le(S),className:"text-blue-400 hover:text-blue-300 px-2 py-1 text-sm",title:"Edit server",children:""}),h.jsx("button",{onClick:()=>se(S.id),className:"text-red-400 hover:text-red-300 px-2 py-1 text-sm",title:"Delete server",children:""})]})})]})},S.id))})]}),i==="stun"&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h4",{className:"text-slate-300 font-medium",children:"STUN Servers"}),h.jsx("button",{onClick:()=>{v(!0),_(null),R(null)},className:"bg-green-600 hover:bg-green-500 text-white px-3 py-1 rounded text-sm",children:"+ Add Server"})]}),y&&i==="stun"&&h.jsxs("div",{className:"bg-slate-700 p-4 rounded space-y-3",children:[h.jsx("h5",{className:"text-slate-300 font-medium",children:"Add STUN Server"}),h.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[h.jsx("input",{type:"text",placeholder:"Server Name",value:O.name,onChange:S=>j(z=>({...z,name:S.target.value})),className:"px-3 py-2 bg-slate-600 border border-slate-500 rounded text-slate-100 text-sm"}),h.jsx("input",{type:"text",placeholder:"STUN URL (e.g., stun:stun.example.com:3478)",value:O.url,onChange:S=>j(z=>({...z,url:S.target.value})),className:"px-3 py-2 bg-slate-600 border border-slate-500 rounded text-slate-100 text-sm"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>v(!1),className:"bg-slate-600 hover:bg-slate-500 text-white px-3 py-2 rounded text-sm",children:"Cancel"}),h.jsx("button",{onClick:te,className:"bg-green-600 hover:bg-green-500 text-white px-3 py-2 rounded text-sm",children:"Add Server"})]})]}),h.jsx("div",{className:"space-y-2",children:m.map(S=>h.jsx("div",{className:"bg-slate-700 rounded",children:M===S.id?h.jsxs("div",{className:"p-4 space-y-3",children:[h.jsx("h5",{className:"text-slate-300 font-medium",children:"Edit STUN Server"}),h.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[h.jsx("input",{type:"text",placeholder:"Server Name",value:H.name,onChange:z=>Y(J=>({...J,name:z.target.value})),className:"px-3 py-2 bg-slate-600 border border-slate-500 rounded text-slate-100 text-sm"}),h.jsx("input",{type:"text",placeholder:"STUN URL (e.g., stun:stun.example.com:3478)",value:H.url,onChange:z=>Y(J=>({...J,url:z.target.value})),className:"px-3 py-2 bg-slate-600 border border-slate-500 rounded text-slate-100 text-sm"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:me,className:"bg-slate-600 hover:bg-slate-500 text-white px-3 py-2 rounded text-sm",children:"Cancel"}),h.jsx("button",{onClick:ee,className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-2 rounded text-sm",children:"Save Changes"})]})]}):h.jsxs("div",{className:"flex items-center justify-between p-3",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("input",{type:"checkbox",checked:S.enabled,onChange:z=>ne(S.id,z.target.checked)}),h.jsx("span",{className:"text-slate-100 font-medium",children:S.name})]}),h.jsx("div",{className:"text-slate-400 text-sm",children:S.url})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:()=>$(S),className:"text-blue-400 hover:text-blue-300 px-2 py-1 text-sm",title:"Edit server",children:""}),h.jsx("button",{onClick:()=>X(S.id),className:"text-red-400 hover:text-red-300 px-2 py-1 text-sm",title:"Delete server",children:""})]})]})},S.id))})]}),h.jsx("div",{className:"mt-6 pt-4 border-t border-slate-600",children:h.jsx("p",{className:"text-slate-400 text-xs",children:"Changes will take effect after reconnection. PeerJS servers are used for signaling, STUN servers help with NAT traversal."})})]})}):null},yv=({isVisible:c,onClose:a})=>{const[r,i]=U.useState("storage"),o=()=>{const d=JSON.parse(localStorage.getItem("chatHistory")||"[]"),m=JSON.parse(localStorage.getItem("callRecords")||"[]"),p=d.reduce((y,v)=>{var x;return y+(((x=v.messages)==null?void 0:x.length)||0)},0);return{chatHistory:d.length,totalMessages:p,callRecords:m.length,storageUsed:JSON.stringify({chatHistory:d,callRecords:m}).length}},f=d=>{try{let m;switch(d){case"clearFriends":confirm("Clear all friends data?")?(Object.keys(localStorage).forEach(p=>{p.startsWith("meshchat_friends_")&&localStorage.removeItem(p)}),m="All friends data cleared"):m="Operation cancelled";break;case"clearChatHistory":confirm("Clear all chat history?")?(localStorage.removeItem("chatHistory"),m="Chat history cleared"):m="Operation cancelled";break;case"clearCallHistory":confirm("Clear all call history?")?(localStorage.removeItem("callRecords"),m="Call history cleared"):m="Operation cancelled";break;default:m="Unknown command"}alert(m)}catch(m){alert(`Error: ${m}`)}};return c?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-slate-800 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[h.jsx("h2",{className:"text-xl font-bold text-white",children:" Debug Panel"}),h.jsx("button",{onClick:a,className:"text-slate-400 hover:text-white text-xl",children:""})]}),h.jsx("div",{className:"flex border-b border-slate-700",children:[{id:"storage",label:" Storage"},{id:"commands",label:" Commands"}].map(d=>h.jsx("button",{onClick:()=>i(d.id),className:`px-4 py-2 text-sm font-medium ${r===d.id?"bg-sky-600 text-white":"text-slate-400 hover:text-white hover:bg-slate-700"}`,children:d.label},d.id))}),h.jsxs("div",{className:"p-4 max-h-96 overflow-y-auto",children:[r==="storage"&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-white",children:"Storage Information"}),(()=>{const d=o();return h.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[h.jsxs("div",{className:"bg-slate-700 p-3 rounded",children:[h.jsx("div",{className:"text-slate-400",children:"Chat Conversations"}),h.jsx("div",{className:"text-white text-xl font-bold",children:d.chatHistory})]}),h.jsxs("div",{className:"bg-slate-700 p-3 rounded",children:[h.jsx("div",{className:"text-slate-400",children:"Total Messages"}),h.jsx("div",{className:"text-white text-xl font-bold",children:d.totalMessages})]}),h.jsxs("div",{className:"bg-slate-700 p-3 rounded",children:[h.jsx("div",{className:"text-slate-400",children:"Call Records"}),h.jsx("div",{className:"text-white text-xl font-bold",children:d.callRecords})]}),h.jsxs("div",{className:"bg-slate-700 p-3 rounded",children:[h.jsx("div",{className:"text-slate-400",children:"Storage Used"}),h.jsxs("div",{className:"text-white text-xl font-bold",children:[Math.round(d.storageUsed/1024)," KB"]})]})]})})()]}),r==="commands"&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-white",children:"Quick Commands"}),h.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[h.jsx("button",{onClick:()=>f("clearFriends"),className:"bg-red-600 hover:bg-red-500 text-white p-2 rounded text-sm text-left",children:" Clear All Friends Data"}),h.jsx("button",{onClick:()=>f("clearChatHistory"),className:"bg-red-600 hover:bg-red-500 text-white p-2 rounded text-sm text-left",children:" Clear Chat History"}),h.jsx("button",{onClick:()=>f("clearCallHistory"),className:"bg-red-600 hover:bg-red-500 text-white p-2 rounded text-sm text-left",children:" Clear Call History"})]}),h.jsx("div",{className:"text-slate-400 text-xs mt-4",children:" Tip: These commands help manage local storage and app data."})]})]})]})}):null},vv=({isReady:c,connectionStatus:a,isOnline:r,onReconnect:i})=>{const[o,f]=U.useState(!1),d=()=>r?c?"bg-green-500":"bg-yellow-500":"bg-red-500",m=()=>r?c?"Ready":a||"Connecting...":"Offline";return h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${d()}`}),h.jsxs("span",{className:"text-slate-400 text-xs",children:["Status: ",m()]}),!c&&h.jsx("button",{onClick:()=>f(!o),className:"text-slate-500 hover:text-slate-400 text-xs",title:"Show connection details",children:o?"":""})]}),a&&h.jsx("div",{className:"bg-yellow-600 text-yellow-100 p-2 rounded text-xs",children:a}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${r?"bg-green-500":"bg-red-500"}`}),h.jsxs("span",{className:"text-slate-400 text-xs",children:["Network: ",r?"Online":"Offline"]})]}),!c&&h.jsx("div",{className:"flex gap-1 mt-2",children:h.jsx("button",{onClick:i,className:"bg-orange-600 hover:bg-orange-500 text-white px-2 py-1 rounded text-xs",children:"Reconnect"})})]})},bv=({totalFriends:c,onlineFriends:a,isChecking:r,onRefresh:i})=>c===0?null:h.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[h.jsx("div",{className:`w-2 h-2 rounded-full ${r?"bg-yellow-500 animate-pulse":"bg-green-500"}`}),h.jsxs("span",{children:["Friends: ",a,"/",c," online"]}),i&&h.jsx("button",{onClick:i,disabled:r,className:"text-slate-500 hover:text-slate-300 disabled:opacity-50",title:"Refresh friends status",children:""})]}),xv=({isVisible:c,onClose:a,incomingRequests:r,activeTransfers:i,completedTransfers:o,onAcceptTransfer:f,onRejectTransfer:d,onCancelTransfer:m,formatFileSize:p,formatTransferSpeed:y,estimateRemainingTime:v})=>{const[x,_]=U.useState("requests");if(!c)return null;const M=C=>{switch(C){case"pending":return"";case"accepted":return"";case"rejected":return"";case"transferring":return"";case"completed":return"";case"failed":return"";case"cancelled":return"";default:return""}},R=C=>{switch(C){case"pending":return"Waiting";case"accepted":return"Accepted";case"rejected":return"Rejected";case"transferring":return"Transferring";case"completed":return"Completed";case"failed":return"Failed";case"cancelled":return"Cancelled";default:return C}},A=C=>{switch(C){case"pending":return"text-yellow-400";case"accepted":return"text-green-400";case"rejected":return"text-red-400";case"transferring":return"text-blue-400";case"completed":return"text-green-400";case"failed":return"text-red-400";case"cancelled":return"text-gray-400";default:return"text-slate-400"}};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-slate-800 p-6 rounded-lg max-w-4xl w-full mx-4 max-h-[80vh] overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-slate-100 font-medium text-lg",children:"File Transfers"}),h.jsx("button",{onClick:a,className:"text-slate-400 hover:text-slate-300 text-xl",children:""})]}),h.jsxs("div",{className:"flex mb-4 bg-slate-700 rounded-lg p-1",children:[h.jsxs("button",{onClick:()=>_("requests"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${x==="requests"?"bg-sky-600 text-white":"text-slate-300 hover:text-white hover:bg-slate-600"}`,children:["Incoming Files ",r.length>0&&h.jsx("span",{className:"ml-1 bg-red-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:r.length})]}),h.jsxs("button",{onClick:()=>_("active"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${x==="active"?"bg-sky-600 text-white":"text-slate-300 hover:text-white hover:bg-slate-600"}`,children:["Active ",i.length>0&&h.jsx("span",{className:"ml-1 bg-blue-500 text-white text-xs px-1.5 py-0.5 rounded-full",children:i.length})]}),h.jsxs("button",{onClick:()=>_("completed"),className:`flex-1 py-2 px-4 text-sm font-medium rounded-md transition-colors ${x==="completed"?"bg-sky-600 text-white":"text-slate-300 hover:text-white hover:bg-slate-600"}`,children:["Completed (",o.length,")"]})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto",children:[x==="requests"&&h.jsx("div",{className:"space-y-3",children:r.length===0?h.jsxs("div",{className:"text-center py-8 text-slate-400",children:[h.jsx("div",{className:"text-4xl mb-2",children:""}),h.jsx("p",{children:"No incoming files"})]}):r.map(C=>h.jsx("div",{className:"bg-slate-700 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("span",{className:"text-2xl",children:""}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-slate-100 font-medium",children:C.fileName}),h.jsxs("p",{className:"text-slate-400 text-sm",children:["From ",C.sender,"  ",p(C.fileSize)]})]})]}),h.jsxs("div",{className:"text-slate-300 text-sm",children:["File type: ",C.fileType||"Unknown"]})]}),h.jsx("div",{className:"flex gap-2 ml-4",children:h.jsx("button",{onClick:()=>m(C.id),className:"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded text-sm font-medium",children:"Cancel"})})]})},C.id))}),x==="active"&&h.jsx("div",{className:"space-y-3",children:i.length===0?h.jsxs("div",{className:"text-center py-8 text-slate-400",children:[h.jsx("div",{className:"text-4xl mb-2",children:""}),h.jsx("p",{children:"No active file transfers"})]}):i.map(C=>h.jsxs("div",{className:"bg-slate-700 rounded-lg p-4",children:[h.jsxs("div",{className:"flex items-start justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-2xl",children:""}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-slate-100 font-medium",children:C.fileName}),h.jsxs("p",{className:"text-slate-400 text-sm",children:[C.sender===C.receiver?"To":"From"," ",C.sender===C.receiver?C.receiver:C.sender,"  ",p(C.fileSize)]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:`text-sm ${A(C.status)}`,children:[M(C.status)," ",R(C.status)]}),(C.status==="transferring"||C.status==="accepted"||C.status==="pending")&&h.jsx("button",{onClick:()=>m(C.id),className:"text-red-400 hover:text-red-300 px-2 py-1 text-sm",title:"Cancel transfer",children:""})]})]}),C.status==="transferring"&&h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-sm text-slate-300",children:[h.jsxs("span",{children:[C.progress,"%"]}),h.jsx("span",{children:y(C)})]}),h.jsx("div",{className:"w-full bg-slate-600 rounded-full h-2",children:h.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${C.progress}%`}})}),h.jsxs("div",{className:"text-xs text-slate-400 text-center",children:["Remaining: ",v(C)]})]}),C.status==="pending"&&h.jsx("div",{className:"text-center py-2",children:h.jsxs("div",{className:"inline-flex items-center gap-2 text-yellow-400 text-sm",children:[h.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full"}),"Waiting for response..."]})}),C.status==="accepted"&&h.jsx("div",{className:"text-center py-2",children:h.jsxs("div",{className:"inline-flex items-center gap-2 text-green-400 text-sm",children:[h.jsx("div",{className:"animate-pulse w-4 h-4 bg-green-400 rounded-full"}),"Preparing to transfer..."]})})]},C.id))}),x==="completed"&&h.jsx("div",{className:"space-y-3",children:o.length===0?h.jsxs("div",{className:"text-center py-8 text-slate-400",children:[h.jsx("div",{className:"text-4xl mb-2",children:""}),h.jsx("p",{children:"No completed file transfers"})]}):o.map(C=>h.jsx("div",{className:"bg-slate-700 rounded-lg p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-2xl",children:""}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-slate-100 font-medium",children:C.fileName}),h.jsxs("p",{className:"text-slate-400 text-sm",children:[C.sender===C.receiver?"To":"From"," ",C.sender===C.receiver?C.receiver:C.sender,"  ",p(C.fileSize)]}),C.startTime&&C.endTime&&h.jsxs("p",{className:"text-slate-500 text-xs",children:["Duration: ",Math.round((C.endTime-C.startTime)/1e3),"s"]}),C.error&&h.jsxs("p",{className:"text-red-400 text-xs",children:["Error: ",C.error]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:`text-sm ${A(C.status)}`,children:[M(C.status)," ",R(C.status)]}),h.jsx("button",{onClick:()=>{const O=Ln.getInstance().getFilePreviewUrl(C.id);O&&window.open(O,"_blank")},className:"text-sky-400 hover:text-sky-300 px-2 py-1 text-sm",title:"Preview",children:""}),h.jsx("button",{onClick:()=>{const O=Ln.getInstance().getFileBlob(C.id);if(O){const j=URL.createObjectURL(O),E=document.createElement("a");E.href=j,E.download=C.fileName,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(j)}},className:"text-green-400 hover:text-green-300 px-2 py-1 text-sm",title:"Save",children:""})]})]})},C.id))})]}),h.jsx("div",{className:"mt-4 pt-4 border-t border-slate-600",children:h.jsx("p",{className:"text-slate-400 text-xs text-center",children:"Supports up to 100MB file transfers  Files are transferred directly P2P, not through servers"})})]})})},$m=({onFileSelect:c,disabled:a=!1,className:r="",size:i="md"})=>{const o=U.useRef(null),[f,d]=U.useState(!1),m=M=>{var A;const R=(A=M.target.files)==null?void 0:A[0];R&&(c(R),M.target.value="")},p=()=>{var M;a||(M=o.current)==null||M.click()},y=M=>{M.preventDefault(),a||d(!0)},v=M=>{M.preventDefault(),d(!1)},x=M=>{if(M.preventDefault(),d(!1),a)return;const R=M.dataTransfer.files;R.length>0&&c(R[0])},_=()=>{switch(i){case"sm":return"p-1 text-sm";case"lg":return"p-3 text-lg";default:return"p-2 text-base"}};return h.jsxs("div",{className:"relative",children:[h.jsx("input",{ref:o,type:"file",onChange:m,className:"hidden",accept:"*/*"}),h.jsxs("button",{onClick:p,onDragOver:y,onDragLeave:v,onDrop:x,disabled:a,className:`
          inline-flex items-center justify-center rounded-lg font-medium transition-all duration-200
          ${_()}
          ${a?"bg-slate-600 text-slate-400 cursor-not-allowed":f?"bg-sky-500 text-white shadow-lg scale-105":"bg-slate-700 text-slate-300 hover:bg-sky-600 hover:text-white hover:shadow-md"}
          ${r}
        `,title:a?"Cannot send file":"Click to select file or drag file here",children:[h.jsx("span",{className:"text-lg mr-1",children:""}),i!=="sm"&&h.jsx("span",{children:"Send File"})]}),f&&h.jsx("div",{className:"absolute inset-0 border-2 border-dashed border-sky-400 rounded-lg bg-sky-400 bg-opacity-10 flex items-center justify-center",children:h.jsx("span",{className:"text-sky-400 font-medium",children:"Drop file"})})]})},Sv=({transferId:c,isSender:a})=>{const{getTransfer:r,cancelFileTransfer:i,getFilePreviewUrl:o,getFileBlob:f,formatFileSize:d}=Dp(null,""),[m,p]=U.useState(r(c));if(U.useEffect(()=>{const x=()=>{p(r(c))};x();const _=setInterval(x,1e3);return()=>clearInterval(_)},[c,r]),!m)return h.jsx("div",{className:`p-3 rounded-lg max-w-xs break-words ${a?"bg-sky-600 text-white self-end":"bg-slate-700 text-slate-200 self-start"}`,children:h.jsx("p",{className:"text-sm",children:"..."})});const y=()=>{const x=f(m.id);if(x){const _=URL.createObjectURL(x),M=document.createElement("a");M.href=_,M.download=m.fileName,document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(_)}},v=()=>{switch(m.status){case"transferring":return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[h.jsxs("span",{children:[m.progress,"%"]}),h.jsx("button",{onClick:()=>i(m.id),className:"text-red-300 hover:text-red-200 text-xs",children:""})]}),h.jsx("div",{className:"w-full bg-slate-500 rounded-full h-2",children:h.jsx("div",{className:"bg-sky-400 h-2 rounded-full",style:{width:`${m.progress}%`}})})]});case"completed":const x=o(m.id);return h.jsxs(h.Fragment,{children:[x&&(m.fileType.startsWith("image/")||m.fileType.startsWith("video/"))?m.fileType.startsWith("image/")?h.jsx("img",{src:x,alt:m.fileName,className:"max-w-full max-h-48 rounded-md my-2 cursor-pointer",onClick:()=>window.open(x,"_blank")}):h.jsx("video",{src:x,controls:!0,className:"max-w-full max-h-48 rounded-md my-2"}):h.jsx("div",{className:"my-2 p-2 bg-slate-600 rounded-md text-center",children:h.jsx("p",{className:"text-sm",children:""})}),h.jsx("button",{onClick:y,className:"mt-2 w-full bg-sky-500 hover:bg-sky-400 text-white px-3 py-1 rounded text-sm font-medium",children:""})]});case"failed":case"cancelled":return h.jsx("p",{className:"text-red-300 text-sm",children:m.status==="failed"?`: ${m.error}`:""});default:return h.jsx("p",{className:"text-sm",children:"..."})}};return h.jsxs("div",{className:`p-3 rounded-lg max-w-xs break-words ${a?"bg-sky-700 text-white self-end":"bg-slate-600 text-slate-200 self-start"}`,children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx("span",{className:"text-2xl",children:""}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-sm",children:m.fileName}),h.jsx("p",{className:"text-xs text-slate-300",children:d(m.fileSize)})]})]}),v()]})},Cv=({isVisible:c,onClose:a})=>{const[r,i]=U.useState([]);U.useEffect(()=>{if(c){const m=JSON.parse(localStorage.getItem("callRecords")||"[]");i(m.sort((p,y)=>y.timestamp-p.timestamp))}},[c]);const o=m=>{const p=Math.floor(m/60),y=m%60;return`${p}:${y.toString().padStart(2,"0")}`},f=m=>{const p=new Date(m);return`${p.toLocaleDateString()} ${p.toLocaleTimeString()}`},d=()=>{confirm("Clear all call history?")&&(localStorage.removeItem("callRecords"),i([]))};return c?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-slate-800 rounded-lg p-6 w-full max-w-md mx-4 max-h-96 overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-bold text-white",children:"Call History"}),h.jsx("button",{onClick:a,className:"text-slate-400 hover:text-slate-300 text-xl",children:""})]}),h.jsx("div",{className:"overflow-y-auto max-h-64",children:r.length>0?h.jsx("div",{className:"space-y-2",children:r.map(m=>h.jsx("div",{className:"bg-slate-700 p-3 rounded",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-lg",children:m.type==="video"?"":""}),h.jsxs("div",{children:[h.jsx("div",{className:"text-white font-medium",children:m.type==="video"?"Video Call":"Audio Call"}),h.jsx("div",{className:"text-slate-400 text-sm",children:f(m.timestamp)})]})]}),h.jsx("div",{className:"text-green-400 font-mono",children:o(m.duration)})]})},m.id))}):h.jsx("div",{className:"text-center text-slate-400 py-8",children:"No call history"})}),h.jsxs("div",{className:"flex gap-2 mt-4",children:[h.jsx("button",{onClick:d,className:"flex-1 bg-red-600 hover:bg-red-500 text-white py-2 px-4 rounded",children:"Clear History"}),h.jsx("button",{onClick:a,className:"flex-1 bg-slate-600 hover:bg-slate-500 text-white py-2 px-4 rounded",children:"Close"})]})]})}):null},_v=({isOpen:c,onClose:a})=>c?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-bold",children:" Support This Project"}),h.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700",children:""})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"mb-4 text-gray-600",children:"Help keep this project free and open source! Your support helps with development and server costs."}),h.jsxs("form",{action:"https://www.paypal.com/cgi-bin/webscr",method:"post",target:"_blank",className:"inline-block",children:[h.jsx("input",{type:"hidden",name:"cmd",value:"_s-xclick"}),h.jsx("input",{type:"hidden",name:"hosted_button_id",value:"66X23LVXDKZAN"}),h.jsx("table",{className:"w-full mb-4",children:h.jsxs("tbody",{children:[h.jsx("tr",{children:h.jsxs("td",{className:"pb-2",children:[h.jsx("input",{type:"hidden",name:"on0",value:"Voluntary Sponsorship.Thanks"}),h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Voluntary Sponsorship Message"})]})}),h.jsx("tr",{children:h.jsx("td",{children:h.jsx("input",{type:"text",name:"os0",maxLength:200,placeholder:"Optional message...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})})})]})}),h.jsx("input",{type:"hidden",name:"currency_code",value:"USD"}),h.jsx("input",{type:"image",src:"https://www.paypalobjects.com/en_US/i/btn/btn_paynowCC_LG.gif",name:"submit",title:"PayPal - The safer, easier way to pay online!",alt:"Donate with PayPal button",className:"hover:opacity-80 transition-opacity"})]}),h.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"All donations are voluntary and help support development"})]})]})}):null,$r=class $r{static async requestWakeLock(a="chat"){if(!this.isSupported)return console.log("Wake Lock API not supported"),!1;try{return this.wakeLock=await navigator.wakeLock.request("screen"),console.log(` Screen wake lock activated: ${a}`),this.wakeLock.addEventListener("release",()=>{console.log(" Screen wake lock released")}),!0}catch(r){return console.error("Failed to request wake lock:",r),!1}}static async releaseWakeLock(){this.wakeLock&&(await this.wakeLock.release(),this.wakeLock=null)}static isActive(){return this.wakeLock!==null&&!this.wakeLock.released}static handleVisibilityChange(){document.visibilityState==="visible"&&this.wakeLock&&this.wakeLock.released&&this.requestWakeLock("visibility-change")}};$r.wakeLock=null,$r.isSupported="wakeLock"in navigator;let zn=$r;const Tv=({identity:c,onLogout:a})=>{const[r,i]=U.useState(""),[o,f]=U.useState("friends"),[d,m]=U.useState(!1),[p,y]=U.useState(!1),[v,x]=U.useState(!1),[_,M]=U.useState(!1),[R,A]=U.useState(!1),[C,O]=U.useState(!1),j=U.useRef(null),[E,N]=U.useState(""),H=U.useRef(null),[Y,w]=U.useState(""),F=U.useRef(null);U.useEffect(()=>{const Z=localStorage.getItem("meshchat_network_frequency")||"MEDIUM_FREQUENCY";Ly(Z),console.log(" Network frequency initialized:",Z)},[]);const{isReady:V,isOnline:ne,connectionStatus:W,attemptReconnect:te,getCacheStats:se,peerInstance:X}=wy(c.username,c.peerId),{currentRoom:le,roomMessages:$,createRoom:K,inviteFriendToRoom:ee,sendRoomMessage:me,leaveRoom:S}=zy(c.username,c.peerId,X),{friends:z,setFriends:J,onlineFriendsCount:ae,isCheckingFriends:ce,refreshFriendsStatus:ye}=Uy(c.peerId),{incomingRequests:ue,isTransferModalOpen:ke,setIsTransferModalOpen:xe,sendFile:Je,acceptFileTransfer:Ft,rejectFileTransfer:ga,cancelFileTransfer:os,registerConnection:cs,getActiveTransfers:qn,getCompletedTransfers:Gr,formatFileSize:Vr,formatTransferSpeed:Et,estimateRemainingTime:Qr}=Dp(X,c.username),{currentChat:Le,startChat:yi,sendMessage:ya,sendFileNotification:Fr,closeChat:vi}=By(c.username,X,cs);U.useMemo(()=>new Map(z.map(Z=>[Z.peerId,{peerId:Z.peerId,username:Z.username,isAlive:Z.isOnline}])),[z]);const{callState:va,localVideoRef:Ir,remoteVideoRef:$n,startCall:lt,acceptCall:Lt,rejectCall:ot,endCall:Xr,switchCamera:Kr,formatDuration:Zr}=ky(X);se();const It=async()=>{try{document.fullscreenElement?(await document.exitFullscreen(),O(!1)):(await document.documentElement.requestFullscreen(),O(!0))}catch{console.log("Fullscreen not supported, using layout fullscreen"),O(!C)}};U.useEffect(()=>{var Z;(Z=j.current)==null||Z.scrollIntoView({behavior:"smooth"})},[$]),U.useEffect(()=>{const Z=Qe=>{Qe.key==="F11"&&(Qe.preventDefault(),It())};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[It]),U.useEffect(()=>{if(X){const Z=Qe=>{Qe.on("data",Fe=>{Fe.type==="friend_added"?(console.log(" Received friend request from:",Fe.fromUsername),z.some(fs=>fs.peerId===Fe.fromPeerId)||window.dispatchEvent(new CustomEvent("autoAddFriend",{detail:{peerId:Fe.fromPeerId,username:Fe.fromUsername}}))):Fe.type==="friend_added_back"&&console.log(" Friend confirmed mutual addition:",Fe.fromUsername)})};return X.on("connection",Z),()=>{X.off("connection",Z)}}},[X]);const Pn=(Z,Qe=!1)=>{lt(Z,Qe)},Ht=Z=>{const Qe=z.find(Fe=>Fe.peerId===Z);return(Qe==null?void 0:Qe.username)||"Unknown"},Yn=()=>{if(!E.trim())return;if(!Le){console.warn("No active chat");return}if(!Le.isConnected){alert("Friend is offline. Message cannot be sent.");return}ya(Le.peerId,E.trim())?N(""):alert("Failed to send message. Please check your connection.")},Gn=Z=>{Z.key==="Enter"&&!Z.shiftKey&&(Z.preventDefault(),Yn())},bi=()=>{Y.trim()&&le&&(me(Y.trim()),w(""))},xi=Z=>{Z.key==="Enter"&&!Z.shiftKey&&(Z.preventDefault(),bi())},us=async(Z,Qe=!1)=>{const Fe=Qe?null:Le==null?void 0:Le.peerId;if(!Fe&&!Qe){alert("Please select a friend to send the file to.");return}if(Qe&&le){console.log(`Attempting to send file ${Z.name} to room ${le.roomName}`),alert("File sending in rooms is not yet implemented.");return}if(Fe)try{const Xt=await Je(Z,Fe);Fr(Fe,Z.name,Z.size,Xt),console.log(` Started sending file: ${Z.name} to ${Fe}`)}catch(Xt){console.error("Failed to send file:",Xt),alert(`Failed to send file: ${Xt instanceof Error?Xt.message:"Unknown error"}`)}},ba=Z=>Z.type==="file"&&Z.transferId?h.jsx(Sv,{transferId:Z.transferId,isSender:Z.isLocal}):h.jsx("p",{children:Z.content});return U.useEffect(()=>{const Z=()=>{O(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",Z),()=>document.removeEventListener("fullscreenchange",Z)},[]),U.useEffect(()=>{const Z=(Le==null?void 0:Le.isConnected)||va.isInCall;Z&&!zn.isActive()?zn.requestWakeLock(va.isInCall?"call":"chat"):!Z&&zn.isActive()&&zn.releaseWakeLock()},[Le==null?void 0:Le.isConnected,va.isInCall]),U.useEffect(()=>{const Z=()=>{zn.handleVisibilityChange()};return document.addEventListener("visibilitychange",Z),()=>document.removeEventListener("visibilitychange",Z)},[]),U.useEffect(()=>()=>{zn.releaseWakeLock()},[]),h.jsxs("div",{className:"h-screen w-screen flex flex-col md:flex-row bg-slate-900",children:[h.jsxs("aside",{className:`${C?"hidden":"w-full md:w-64 lg:w-72"} bg-slate-800 p-4 border-b md:border-b-0 md:border-r border-slate-700 flex flex-col`,children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h1",{className:"text-2xl font-bold text-sky-400 mb-3",children:"MUVOV Mesh Chat"}),h.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[h.jsxs("button",{onClick:()=>xe(!0),className:"text-slate-400 hover:text-slate-300 text-sm relative",title:"File Transfers",children:["",(ue.length>0||qn().length>0)&&h.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:ue.length+qn().length})]}),h.jsx("button",{onClick:()=>M(!0),className:"text-slate-400 hover:text-slate-300 text-sm",title:"Call History",children:""}),h.jsx("button",{onClick:()=>x(!0),className:"text-slate-400 hover:text-slate-300 text-sm",title:"Debug Panel",children:""}),h.jsx("button",{onClick:()=>y(!0),className:"text-slate-400 hover:text-slate-300 text-sm",title:"Settings",children:""}),h.jsx("button",{onClick:()=>m(!0),className:"text-slate-400 hover:text-slate-300 text-sm",title:"Backup & Restore",children:""}),h.jsx("button",{onClick:()=>A(!0),className:"text-slate-400 hover:text-slate-300 text-sm",title:"Support Project",children:""}),h.jsx("button",{onClick:a,className:"text-slate-400 hover:text-slate-300 text-sm",children:"Logout"})]}),h.jsxs("p",{className:"text-sm text-slate-400",children:["Welcome, ",h.jsx("span",{className:"font-semibold",children:c.username})]}),h.jsxs("div",{className:"mt-2 space-y-2",children:[h.jsx(vv,{isReady:V,connectionStatus:W,isOnline:ne,onReconnect:te}),h.jsx(bv,{totalFriends:z.length,onlineFriends:ae,isChecking:ce,onRefresh:ye})]})]}),h.jsxs("div",{className:"flex mb-3",children:[h.jsx("button",{onClick:()=>f("friends"),className:`flex-1 py-2 px-3 text-sm font-medium rounded-l ${o==="friends"?"bg-sky-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Friends"}),h.jsx("button",{onClick:()=>f("rooms"),className:`flex-1 py-2 px-3 text-sm font-medium rounded-r ${o==="rooms"?"bg-sky-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:"Rooms"})]}),h.jsxs("div",{className:"overflow-y-auto flex-1",children:[o==="friends"&&h.jsx(dv,{currentIdentity:c,peerInstance:X,friends:z,setFriends:J,onStartAudioCall:Z=>Pn(Z,!1),onStartVideoCall:Z=>Pn(Z,!0),onStartChat:(Z,Qe)=>{yi(Z,Qe)}}),o==="rooms"&&h.jsx(hv,{currentRoom:le,friends:z,onCreateRoom:K,onInviteFriend:ee,onLeaveRoom:S})]})]}),h.jsx("main",{className:"flex-1 flex flex-col bg-slate-900",children:Le?h.jsxs("div",{className:"flex-1 flex flex-col",children:[h.jsxs("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between",children:[h.jsx("h2",{className:"text-xl font-bold text-white",children:Le.username}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`w-3 h-3 rounded-full ${Le.isConnected?"bg-green-500":"bg-red-500"}`}),h.jsx("span",{className:"text-sm text-slate-400",children:Le.isConnected?"Secure Chat Connected":"Secure Chat Disconnected"}),h.jsx("button",{onClick:It,className:"text-slate-400 hover:text-slate-300 text-lg",title:C?"Exit Fullscreen (ESC)":"Enter Fullscreen (F11)",children:C?"":""}),h.jsx("button",{onClick:()=>{vi(Le.peerId),C&&O(!1)},className:"text-slate-400 hover:text-slate-300 text-xl",title:"Close Chat",children:""})]})]}),h.jsx("div",{className:"flex-1 p-4 md:p-6 overflow-y-auto",children:h.jsx("div",{className:"space-y-4",children:Le.messages.map(Z=>h.jsx("div",{className:`flex ${Z.isLocal?"justify-end":"justify-start"}`,children:h.jsxs("div",{className:`px-4 py-2 rounded-lg max-w-xs md:max-w-md lg:max-w-lg ${Z.isLocal?"bg-blue-600 text-white":"bg-slate-700 text-slate-200"}`,children:[ba(Z),h.jsxs("div",{className:"text-xs text-slate-400 mt-1 text-right flex items-center justify-end gap-1",children:[h.jsxs("span",{children:[new Date(Z.timestamp).toLocaleDateString()," ",new Date(Z.timestamp).toLocaleTimeString()]}),Z.isLocal&&h.jsxs("span",{className:"text-xs",children:[Z.status==="sending"&&"",Z.status==="delivered"&&"",Z.status==="failed"&&""]})]})]})},Z.id))})}),h.jsx("div",{className:"p-4 pb-safe border-t border-slate-700",style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:h.jsxs("div",{className:"relative",children:[h.jsx("textarea",{ref:H,value:E,onChange:Z=>N(Z.target.value),onKeyDown:Gn,onFocus:()=>{setTimeout(()=>{var Z;(Z=H.current)==null||Z.scrollIntoView({behavior:"smooth",block:"center"})},300)},placeholder:"Type a message...",className:"w-full bg-slate-800 border border-slate-600 rounded-lg p-3 pr-24 text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:1}),h.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center",children:[h.jsx($m,{onFileSelect:us}),h.jsx("button",{onClick:Yn,className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-lg ml-2",children:"Send"})]})]})})]}):le?h.jsxs("div",{className:"flex-1 flex flex-col",children:[h.jsxs("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between",children:[h.jsxs("h2",{className:"text-xl font-bold text-white",children:["Room: ",le.roomName]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"text-sm text-slate-400",children:[le.members.size," members"]}),h.jsx("button",{onClick:It,className:"text-slate-400 hover:text-slate-300 text-lg",title:C?"Exit Fullscreen (ESC)":"Enter Fullscreen (F11)",children:C?"":""}),h.jsx("button",{onClick:()=>{S(),C&&O(!1)},className:"text-slate-400 hover:text-slate-300 text-xl",title:"Leave Room",children:""})]})]}),h.jsx("div",{className:"flex-1 p-4 md:p-6 overflow-y-auto",children:h.jsx("div",{className:"space-y-4",children:$.map(Z=>h.jsx("div",{className:`flex ${Z.isLocal?"justify-end":"justify-start"}`,children:h.jsxs("div",{className:`px-4 py-2 rounded-lg max-w-xs md:max-w-md lg:max-w-lg ${Z.isLocal?"bg-blue-600 text-white":"bg-slate-700 text-slate-200"}`,children:[h.jsx("div",{className:"text-sm font-bold text-slate-400",children:Ht(Z.sender)}),ba(Z),h.jsxs("div",{className:"text-xs text-slate-400 mt-1 text-right",children:[new Date(Z.timestamp).toLocaleDateString()," ",new Date(Z.timestamp).toLocaleTimeString()]})]})},Z.id))})}),h.jsx("div",{className:"p-4 pb-safe border-t border-slate-700",style:{paddingBottom:"max(1rem, env(safe-area-inset-bottom))"},children:h.jsxs("div",{className:"relative",children:[h.jsx("textarea",{ref:F,value:Y,onChange:Z=>w(Z.target.value),onKeyDown:xi,onFocus:()=>{setTimeout(()=>{var Z;(Z=F.current)==null||Z.scrollIntoView({behavior:"smooth",block:"center"})},300)},placeholder:"Type a message in the room...",className:"w-full bg-slate-800 border border-slate-600 rounded-lg p-3 pr-24 text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",rows:1}),h.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center",children:[h.jsx($m,{onFileSelect:Z=>us(Z,!0)}),h.jsx("button",{onClick:bi,className:"bg-blue-600 hover:bg-blue-500 text-white font-bold py-2 px-4 rounded-lg ml-2",children:"Send"})]})]})})]}):h.jsx("div",{className:"flex-1 flex items-center justify-center text-center",children:h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to Mesh Chat"}),h.jsx("p",{children:"Select a friend from the list to start a conversation."})]})})}),h.jsx(mv,{callState:va,localVideoRef:Ir,remoteVideoRef:$n,onAccept:Lt,onReject:ot,onEndCall:Xr,onSwitchCamera:Kr,getCallerName:Ht,formatDuration:Zr}),h.jsx(xv,{isVisible:ke,onClose:()=>xe(!1),incomingRequests:ue,activeTransfers:qn(),completedTransfers:Gr(),onAcceptTransfer:Ft,onRejectTransfer:ga,onCancelTransfer:os,formatFileSize:Vr,formatTransferSpeed:Et,estimateRemainingTime:Qr}),h.jsx(pv,{isVisible:d,onClose:()=>m(!1),onRestoreComplete:()=>{window.location.reload()}}),h.jsx(gv,{isVisible:p,onClose:()=>y(!1),onSettingsChanged:()=>{console.log("Settings have been changed. A restart may be required.")}}),h.jsx(yv,{isVisible:v,onClose:()=>x(!1)}),h.jsx(Cv,{isVisible:_,onClose:()=>M(!1)}),h.jsx(_v,{isOpen:R,onClose:()=>A(!1)})]})};function Ev(){const[c,a]=U.useState(null);U.useEffect(()=>{const o=localStorage.getItem("meshchat_current_identity");o&&a(JSON.parse(o))},[]);const r=o=>{a(o)},i=()=>{localStorage.removeItem("meshchat_current_identity"),window.location.reload()};return c?h.jsx(Tv,{identity:c,onLogout:i}):h.jsx(ly,{onLogin:r})}window.addEventListener("error",c=>{try{console.error("[GlobalError]",c.error||c.message,c.error?c.error.stack:"")}catch{}});window.addEventListener("unhandledrejection",c=>{try{console.error("[UnhandledRejection]",c.reason,c.reason&&c.reason.stack?c.reason.stack:"")}catch{}});const Up=document.getElementById("root");if(!Up)throw new Error("Could not find root element to mount to");const Rv=ry.createRoot(Up);Rv.render(h.jsx(J0.StrictMode,{children:h.jsx(Ev,{})}));
